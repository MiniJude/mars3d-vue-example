/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.3
 * 编译日期：2025-03-18 22:13
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0xb9cfe3,_0x32dbad){function _0x23a76e(_0x394281,_0x273d54){return _0x15b7(_0x394281-0x1bd,_0x273d54);}const _0x56a8cf=_0xb9cfe3();function _0x54b8d0(_0x8a5964,_0x2c4dc0){return _0x15b7(_0x2c4dc0-0x382,_0x8a5964);}while(!![]){try{const _0x55b36b=-parseInt(_0x23a76e(0x382,0x39d))/0x1*(parseInt(_0x23a76e(0x349,0x39c))/0x2)+-parseInt(_0x23a76e(0x2e7,0x2e1))/0x3+-parseInt(_0x23a76e(0x37f,0x34d))/0x4*(parseInt(_0x54b8d0(0x52f,0x4ca))/0x5)+parseInt(_0x23a76e(0x32c,0x379))/0x6+-parseInt(_0x54b8d0(0x45f,0x4dc))/0x7+parseInt(_0x54b8d0(0x56a,0x52d))/0x8+parseInt(_0x23a76e(0x33f,0x31d))/0x9;if(_0x55b36b===_0x32dbad)break;else _0x56a8cf['push'](_0x56a8cf['shift']());}catch(_0x5b96cb){_0x56a8cf['push'](_0x56a8cf['shift']());}}}(_0xe8e4,0xcf2e5));function _interopNamespace(_0x4b403a){if(_0x4b403a&&_0x4b403a['__esModule'])return _0x4b403a;var _0x4c5f86=Object['create'](null);return _0x4b403a&&Object['keys'](_0x4b403a)['forEach'](function(_0x52a7cb){function _0x1ff0fb(_0x4ee506,_0x4e2951){return _0x15b7(_0x4e2951-0x2e6,_0x4ee506);}if(_0x52a7cb!==_0x1ff0fb(0x3db,0x445)){var _0x5bde00=Object['getOwnPropertyDescriptor'](_0x4b403a,_0x52a7cb);Object['defineProperty'](_0x4c5f86,_0x52a7cb,_0x5bde00['get']?_0x5bde00:{'enumerable':!![],'get':function(){return _0x4b403a[_0x52a7cb];}});}}),_0x4c5f86['default']=_0x4b403a,_0x4c5f86;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x2a8609,_0x39df6a){function _0x46d4df(_0x5cd13d,_0x471c71){return _0x15b7(_0x471c71- -0xfe,_0x5cd13d);}const _0x2e3440=_0x2a8609*Math['cos'](Cesium$2[_0x46d4df(0x96,0x66)]['toRadians'](_0x39df6a));return _0x2e3440;}function getV(_0x31ad76,_0x54dce0){function _0x12a0b2(_0x33aaa6,_0x6e66cc){return _0x15b7(_0x6e66cc-0x5b,_0x33aaa6);}const _0x248988=_0x31ad76*Math['sin'](Cesium$2[_0x12a0b2(0x15f,0x1bf)]['toRadians'](_0x54dce0));return _0x248988;}function getSpeed(_0x4e2be4,_0x57f205){function _0x509cab(_0x16b484,_0x9ef958){return _0x15b7(_0x16b484-0x3,_0x9ef958);}const _0x162c06=Math['sqrt'](Math['pow'](_0x4e2be4,0x2)+Math[_0x509cab(0x169,0x1cf)](_0x57f205,0x2));return _0x162c06;}function getDirection(_0x44ca85,_0x2ca544){let _0x6fd6b6=Cesium$2['Math'][_0x2ddace(0x526,0x50c)](Math['atan2'](_0x2ca544,_0x44ca85));_0x6fd6b6+=_0x6fd6b6<0x0?0x168:0x0;function _0x2ddace(_0x143eb6,_0x2401f0){return _0x15b7(_0x143eb6-0x3e7,_0x2401f0);}return _0x6fd6b6;}const _0x438a4b={};_0x438a4b['__proto__']=null,_0x438a4b['getU']=getU,_0x438a4b[_0x395db7(0x424,0x3e9)]=getV,_0x438a4b[_0x395db7(0x495,0x450)]=getSpeed,_0x438a4b['getDirection']=getDirection;var WindUtil=_0x438a4b,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x395db7(0x423,0x3e2),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0xf35b76={};return _0xf35b76['sources']=[calculateSpeedShader],new ShaderSource$1(_0xf35b76);}static['getUpdatePositionShader'](){const _0x1412d7={};function _0x4d63ac(_0x662337,_0x524765){return _0x395db7(_0x662337,_0x524765- -0x398);}return _0x1412d7[_0x4d63ac(0xa7,0xa1)]=[updatePositionShader],new ShaderSource$1(_0x1412d7);}static['getSegmentDrawVertexShader'](){function _0x488314(_0x3c96f7,_0x4567cf){return _0x56b2d0(_0x4567cf,_0x3c96f7- -0x126);}const _0x2d1a0b={};return _0x2d1a0b[_0x488314(0x1b,0x9a)]=[renderParticlesVertexShader],new ShaderSource$1(_0x2d1a0b);}static['getSegmentDrawFragmentShader'](){const _0x183caa={};function _0x47dca6(_0x27cca8,_0x49822d){return _0x56b2d0(_0x49822d,_0x27cca8-0x124);}return _0x183caa[_0x47dca6(0x265,0x2ba)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x183caa);}static['getPostProcessingPositionShader'](){const _0x427579={};return _0x427579['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x427579);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x38fb38){this[_0x51ac1e(0x577,0x5d4)]=_0x38fb38[_0x51ac1e(0x5d9,0x5d4)],this['geometry']=_0x38fb38['geometry'],this[_0xb021fd(0x158,0x196)]=_0x38fb38[_0x51ac1e(0x53d,0x542)],this['primitiveType']=_0x38fb38[_0x51ac1e(0x54e,0x58f)],this['uniformMap']=_0x38fb38['uniformMap']||{};function _0xb021fd(_0x2c2016,_0x361d08){return _0x56b2d0(_0x2c2016,_0x361d08-0xdb);}this['vertexShaderSource']=_0x38fb38[_0x51ac1e(0x5b9,0x5b3)];function _0x51ac1e(_0x28bbb7,_0x23ea15){return _0x395db7(_0x28bbb7,_0x23ea15-0x18f);}this[_0x51ac1e(0x568,0x540)]=_0x38fb38[_0xb021fd(0x1bf,0x194)],this['rawRenderState']=_0x38fb38[_0x51ac1e(0x5a8,0x5e9)],this['framebuffer']=_0x38fb38[_0x51ac1e(0x4f4,0x505)],this['outputTexture']=_0x38fb38['outputTexture'],this['autoClear']=_0x38fb38[_0xb021fd(0x152,0x199)]??![],this['preExecute']=_0x38fb38['preExecute'],this[_0x51ac1e(0x55d,0x5a5)]=!![],this[_0xb021fd(0x13b,0x18a)]=undefined,this['clearCommand']=undefined,this[_0xb021fd(0x1c4,0x1d3)]=_0x38fb38[_0x51ac1e(0x57b,0x57f)]??(()=>!![]),this[_0x51ac1e(0x5c4,0x545)]&&(this[_0x51ac1e(0x570,0x5bc)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x51ac1e(0x4a5,0x505)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x481039){function _0x5b5fbb(_0x35ee23,_0x480b9){return _0x56b2d0(_0x35ee23,_0x480b9-0x1d9);}function _0x331be4(_0x49d5ec,_0x1e9169){return _0x395db7(_0x49d5ec,_0x1e9169- -0x511);}if(this['commandType']==='Draw'){const _0x432bde={};_0x432bde['context']=_0x481039,_0x432bde[_0x331be4(-0x11f,-0xde)]=this['geometry'],_0x432bde[_0x5b5fbb(0x27e,0x294)]=this['attributeLocations'],_0x432bde['bufferUsage']=BufferUsage$1[_0x331be4(-0x84,-0xf1)];const _0x29aadf=VertexArray$1['fromGeometry'](_0x432bde),_0x355220={};_0x355220[_0x331be4(-0xe3,-0x106)]=_0x481039,_0x355220['vertexShaderSource']=this['vertexShaderSource'],_0x355220['fragmentShaderSource']=this[_0x331be4(-0x1b9,-0x160)],_0x355220['attributeLocations']=this[_0x331be4(-0x173,-0x15e)];const _0x3c438e=ShaderProgram['fromCache'](_0x355220),_0x1936da=RenderState[_0x5b5fbb(0x2e7,0x2a1)](this['rawRenderState']),_0x596920={};return _0x596920['owner']=this,_0x596920[_0x5b5fbb(0x34e,0x2d4)]=_0x29aadf,_0x596920[_0x331be4(-0x13b,-0x111)]=this['primitiveType'],_0x596920[_0x331be4(-0x1af,-0x148)]=Matrix4['IDENTITY'],_0x596920['renderState']=_0x1936da,_0x596920[_0x331be4(-0x106,-0x108)]=_0x3c438e,_0x596920[_0x331be4(-0x177,-0x19b)]=this['framebuffer'],_0x596920['uniformMap']=this['uniformMap'],_0x596920['pass']=Pass$1[_0x5b5fbb(0x317,0x2fa)],new DrawCommand(_0x596920);}else{if(this[_0x331be4(-0xb5,-0xcc)]==='Compute'){const _0x28e6c7={};return _0x28e6c7['owner']=this,_0x28e6c7['fragmentShaderSource']=this[_0x331be4(-0x1a6,-0x160)],_0x28e6c7[_0x331be4(-0x1c5,-0x144)]=this['uniformMap'],_0x28e6c7['outputTexture']=this['outputTexture'],_0x28e6c7['persists']=!![],new ComputeCommand(_0x28e6c7);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x38c6d2,_0x8271a4){function _0x11ca5d(_0x5c233c,_0x65eccc){return _0x395db7(_0x5c233c,_0x65eccc-0x37);}function _0x311388(_0x388c9f,_0x715030){return _0x395db7(_0x388c9f,_0x715030-0x126);}this['geometry']=_0x8271a4,defined(this['commandToExecute'])&&(this[_0x11ca5d(0x3c2,0x3de)][_0x11ca5d(0x496,0x42a)]=VertexArray$1[_0x11ca5d(0x3a5,0x3db)]({'context':_0x38c6d2,'geometry':this['geometry'],'attributeLocations':this[_0x311388(0x483,0x4d9)],'bufferUsage':BufferUsage$1[_0x311388(0x4f8,0x546)]}));}['update'](_0x1a8c92){function _0x848fa5(_0x5be4f8,_0xc608d0){return _0x56b2d0(_0xc608d0,_0x5be4f8- -0x2cf);}if(!this[_0x848fa5(-0x1d7,-0x216)]())return;if(!this['show']||!defined(_0x1a8c92))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x1a8c92['context']));function _0x38729d(_0x2b5554,_0x4e4844){return _0x395db7(_0x2b5554,_0x4e4844-0x8a);}defined(this['preExecute'])&&this[_0x848fa5(-0x18f,-0x178)]();if(!_0x1a8c92[_0x848fa5(-0x16b,-0x158)]){console['warn'](_0x848fa5(-0x160,-0x196));return;}defined(this['clearCommand'])&&_0x1a8c92[_0x848fa5(-0x16b,-0x1e1)][_0x38729d(0x48b,0x487)](this['clearCommand']),defined(this['commandToExecute'])&&_0x1a8c92['commandList']['push'](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x56b2d0(0xc3,0x94)](){function _0x20fb3f(_0xbca7d9,_0x100e09){return _0x395db7(_0xbca7d9,_0x100e09-0xd4);}if(defined(this['commandToExecute'])){var _0x44cabd;(_0x44cabd=this['commandToExecute'][_0x20fb3f(0x45d,0x4dd)])===null||_0x44cabd===void 0x0||_0x44cabd['destroy'](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x3a8fc3,_0x6cb80a){function _0x149ea2(_0x48e865,_0x3c8fa0){return _0x56b2d0(_0x48e865,_0x3c8fa0-0x131);}if(!_0x3a8fc3)return _0x6cb80a;if(!_0x6cb80a)return _0x3a8fc3;const _0x336679={..._0x6cb80a},_0x5d849f=_0x336679;for(const _0x40dfbc in _0x3a8fc3){if(Object['prototype']['hasOwnProperty']['call'](_0x3a8fc3,_0x40dfbc)){const _0x377fb3=_0x3a8fc3[_0x40dfbc],_0x4e86a2=_0x6cb80a[_0x40dfbc];if(Array[_0x149ea2(0x22e,0x24d)](_0x377fb3)){_0x5d849f[_0x40dfbc]=_0x377fb3['slice']();continue;}if(_0x377fb3&&typeof _0x377fb3==='object'){_0x5d849f[_0x40dfbc]=deepMerge(_0x377fb3,_0x4e86a2||{});continue;}_0x377fb3!==undefined&&(_0x5d849f[_0x40dfbc]=_0x377fb3);}}return _0x5d849f;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];function _0x15b7(_0x18099c,_0x1f1486){const _0xe8e416=_0xe8e4();return _0x15b7=function(_0x15b77c,_0x189e36){_0x15b77c=_0x15b77c-0x129;let _0x4f2d6a=_0xe8e416[_0x15b77c];return _0x4f2d6a;},_0x15b7(_0x18099c,_0x1f1486);}class WindParticlesComputing{constructor(_0x22bbd2,_0x410019,_0x4dd24a,_0x1f7207,_0x5abd40){this[_0x15bf13(0x3d2,0x413)]=_0x22bbd2,this['options']=_0x4dd24a,this['viewerParameters']=_0x1f7207,this['windData']=_0x410019,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;function _0x2ed58f(_0x4545a4,_0x33167b){return _0x395db7(_0x33167b,_0x4545a4- -0x291);}const _0x44fc4e={};_0x44fc4e['scene']=_0x5abd40,_0x44fc4e['samplingWindow']=0x1,_0x44fc4e['quietPeriod']=0x0;function _0x15bf13(_0x310d82,_0x3b4c14){return _0x56b2d0(_0x310d82,_0x3b4c14-0x300);}this['frameRateMonitor']=new FrameRateMonitor(_0x44fc4e),this['initFrameRate'](),this['createWindTextures'](),this[_0x2ed58f(0x1b2,0x1ff)](),this[_0x2ed58f(0x1ae,0x185)]();}['initFrameRate'](){const _0x3d243b=()=>{function _0x3bad3d(_0x5ada4a,_0x2a9ebb){return _0x15b7(_0x5ada4a- -0x27d,_0x2a9ebb);}function _0x526d4b(_0x47c774,_0x36e89b){return _0x15b7(_0x47c774-0x27d,_0x36e89b);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this[_0x526d4b(0x440,0x413)]=this['frameRateMonitor']['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this[_0x3bad3d(-0xba,-0xc7)],0x1));};function _0x370697(_0x31c580,_0x5c665d){return _0x56b2d0(_0x31c580,_0x5c665d-0x330);}_0x3d243b();const _0x42f99b=setInterval(_0x3d243b,0x3e8);function _0x21cec1(_0x312438,_0x204f56){return _0x395db7(_0x204f56,_0x312438- -0x221);}const _0x1d64b6=this[_0x21cec1(0x16b,0x1d6)][_0x370697(0x461,0x3f4)](this);this['destroy']=()=>{clearInterval(_0x42f99b),_0x1d64b6();};}['createWindTextures'](){const _0x1e0568={};_0x1e0568[_0x384227(0x4ce,0x4e4)]=TextureMinificationFilter$1[_0x384227(0x50d,0x54e)],_0x1e0568[_0x384227(0x4b8,0x48b)]=TextureMagnificationFilter$1['LINEAR'];function _0x384227(_0x57eabc,_0x55c009){return _0x395db7(_0x55c009,_0x57eabc-0x137);}const _0x4eb8ab={'context':this[_0xea315f(0x237,0x2b2)],'width':this['windData']['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0xea315f(0x294,0x2ab)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0xea315f(0x25e,0x249)][_0x384227(0x599,0x5f8)]??![],'sampler':new Sampler$1(_0x1e0568)};function _0xea315f(_0x4670e5,_0x2b8f1b){return _0x395db7(_0x2b8f1b,_0x4670e5- -0x1d4);}this['windTextures']={'U':new Texture$1({..._0x4eb8ab,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x4eb8ab,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x17a329={};_0x17a329['minificationFilter']=TextureMinificationFilter$1[_0x307cf6(0x3ad,0x3f3)];function _0x307cf6(_0x4e06c7,_0x48a5a1){return _0x56b2d0(_0x48a5a1,_0x4e06c7-0x264);}_0x17a329['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];function _0x183ce8(_0x3f9d64,_0x5e7e16){return _0x56b2d0(_0x3f9d64,_0x5e7e16-0x211);}const _0x2e85e7={'context':this['context'],'width':this[_0x307cf6(0x39e,0x3bf)]['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x307cf6(0x349,0x32b)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x183ce8(0x366,0x34b)]['particlesTextureSize']*this[_0x183ce8(0x302,0x34b)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x17a329)};this[_0x307cf6(0x330,0x380)]={'previousParticlesPosition':new Texture$1(_0x2e85e7),'currentParticlesPosition':new Texture$1(_0x2e85e7),'nextParticlesPosition':new Texture$1(_0x2e85e7),'postProcessingPosition':new Texture$1(_0x2e85e7),'particlesSpeed':new Texture$1(_0x2e85e7)};}[_0x56b2d0(0xc5,0x100)](){function _0x31b6b4(_0x2048ed,_0x570a4e){return _0x395db7(_0x570a4e,_0x2048ed- -0x59b);}Object['values'](this[_0x31b6b4(-0x1d7,-0x253)])['forEach'](_0x572c68=>_0x572c68['destroy']());}[_0x56b2d0(0x1ac,0x147)](){function _0x297b4b(_0x126a4d,_0x224981){return _0x395db7(_0x126a4d,_0x224981- -0x1fc);}function _0x39ed05(_0xf5347f,_0x2c343c){return _0x56b2d0(_0x2c343c,_0xf5347f-0x11b);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x297b4b(0x1ac,0x1ac),'uniformMap':{'U':()=>this[_0x39ed05(0x1a0,0x1bc)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x297b4b(0x1e8,0x253)],this[_0x39ed05(0x1eb,0x201)]['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x39ed05(0x272,0x293)],this['windData']['v'][_0x39ed05(0x1ea,0x203)]),'speedRange':()=>new Cartesian2$1(this[_0x39ed05(0x1eb,0x188)][_0x297b4b(0x271,0x22f)]['min'],this[_0x39ed05(0x1eb,0x244)]['speed'][_0x297b4b(0x236,0x1cb)]),'currentParticlesPosition':()=>this[_0x297b4b(0x186,0x1c8)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x36cfc1(_0xb4f1c1,_0x3c8b78){return _0x297b4b(_0x3c8b78,_0xb4f1c1- -0x225);}function _0x19e29f(_0x20167d,_0x365495){return _0x39ed05(_0x20167d- -0xbf,_0x365495);}return(this['viewerParameters'][_0x19e29f(0x155,0xff)]+0x32)*this[_0x36cfc1(0x11,0x59)]['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x297b4b(0x16d,0x1cc)]['bounds']['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x39ed05(0x1e7,0x1bf)][_0x39ed05(0x27a,0x210)],'preExecute':()=>{const _0x3f6acb=this[_0x5e91dc(-0x7d,-0x11)]['previousParticlesPosition'];this['particlesTextures'][_0x4e8d58(0x62,0x8f)]=this['particlesTextures']['currentParticlesPosition'],this['particlesTextures']['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'];function _0x5e91dc(_0x75fc2c,_0xafe0f7){return _0x297b4b(_0x75fc2c,_0xafe0f7- -0x1d9);}function _0x4e8d58(_0x50d5ae,_0xd12a60){return _0x39ed05(_0xd12a60- -0x17f,_0x50d5ae);}this['particlesTextures']['postProcessingPosition']=_0x3f6acb,this[_0x4e8d58(0x5a,0x54)]['calculateSpeed'][_0x4e8d58(0xad,0x4b)]&&(this['primitives'][_0x4e8d58(0xdc,0x5f)][_0x5e91dc(-0x7,-0x2e)]['outputTexture']=this[_0x4e8d58(0x11,0x68)][_0x4e8d58(0x10b,0xfb)]);},'isDynamic':()=>this[_0x297b4b(0x269,0x236)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0x297b4b(0x1c8,0x1ac),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x297b4b(0x298,0x225)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x297b4b(0x137,0x19c)](),'outputTexture':this[_0x297b4b(0x177,0x1c8)][_0x297b4b(0x1a6,0x186)],'preExecute':()=>{function _0x379f79(_0x257045,_0x991713){return _0x39ed05(_0x257045- -0x2a9,_0x991713);}function _0xc64b06(_0x2d92db,_0x386c79){return _0x39ed05(_0x2d92db- -0x255,_0x386c79);}this['primitives']['updatePosition'][_0x379f79(-0xdf,-0xab)]&&(this['primitives']['updatePosition']['commandToExecute'][_0xc64b06(0x1b,-0x37)]=this[_0xc64b06(-0x6e,0x7)][_0xc64b06(-0xb0,-0x30)]);},'isDynamic':()=>this[_0x39ed05(0x255,0x248)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x297b4b(0x1f9,0x1c8)]['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x39ed05(0x1eb,0x216)]['bounds'][_0x39ed05(0x1cd,0x240)],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x39ed05(0x1eb,0x1d2)][_0x297b4b(0x20a,0x193)][_0x297b4b(0x1c1,0x20a)],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this[_0x297b4b(0x1b5,0x236)][_0x297b4b(0x283,0x261)],'useViewerBounds':()=>this['options'][_0x39ed05(0x210,0x225)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures'][_0x297b4b(0x264,0x1e3)],'preExecute':()=>{function _0x492194(_0x1c3aca,_0x3a45b1){return _0x39ed05(_0x1c3aca-0x10e,_0x3a45b1);}function _0x523108(_0x1fa0c9,_0x5c5cc4){return _0x297b4b(_0x1fa0c9,_0x5c5cc4- -0x1da);}this[_0x523108(-0x58,-0x26)][_0x523108(-0x10,0x9)]['commandToExecute']&&(this['primitives'][_0x523108(-0x40,0x9)]['commandToExecute'][_0x492194(0x37e,0x345)]=this['particlesTextures'][_0x492194(0x310,0x2ae)]);},'isDynamic':()=>this['options'][_0x297b4b(0x108,0x176)]})};}['reCreateWindTextures'](){this[_0x35e7a8(0x36,0x75)]['U']['destroy']();function _0x3b660d(_0x54c7e5,_0x729d04){return _0x395db7(_0x54c7e5,_0x729d04-0xbd);}this[_0x35e7a8(0x36,0x56)]['V']['destroy']();function _0x35e7a8(_0x926c33,_0x28f02b){return _0x395db7(_0x28f02b,_0x926c33- -0x347);}this[_0x3b660d(0x510,0x527)]();}[_0x395db7(0x465,0x440)](_0x2cfdd4){this[_0x476a38(0x33c,0x2d8)]=_0x2cfdd4;function _0x476a38(_0x10a3a2,_0x43408d){return _0x395db7(_0x43408d,_0x10a3a2- -0x8c);}this['reCreateWindTextures']();}['updateOptions'](_0x2f9e55){function _0x313862(_0x1e9e14,_0x1a1e1e){return _0x56b2d0(_0x1a1e1e,_0x1e9e14- -0x71);}const _0x2e19a4=_0x2f9e55['flipY']!==undefined&&_0x2f9e55['flipY']!==this['options']['flipY'];this[_0x28db23(0x52e,0x4ad)]=deepMerge(_0x2f9e55,this[_0x28db23(0x52e,0x576)]);function _0x28db23(_0xcd4dcf,_0x5bb44b){return _0x395db7(_0x5bb44b,_0xcd4dcf-0xfc);}_0x2e19a4&&this[_0x28db23(0x4a9,0x489)]();}['processWindData'](_0x385be3){const {array:_0x263c31}=_0x385be3;let {min:_0x3de6a6,max:_0x2455e6}=_0x385be3;const _0x51cbce=new Float32Array(_0x263c31[_0x5a2125(-0x12b,-0x195)]);function _0x23960b(_0x525a3d,_0x5da66f){return _0x56b2d0(_0x5da66f,_0x525a3d-0x24c);}_0x3de6a6===undefined&&(console[_0x23960b(0x37c,0x320)](_0x5a2125(-0x123,-0x15f)),_0x3de6a6=Math[_0x5a2125(-0xa2,-0x97)](..._0x263c31));function _0x5a2125(_0x44b62b,_0x202a18){return _0x56b2d0(_0x202a18,_0x44b62b- -0x1f9);}_0x2455e6===undefined&&(console[_0x23960b(0x37c,0x363)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x2455e6=Math[_0x5a2125(-0x12a,-0xe5)](..._0x263c31));const _0x5a34e6=Math[_0x5a2125(-0x12a,-0x105)](Math['abs'](_0x3de6a6),Math['abs'](_0x2455e6));for(let _0x2895ea=0x0;_0x2895ea<_0x263c31['length'];_0x2895ea++){const _0x582345=_0x263c31[_0x2895ea]/_0x5a34e6;_0x51cbce[_0x2895ea]=_0x582345;}return _0x51cbce;}[_0x56b2d0(0x93,0x94)](){function _0x173019(_0x2a69d8,_0x24e4c6){return _0x395db7(_0x2a69d8,_0x24e4c6- -0x235);}function _0x428ef0(_0x3967ae,_0x41fa62){return _0x56b2d0(_0x41fa62,_0x3967ae-0x5d);}Object[_0x173019(0x247,0x205)](this[_0x428ef0(0xe2,0x138)])[_0x173019(0x28d,0x20f)](_0xf5f662=>_0xf5f662['destroy']()),Object['values'](this['particlesTextures'])['forEach'](_0x2aaeb7=>_0x2aaeb7['destroy']()),Object[_0x173019(0x1d1,0x205)](this['primitives'])['forEach'](_0x4cb62f=>_0x4cb62f[_0x173019(0x112,0x157)]()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x233509,_0x29e739,_0x271735,_0x140ab0){this['context']=_0x233509,this[_0x569c1e(0x15,0x14)]=_0x29e739;function _0x569c1e(_0x7853eb,_0xaf06f1){return _0x395db7(_0xaf06f1,_0x7853eb- -0x41d);}this['viewerParameters']=_0x271735,this['computing']=_0x140ab0;(typeof this[_0x54ccee(0x428,0x411)][_0x569c1e(0x1a,-0x3e)]!=='number'||this['options'][_0x569c1e(0x1a,0x42)]<=0x0)&&(console[_0x569c1e(-0x15,0x43)](_0x54ccee(0x3cf,0x421)),this['options']['particlesTextureSize']=0x100);this[_0x54ccee(0x3a6,0x404)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers']();function _0x54ccee(_0xab2cb4,_0x21d4b0){return _0x395db7(_0xab2cb4,_0x21d4b0- -0x21);}this['primitives']=this[_0x569c1e(0x29,0x81)]();}['createRenderingTextures'](){const _0x4afdff={};function _0x1cb966(_0x387425,_0x250514){return _0x395db7(_0x387425,_0x250514- -0x109);}_0x4afdff['context']=this['context'],_0x4afdff[_0x1efe5f(0x35a,0x396)]=this['context'][_0x1cb966(0x336,0x355)],_0x4afdff[_0x1efe5f(0x37f,0x323)]=this['context'][_0x1cb966(0x3b7,0x34a)],_0x4afdff['pixelFormat']=PixelFormat['RGBA'];function _0x1efe5f(_0x5d31eb,_0x1943b1){return _0x395db7(_0x5d31eb,_0x1943b1- -0x58);}_0x4afdff['pixelDatatype']=PixelDatatype[_0x1cb966(0x391,0x312)];const _0x534a87=_0x4afdff,_0x20290f={};_0x20290f['context']=this['context'],_0x20290f[_0x1cb966(0x2d1,0x2e5)]=this['context']['drawingBufferWidth'],_0x20290f[_0x1efe5f(0x2f5,0x323)]=this['context']['drawingBufferHeight'],_0x20290f[_0x1cb966(0x347,0x2c6)]=PixelFormat['DEPTH_COMPONENT'],_0x20290f['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x631e0d=_0x20290f;return{'segmentsColor':new Texture(_0x534a87),'segmentsDepth':new Texture(_0x631e0d)};}['createRenderingFramebuffers'](){const _0x40e22b={};_0x40e22b[_0x14daf6(-0x137,-0x116)]=this[_0x14daf6(-0x137,-0xff)],_0x40e22b['colorTextures']=[this['textures']['segmentsColor']],_0x40e22b[_0x469bf2(0xce,0xe7)]=this['textures'][_0x469bf2(0x178,0x1bd)];function _0x469bf2(_0x5ab262,_0x4983e1){return _0x395db7(_0x4983e1,_0x5ab262- -0x2ec);}function _0x14daf6(_0x595354,_0x5a6f6b){return _0x56b2d0(_0x5a6f6b,_0x595354- -0x24a);}return{'segments':new Framebuffer(_0x40e22b)};}['destoryRenderingFramebuffers'](){function _0x37f630(_0x294868,_0x46fc82){return _0x56b2d0(_0x46fc82,_0x294868-0xa5);}Object['values'](this[_0x37f630(0x1a8,0x167)])['forEach'](_0x4f44bc=>{function _0xdbd04(_0x2aeed6,_0x55e09f){return _0x37f630(_0x55e09f-0x3f1,_0x2aeed6);}_0x4f44bc[_0xdbd04(0x537,0x52a)]();});}['createColorTableTexture'](){const _0x4ef568=new Float32Array(this['options'][_0x990ef2(0x1e6,0x229)][_0x990ef2(0x188,0x17c)](_0x40c369=>{function _0x460160(_0x1ce9e7,_0x277574){return _0x6645cd(_0x277574-0x452,_0x1ce9e7);}const _0x305d3e=Color$1['fromCssColorString'](_0x40c369);function _0x5272bd(_0x59055d,_0x18edd9){return _0x990ef2(_0x59055d- -0x14b,_0x18edd9);}return[_0x305d3e[_0x460160(0x337,0x2f5)],_0x305d3e['green'],_0x305d3e['blue'],_0x305d3e[_0x5272bd(0xc4,0xd9)]];})),_0x28de12={};function _0x6645cd(_0x35f9c3,_0x5c70ed){return _0x56b2d0(_0x5c70ed,_0x35f9c3- -0x2b1);}_0x28de12['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x28de12[_0x990ef2(0x154,0x16c)]=TextureMagnificationFilter[_0x6645cd(-0x1d3,-0x235)],_0x28de12[_0x990ef2(0x1b6,0x15e)]=TextureWrap[_0x990ef2(0x1fd,0x267)];function _0x990ef2(_0x4e6571,_0x12804d){return _0x56b2d0(_0x12804d,_0x4e6571-0xcb);}return _0x28de12['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this[_0x990ef2(0x205,0x1e6)]['colors'][_0x6645cd(-0x1e3,-0x236)],'height':0x1,'pixelFormat':PixelFormat[_0x6645cd(-0x19a,-0x16f)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x28de12),'source':{'width':this[_0x6645cd(-0x177,-0x13b)]['colors'][_0x6645cd(-0x1e3,-0x201)],'height':0x1,'arrayBufferView':_0x4ef568}});}['createSegmentsGeometry'](){const _0x20a548=0x4,_0x1df1b9=this[_0x34d81f(0x3ea,0x448)][_0x34d81f(0x3ef,0x414)];let _0x3c8394=[];for(let _0x8a7656=0x0;_0x8a7656<_0x1df1b9;_0x8a7656++){for(let _0x3254fd=0x0;_0x3254fd<_0x1df1b9;_0x3254fd++){for(let _0x8711d5=0x0;_0x8711d5<_0x20a548;_0x8711d5++){_0x3c8394['push'](_0x8a7656/_0x1df1b9),_0x3c8394['push'](_0x3254fd/_0x1df1b9);}}}_0x3c8394=new Float32Array(_0x3c8394);const _0x38bc40=this['options'][_0x2d2d87(-0x1a9,-0x184)]**0x2;let _0x12b88f=[];for(let _0x390dcb=0x0;_0x390dcb<_0x38bc40;_0x390dcb++){_0x12b88f['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x12b88f=new Float32Array(_0x12b88f);let _0x5d0f7c=[];for(let _0x263c55=0x0,_0x3c2dab=0x0;_0x263c55<_0x38bc40;_0x263c55++){_0x5d0f7c['push'](_0x3c2dab+0x0,_0x3c2dab+0x1,_0x3c2dab+0x2,_0x3c2dab+0x2,_0x3c2dab+0x1,_0x3c2dab+0x3),_0x3c2dab+=_0x20a548;}_0x5d0f7c=new Uint32Array(_0x5d0f7c);const _0x4cd984={};_0x4cd984[_0x2d2d87(-0x26b,-0x2b3)]=ComponentDatatype['FLOAT'],_0x4cd984['componentsPerAttribute']=0x2,_0x4cd984[_0x34d81f(0x3f2,0x45a)]=_0x3c8394;function _0x34d81f(_0x325942,_0x5a01f7){return _0x395db7(_0x5a01f7,_0x325942- -0x48);}const _0x369698={};_0x369698[_0x2d2d87(-0x26b,-0x258)]=ComponentDatatype['FLOAT'],_0x369698['componentsPerAttribute']=0x3,_0x369698[_0x34d81f(0x3f2,0x3c4)]=_0x12b88f;function _0x2d2d87(_0x5f4ee8,_0xdeede5){return _0x395db7(_0xdeede5,_0x5f4ee8- -0x5e0);}const _0x550b98=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x4cd984),'normal':new GeometryAttribute(_0x369698)}),'indices':_0x5d0f7c});return _0x550b98;}[_0x395db7(0x3db,0x3fa)](_0x164e4e){const _0x2d0962={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x164e4e};return Appearance['getDefaultRenderState'](!![],![],_0x2d0962);}['createPrimitives'](){const _0x39b999={};_0x39b999['st']=0x0,_0x39b999['normal']=0x1;const _0x2ce723={};_0x2ce723['enabled']=!![];const _0x2a51de={};function _0x599d15(_0x354402,_0x9f4037){return _0x395db7(_0x9f4037,_0x354402- -0x1b8);}_0x2a51de[_0x10372b(-0x3e,-0xa3)]=!![],_0x2a51de['blendEquation']=WebGLRenderingContext['FUNC_ADD'];function _0x10372b(_0x4ceeb7,_0x5d93b0){return _0x395db7(_0x4ceeb7,_0x5d93b0- -0x47f);}_0x2a51de[_0x10372b(-0xd9,-0xb5)]=WebGLRenderingContext[_0x599d15(0x271,0x295)],_0x2a51de[_0x10372b(-0x141,-0xdd)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x57fe4f={};_0x57fe4f[_0x10372b(-0x7,-0x58)]=undefined,_0x57fe4f['depthTest']=_0x2ce723,_0x57fe4f[_0x599d15(0x283,0x239)]=!![],_0x57fe4f['blending']=_0x2a51de;const _0x400634=new CustomPrimitive({'commandType':_0x599d15(0x264,0x266),'attributeLocations':_0x39b999,'geometry':this[_0x599d15(0x214,0x20d)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this[_0x599d15(0x29d,0x2ec)]['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this[_0x599d15(0x29d,0x2c7)][_0x599d15(0x20c,0x277)][_0x10372b(-0x93,-0x28)],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this[_0x10372b(-0x3e,-0x5a)],'domain':()=>{function _0xcda6c9(_0x538f5c,_0x41ff24){return _0x599d15(_0x538f5c- -0x2dd,_0x41ff24);}var _0x51edf6,_0x3a8485;function _0xfaae4a(_0x5352d1,_0x41987e){return _0x10372b(_0x41987e,_0x5352d1-0x369);}const _0x425335=new Cartesian2(((_0x51edf6=this[_0xfaae4a(0x31c,0x312)][_0xfaae4a(0x2af,0x24b)])===null||_0x51edf6===void 0x0?void 0x0:_0x51edf6[_0xcda6c9(-0x46,-0xc1)])??this[_0xcda6c9(-0x40,0x18)][_0xcda6c9(-0xcd,-0x77)][_0xfaae4a(0x315,0x311)]['min'],((_0x3a8485=this['options'][_0xfaae4a(0x2af,0x258)])===null||_0x3a8485===void 0x0?void 0x0:_0x3a8485['max'])??this['computing']['windData']['speed'][_0xcda6c9(-0xce,-0x126)]);return _0x425335;},'displayRange':()=>{var _0x390583,_0x2d72da;const _0x54be30=new Cartesian2(((_0x390583=this['options'][_0x36f99a(0x1e,-0x50)])===null||_0x390583===void 0x0?void 0x0:_0x390583[_0x11c80e(0x5e3,0x58f)])??this['computing'][_0x11c80e(0x55c,0x572)]['speed']['min'],((_0x2d72da=this[_0x36f99a(0x15,-0x17)]['displayRange'])===null||_0x2d72da===void 0x0?void 0x0:_0x2d72da['max'])??this[_0x11c80e(0x5e9,0x5af)]['windData'][_0x36f99a(0x6,-0x1e)]['max']);function _0x11c80e(_0x294df0,_0x9a36cc){return _0x10372b(_0x9a36cc,_0x294df0-0x613);}function _0x36f99a(_0x1d5298,_0x4435d2){return _0x10372b(_0x1d5298,_0x4435d2-0x36);}return _0x54be30;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this[_0x599d15(0x253,0x2c0)][_0x599d15(0x2a6,0x2d0)]/this[_0x599d15(0x253,0x2cd)]['drawingBufferHeight'],'pixelSize':()=>this[_0x599d15(0x22d,0x28b)][_0x599d15(0x239,0x1d4)],'lineWidth':()=>{const _0xbb69fa={};function _0x162809(_0x342a68,_0x2e2c26){return _0x10372b(_0x2e2c26,_0x342a68-0x18d);}_0xbb69fa[_0x299d63(0x517,0x4fe)]=0x1,_0xbb69fa['max']=0x2;function _0x299d63(_0x1d9a6b,_0xd6d769){return _0x10372b(_0xd6d769,_0x1d9a6b-0x547);}const _0x49c7e3=this['options'][_0x162809(0x130,0x116)]||_0xbb69fa;return new Cartesian2(_0x49c7e3[_0x299d63(0x517,0x4ba)],_0x49c7e3['max']);},'lineLength':()=>{const _0x10c048={};function _0x54bf22(_0x46d636,_0x844274){return _0x10372b(_0x46d636,_0x844274-0x1c0);}_0x10c048[_0x1a8d14(0x4e4,0x4ba)]=0x14,_0x10c048['max']=0x64;function _0x1a8d14(_0x4eabe3,_0x3411ce){return _0x599d15(_0x4eabe3-0x24d,_0x3411ce);}const _0x438710=this['options'][_0x1a8d14(0x434,0x3c8)]||_0x10c048;return new Cartesian2(_0x438710['min'],_0x438710['max']);},'is3D':()=>this[_0x10372b(-0x3e,-0x9a)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager[_0x599d15(0x247,0x27a)](),'rawRenderState':this[_0x10372b(-0xf0,-0x85)](_0x57fe4f)}),_0x5e33cb={};return _0x5e33cb[_0x10372b(0xf,-0x5c)]=_0x400634,_0x5e33cb;}['onParticlesTextureSizeChange'](){function _0x24812d(_0x68c433,_0x44e40d){return _0x395db7(_0x68c433,_0x44e40d- -0x325);}const _0x2b6218=this['createSegmentsGeometry']();this['primitives'][_0x5c84c4(0xc9,0x127)][_0x5c84c4(0x11b,0x137)]=_0x2b6218;const _0x365b62={};_0x365b62[_0x5c84c4(0x107,0x10f)]=this[_0x5c84c4(0x130,0x10f)];function _0x5c84c4(_0x441a1d,_0x1eaf63){return _0x56b2d0(_0x441a1d,_0x1eaf63- -0x4);}_0x365b62[_0x5c84c4(0x138,0x137)]=_0x2b6218,_0x365b62['attributeLocations']=this[_0x24812d(0x38,0x8b)]['segments'][_0x24812d(0x10a,0x8e)],_0x365b62['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x220a08=VertexArray['fromGeometry'](_0x365b62);this[_0x5c84c4(0x6a,0xb4)][_0x5c84c4(0x164,0x127)][_0x5c84c4(0x52,0xab)]&&(this[_0x24812d(0xf8,0x8b)]['segments']['commandToExecute']['vertexArray']=_0x220a08);}['onColorTableChange'](){this['colorTable']['destroy'](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x1d869a){const _0x468894=_0x1d869a['colors']&&JSON['stringify'](_0x1d869a['colors'])!==JSON[_0x230553(0x5ad,0x535)](this['options']['colors']);function _0x230553(_0x3e3b8e,_0x1b3457){return _0x395db7(_0x3e3b8e,_0x1b3457-0x116);}this[_0x1b863b(0x310,0x33f)]=deepMerge(_0x1d869a,this[_0x230553(0x529,0x548)]);function _0x1b863b(_0x37ad5c,_0x379807){return _0x56b2d0(_0x379807,_0x37ad5c-0x1d6);}_0x468894&&this[_0x230553(0x4ab,0x4ed)]();}[_0x395db7(0x3e3,0x38c)](){Object[_0x21cdb3(0x5d2,0x5ad)](this['framebuffers'])['forEach'](_0x356f08=>{_0x356f08['destroy']();});function _0x21cdb3(_0x21a6c9,_0x1d4cdb){return _0x56b2d0(_0x1d4cdb,_0x21a6c9-0x490);}Object[_0x21cdb3(0x5d2,0x5f8)](this['primitives'])[_0x2b47b8(0x15b,0x1d9)](_0x1608f7=>{_0x1608f7['destroy']();});function _0x2b47b8(_0x49177a,_0x440f2b){return _0x395db7(_0x49177a,_0x440f2b- -0x26b);}this[_0x2b47b8(0x211,0x1ba)][_0x21cdb3(0x524,0x518)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x2441d6,_0x135dd1,_0x36717b,_0xba3df9,_0x597851){this[_0x5995ea(0x4f3,0x4bc)]=_0x2441d6,this['options']=_0x36717b,this['viewerParameters']=_0xba3df9,this[_0x5995ea(0x52e,0x506)]=new WindParticlesComputing(_0x2441d6,_0x135dd1,_0x36717b,_0xba3df9,_0x597851);function _0x5995ea(_0x475f87,_0x3c8d8c){return _0x395db7(_0x475f87,_0x3c8d8c-0xb1);}function _0x452a44(_0x599cd3,_0x179275){return _0x56b2d0(_0x599cd3,_0x179275-0x3d5);}this[_0x5995ea(0x4aa,0x441)]=new WindParticlesRendering(_0x2441d6,_0x36717b,_0xba3df9,this[_0x5995ea(0x491,0x506)]),this['clearFramebuffers']();}['getPrimitives'](){function _0x2a4ea6(_0x9e2b36,_0x5b21f2){return _0x395db7(_0x9e2b36,_0x5b21f2- -0x3c4);}function _0x41fdcb(_0x2b354c,_0x32538a){return _0x395db7(_0x32538a,_0x2b354c-0x47);}const _0x38c900=[this['computing'][_0x41fdcb(0x3f7,0x3e9)]['calculateSpeed'],this['computing'][_0x2a4ea6(-0x4f,-0x14)][_0x41fdcb(0x461,0x486)],this['computing'][_0x41fdcb(0x3f7,0x3f6)][_0x2a4ea6(0x1d,0x1b)],this['rendering']['primitives']['segments']];return _0x38c900;}[_0x395db7(0x3c5,0x3f5)](){function _0xce358f(_0x1b1897,_0x426efc){return _0x395db7(_0x1b1897,_0x426efc- -0x56);}const _0x431b54=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this[_0xce358f(0x359,0x33a)]['framebuffers'])['forEach'](_0x533ca6=>{_0x431b54[_0x598364(0x3e4,0x420)]=this['rendering']['framebuffers'][_0x533ca6];function _0x280b4b(_0x3476e4,_0x4bc915){return _0xce358f(_0x4bc915,_0x3476e4- -0x305);}function _0x598364(_0x294d87,_0x5c412f){return _0xce358f(_0x5c412f,_0x294d87-0xc4);}_0x431b54[_0x598364(0x462,0x413)](this['context']);});}['changeOptions'](_0x2a4c75){let _0x3bd5b0=![];_0x2a4c75['particlesTextureSize']&&this[_0x37a589(0x278,0x27a)]['particlesTextureSize']!==_0x2a4c75[_0x37a589(0x27d,0x2a6)]&&(_0x3bd5b0=!![]);const _0x3c577a=deepMerge(_0x2a4c75,this['options']);function _0x37a589(_0x2f89d1,_0x150718){return _0x56b2d0(_0x150718,_0x2f89d1-0x13e);}if(_0x3c577a['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');function _0x136dc2(_0x2df283,_0x24c401){return _0x56b2d0(_0x2df283,_0x24c401-0x285);}this['options']=_0x3c577a,this['rendering'][_0x37a589(0x2a1,0x261)](_0x2a4c75),this['computing'][_0x37a589(0x2a1,0x2e1)](_0x2a4c75),_0x3bd5b0&&(this['computing'][_0x37a589(0x23e,0x22e)](),this[_0x136dc2(0x3a5,0x3e2)]['createParticlesTextures'](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x19da91){function _0x2d7df1(_0x54f8ec,_0x5cbbfc){return _0x395db7(_0x5cbbfc,_0x54f8ec- -0x67);}this['viewerParameters']=_0x19da91,this['computing']['viewerParameters']=_0x19da91,this[_0x2d7df1(0x329,0x316)]['viewerParameters']=_0x19da91;}[_0x395db7(0x3f1,0x38c)](){this['computing']['destroy']();function _0x4675d3(_0x5185d0,_0x1079ea){return _0x56b2d0(_0x1079ea,_0x5185d0-0xcc);}this['rendering'][_0x4675d3(0x160,0x1d7)]();}}const Cesium$1=mars3d__namespace[_0x56b2d0(0x1b2,0x171)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x2354d1={};_0x2354d1['min']=0x1,_0x2354d1['max']=0x2;const _0x2bbd2a={};_0x2bbd2a['min']=0x14;function _0x56b2d0(_0x2188eb,_0x45d68a){return _0x15b7(_0x45d68a- -0xb9,_0x2188eb);}function _0xe8e4(){const _0x391885=['bounds','rendering','getDataAtLonLat','globe','_animateFrame','isDestroy','Cartesian3','fillRect','minificationFilter','getUpdatePositionShader','4424007ebwXkb','particles','mouseHidden','particleSystem','worker','default','lineLength','clientHeight','_map','blendFuncDestination','Math','fromGeometry','pow','globalAlpha','commandToExecute','Compute','__esModule','west','mouse_move','xmin','reCreateWindTextures','9134748gNsmDJ','talt','primitives','fragmentShaderSource','visibility','attributeLocations','_speedRate','flatMap','autoClear','stroke','floor','mouseMove','depthTexture','calculateSpeed','bind','willReadFrequently','camera','_tomap','fromCache','17334612djEbWp','_addedHook','_calcUV','particlesTextures','domain','length','max','windData','modelMatrix','blendFuncSource','278ZwEDUO','createSegmentsGeometry','uniformMap','min\x20is\x20undefined,\x20calculate\x20min','pixelFormat','refreshTimer','ColorRamp','_updateIng2','WindUtil','color','pickEllipsoid','LINEAR','onColorTableChange','mouseDown','fromDegrees','register','speedRate','enabled','FLOAT','clear','postProcessingPosition','postMessage','toGridXY','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','wrapS','_randomParticle','viewerParameters','canvas','alt','wheel','getV','11247184JOYDib','previousParticlesPosition','ymax','useViewerBounds','width','rows','isDynamic','pixelSize','east','vertexArray','execute','clearFramebuffers','getUVByPoint','mouseUp','destroyParticlesTextures','displayRange','createRawRenderState','framebuffers','pointerEvents','push','age','getSegmentDrawFragmentShader','primitiveType','604ZxRhJm','frameRate','xmax','11879laCKvy','unbindEvent','south','container','error','shaderProgram','maxAge','context','abs','strokeStyle','type','RGBA','updateViewerParameters','_colorRamp','fixedHeight','colors','isArray','EllipsoidalOccluder','show','positionWC','mouse_down','OPAQUE','updatePosition','UNSIGNED_BYTE','Draw','frameTime','removeEventListener','stringify','STATIC_DRAW','currentParticlesPosition','lineWidth','segments','vertexShaderSource','colorTable','_pointerEvents','viewport','warn','SRC_ALPHA','CLAMP_TO_EDGE','speed','globalCompositeOperation','clearCommand','none','steps','changed','clientWidth','options','geometry','addEventListener','ellipsoid','canvasWidth','particlesTextureSize','preExecute','sources','values','depthMask','alpha','data','setData','createComputingPrimitives','updateWindData','NEAREST','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','createParticlesTextures','forEach','commandType','createPrimitives','array','mode','tlng','changeOptions','isInExtent','red','outputTexture','visible','min','getSpeed','cols','_updateIng','drawingBufferHeight','getUVByXY','computing','grid','particlesSpeed','_bilinearInterpolation','_onMouseMoveEvent','rawRenderState','updateOptions','commandList','dropRateBump','drawingBufferWidth','off','interpolated','requestRender','flipY','latRange','segmentsDepth','lng','LayerUtil','frameState.commandList\x20is\x20undefined','RED','Cesium','createWindTextures','hidden','4315794xRdsBq','north','removeChild','windField','_maxAge','lat','_canrefresh','redraw','ymin','dynamic','_removedHook','update','componentDatatype','framebuffer','CanvasWindField','Cartesian2','_onMapWhellEvent','processWindData','height','EventType','windTextures','toDegrees','_onMouseDownEvent','_onMouseUpEvent','magnificationFilter','nextParticlesPosition','canvasContext','lonRange','particlesNumber','CanvasWindLayer','9405jrPZDZ','setDate','scene','random','layer','destroy','style','lineTo'];_0xe8e4=function(){return _0x391885;};return _0xe8e4();}_0x2bbd2a[_0x56b2d0(0xf6,0xcf)]=0x64;const _0x3cb5a6={};function _0x395db7(_0x5a252f,_0x3db575){return _0x15b7(_0x3db575-0x23f,_0x5a252f);}_0x3cb5a6['particlesTextureSize']=0x64,_0x3cb5a6[_0x395db7(0x422,0x412)]=0x0,_0x3cb5a6['lineWidth']=_0x2354d1,_0x3cb5a6[_0x395db7(0x3d2,0x39f)]=_0x2bbd2a,_0x3cb5a6['speedFactor']=0x1,_0x3cb5a6['dropRate']=0.003,_0x3cb5a6['dropRateBump']=0.001,_0x3cb5a6['colors']=['rgb(206,255,255)'],_0x3cb5a6['flipY']=![],_0x3cb5a6['dynamic']=!![];const DEF_OPTIONS=_0x3cb5a6;class WindLayer extends BaseLayer$1{constructor(_0x2f7244={}){_0x2f7244={...DEF_OPTIONS,..._0x2f7244},super(_0x2f7244),this['_setOptionsHook'](_0x2f7244,_0x2f7244);}get['layer'](){return this['primitives'];}get['data'](){return this['options']['data'];}set['data'](_0x4d4d04){function _0x3cff25(_0x2ce307,_0x598062){return _0x395db7(_0x598062,_0x2ce307-0x9b);}this[_0x310f74(0x555,0x589)]['data']=_0x4d4d04;function _0x310f74(_0x563d3d,_0x14de93){return _0x56b2d0(_0x563d3d,_0x14de93-0x44f);}this[_0x310f74(0x529,0x595)](_0x4d4d04);}get['colors'](){function _0x5dd6df(_0x2feafb,_0x16491d){return _0x395db7(_0x2feafb,_0x16491d- -0xe7);}function _0x51751a(_0xafa800,_0xbabf5d){return _0x56b2d0(_0xbabf5d,_0xafa800-0x120);}return this[_0x51751a(0x25a,0x232)][_0x5dd6df(0x365,0x32c)];}set[_0x56b2d0(0x118,0x11b)](_0xfc310f){this['options']['colors']=_0xfc310f;const _0x38531a={};_0x38531a['colors']=_0xfc310f;function _0x34d82c(_0x5045b8,_0x15273a){return _0x395db7(_0x5045b8,_0x15273a- -0x2ce);}this['_setOptionsHook'](this[_0x34d82c(0x1d1,0x164)],_0x38531a);}['_mountedHook'](){}[_0x56b2d0(0x132,0xca)](){this['scene']=this['_map']['scene'],this['camera']=this['_map'][_0x13f3e1(-0x132,-0xed)];this['options']['data']&&this['setData'](this['options'][_0x5a57f1(0x11f,0x118)]);if(!this[_0x13f3e1(-0x14f,-0xe3)])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0x5a57f1(0x5a,0x60))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x13f3e1(-0xd2,-0x133))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x13f3e1(-0x36,-0x63)]};function _0x13f3e1(_0x53b7c0,_0x35b804){return _0x56b2d0(_0x53b7c0,_0x35b804- -0x1b3);}this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this['windData'],this['options'],this['viewerParameters'],this[_0x5a57f1(0x6b,-0x3)]),this['primitives']=this['particleSystem']['getPrimitives'](),this['primitives'][_0x13f3e1(0xc,-0x67)](_0x5c6886=>{function _0x431bf8(_0x2dd335,_0x252d6f){return _0x5a57f1(_0x252d6f-0x3a5,_0x2dd335);}this[_0x431bf8(0x3e5,0x410)]['primitives']['add'](_0x5c6886);}),this['camera']['percentageChanged']=0.01,this[_0x13f3e1(-0xfa,-0xed)][_0x13f3e1(-0x56,-0x7b)]['addEventListener'](this['updateViewerParameters'][_0x5a57f1(0x9e,0xd6)](this));function _0x5a57f1(_0x3fd81c,_0x2508a7){return _0x56b2d0(_0x2508a7,_0x3fd81c- -0x26);}this['scene']['morphComplete']['addEventListener'](this[_0x5a57f1(0xf2,0x15a)]['bind'](this)),window[_0x13f3e1(-0xae,-0x77)]('resize',this[_0x5a57f1(0xf2,0x159)]['bind'](this));}['_removedHook'](){this['camera'][_0x2d550e(-0x1ee,-0x1c5)]['removeEventListener'](this[_0x2d550e(-0x20e,-0x269)]['bind'](this));function _0x280929(_0x4e1107,_0x4f8f63){return _0x56b2d0(_0x4f8f63,_0x4e1107-0x252);}this['scene']['morphComplete']['removeEventListener'](this[_0x280929(0x36a,0x31e)][_0x2d550e(-0x262,-0x2ae)](this)),window[_0x2d550e(-0x200,-0x272)]('resize',this[_0x280929(0x36a,0x2f7)]['bind'](this));this['primitives']&&(this[_0x2d550e(-0x26e,-0x2d7)]['forEach'](_0x39ba59=>{function _0x48e353(_0x4dbc34,_0x5aa004){return _0x280929(_0x4dbc34-0x8a,_0x5aa004);}this['scene'][_0x48e353(0x394,0x37e)]['remove'](_0x39ba59);}),delete this['primitives']);function _0x2d550e(_0x3cda88,_0x4ff7e6){return _0x56b2d0(_0x4ff7e6,_0x3cda88- -0x326);}this[_0x280929(0x2f6,0x376)]&&(this['particleSystem'][_0x2d550e(-0x292,-0x2ac)](),delete this['particleSystem']);}['setData'](_0x7d3340,_0x1e6d57){this['windData']=this['processWindData'](_0x7d3340);if(_0x1e6d57){this['_removedHook'](),this[_0x1da074(0x16a,0x170)]();return;}function _0x1da074(_0x36aad5,_0x1e39c2){return _0x395db7(_0x36aad5,_0x1e39c2- -0x252);}function _0xdfa77c(_0x7e99d4,_0x335510){return _0x56b2d0(_0x335510,_0x7e99d4-0x90);}this[_0x1da074(0xdf,0x14a)]?(this[_0xdfa77c(0x134,0x194)]['computing'][_0xdfa77c(0x1d8,0x1d9)](this['windData']),this['scene']['requestRender']()):this[_0xdfa77c(0x15a,0x182)]();}['_setOptionsHook'](_0x5e94cd,_0x10d2af){function _0x38475d(_0x2ab50f,_0x267642){return _0x56b2d0(_0x267642,_0x2ab50f-0x3e7);}function _0x4d1759(_0x3f7c7e,_0x454ba3){return _0x395db7(_0x454ba3,_0x3f7c7e- -0x198);}this[_0x4d1759(0x204,0x237)]&&(this[_0x38475d(0x48b,0x432)][_0x4d1759(0x2b2,0x2bc)](_0x10d2af),this[_0x38475d(0x478,0x4b1)][_0x38475d(0x550,0x5a8)]());}[_0x395db7(0x3e5,0x37a)](_0x8a72c0){var _0x25ba96,_0x2cd7ce;const _0x329338={..._0x8a72c0},_0x21f104=_0x329338;function _0x1e75f0(_0x3812f7,_0x34cb18){return _0x56b2d0(_0x34cb18,_0x3812f7-0x75);}!_0x21f104['height']&&_0x21f104[_0x4d6960(0x4a9,0x4be)]&&(_0x21f104[_0x4d6960(0x3e1,0x44a)]=_0x21f104[_0x1e75f0(0x16c,0x13d)]);!_0x21f104[_0x4d6960(0x461,0x4bd)]&&_0x21f104['cols']&&(_0x21f104[_0x4d6960(0x4e0,0x4bd)]=_0x21f104[_0x1e75f0(0x1ce,0x168)]);function _0x4d6960(_0x13cde0,_0x3abba2){return _0x395db7(_0x13cde0,_0x3abba2-0xcf);}!_0x21f104['bounds']&&(_0x21f104[_0x1e75f0(0x10c,0xc9)]={'west':_0x21f104['xmin'],'south':_0x21f104['ymin'],'east':_0x21f104[_0x1e75f0(0x180,0x12a)],'north':_0x21f104['ymax']});if(!_0x21f104['u']){const _0x36833e={};_0x36833e['array']=_0x8a72c0['udata'],_0x36833e[_0x1e75f0(0x1cc,0x1d5)]=_0x8a72c0['umin'],_0x36833e['max']=_0x8a72c0['umax'],_0x21f104['u']=_0x36833e;}if(!_0x21f104['v']){const _0x3a8b9c={};_0x3a8b9c['array']=_0x8a72c0['vdata'],_0x3a8b9c[_0x4d6960(0x593,0x51e)]=_0x8a72c0['vmin'],_0x3a8b9c[_0x1e75f0(0x144,0x190)]=_0x8a72c0['vmax'],_0x21f104['v']=_0x3a8b9c;}if(((_0x25ba96=_0x21f104['speed'])===null||_0x25ba96===void 0x0?void 0x0:_0x25ba96['min'])===undefined||((_0x2cd7ce=_0x21f104[_0x1e75f0(0x1a8,0x166)])===null||_0x2cd7ce===void 0x0?void 0x0:_0x2cd7ce[_0x4d6960(0x4f5,0x496)])===undefined||_0x21f104['speed'][_0x1e75f0(0x1c4,0x219)]===undefined){const _0x219f31={'array':new Float32Array(_0x21f104['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x1c3632=0x0;_0x1c3632<_0x21f104['u'][_0x4d6960(0x553,0x516)]['length'];_0x1c3632++){_0x219f31[_0x4d6960(0x4f1,0x516)][_0x1c3632]=Math['sqrt'](_0x21f104['u']['array'][_0x1c3632]*_0x21f104['u']['array'][_0x1c3632]+_0x21f104['v']['array'][_0x1c3632]*_0x21f104['v']['array'][_0x1c3632]),_0x219f31[_0x1e75f0(0x1c4,0x20e)][_0x1c3632]!==0x0&&(_0x219f31['min']=Math['min'](_0x219f31[_0x4d6960(0x589,0x51e)],_0x219f31['array'][_0x1c3632]),_0x219f31['max']=Math['max'](_0x219f31['max'],_0x219f31[_0x4d6960(0x579,0x516)][_0x1c3632]));}_0x21f104['speed']=_0x219f31;}return _0x21f104;}['updateViewerParameters'](){var _0x14e813;const _0x82b9d7=this['scene'],_0x2cefe1=_0x82b9d7[_0x37f36b(0x389,0x3c3)],_0x4316e4={};_0x4316e4['x']=0x0,_0x4316e4['y']=0x0;function _0x254dcc(_0x29208d,_0x28d938){return _0x56b2d0(_0x29208d,_0x28d938- -0x81);}const _0x1a8447={};_0x1a8447['x']=0x0;function _0x37f36b(_0x46639a,_0x44eb08){return _0x395db7(_0x46639a,_0x44eb08- -0x23);}_0x1a8447['y']=_0x2cefe1[_0x37f36b(0x344,0x37d)];const _0x53a417={};_0x53a417['x']=_0x2cefe1['clientWidth'],_0x53a417['y']=0x0;const _0x3c5bc6={};_0x3c5bc6['x']=_0x2cefe1[_0x254dcc(0x58,0xb8)],_0x3c5bc6['y']=_0x2cefe1['clientHeight'];const _0x207ba7=[_0x4316e4,_0x1a8447,_0x53a417,_0x3c5bc6];let _0x10e45f=0xb4,_0x1ff9b3=-0xb4,_0x504a32=0x5a,_0x46516b=-0x5a,_0x22ecd2=![];for(const _0x417c19 of _0x207ba7){const _0x487a5a=_0x82b9d7['camera'][_0x254dcc(0x47,0x5c)](new Cesium$1['Cartesian2'](_0x417c19['x'],_0x417c19['y']),_0x82b9d7[_0x254dcc(0x5e,0x19)]['ellipsoid']);if(!_0x487a5a){_0x22ecd2=!![];break;}const _0x2409ce=_0x82b9d7[_0x37f36b(0x3b1,0x36f)][_0x37f36b(0x481,0x412)]['cartesianToCartographic'](_0x487a5a),_0x4fd3e9=Cesium$1[_0x37f36b(0x30b,0x380)][_0x254dcc(-0x65,0x5)](_0x2409ce['longitude']),_0x208476=Cesium$1['Math'][_0x254dcc(0x2f,0x5)](_0x2409ce['latitude']);_0x10e45f=Math['min'](_0x10e45f,_0x4fd3e9),_0x1ff9b3=Math[_0x37f36b(0x3c2,0x3a4)](_0x1ff9b3,_0x4fd3e9),_0x504a32=Math['min'](_0x504a32,_0x208476),_0x46516b=Math['max'](_0x46516b,_0x208476);}if(!_0x22ecd2){const _0x46d044=new Cesium$1[(_0x37f36b(0x3aa,0x355))](Math[_0x254dcc(0x71,0x4e)](this['windData'][_0x37f36b(0x39c,0x36c)]['west'],_0x10e45f),Math['min'](this['windData']['bounds']['east'],_0x1ff9b3)),_0x172e00=new Cesium$1[(_0x37f36b(0x326,0x355))](Math['max'](this[_0x37f36b(0x3ce,0x3a5)]['bounds']['south'],_0x504a32),Math['min'](this['windData']['bounds'][_0x37f36b(0x30e,0x347)],_0x46516b)),_0x3a2fc5=(_0x46d044['y']-_0x46d044['x'])*0.05,_0x40f4de=(_0x172e00['y']-_0x172e00['x'])*0.05;_0x46d044['x']=Math[_0x254dcc(0x2e,0x4e)](this[_0x37f36b(0x3e8,0x3a5)][_0x254dcc(0x4a,0x16)][_0x37f36b(0x3de,0x387)],_0x46d044['x']-_0x3a2fc5),_0x46d044['y']=Math[_0x37f36b(0x3c8,0x42c)](this['windData']['bounds']['east'],_0x46d044['y']+_0x3a2fc5),_0x172e00['x']=Math[_0x37f36b(0x335,0x3a4)](this[_0x254dcc(0x60,0x4f)][_0x254dcc(-0x38,0x16)][_0x254dcc(0xd3,0x8d)],_0x172e00['x']-_0x40f4de),_0x172e00['y']=Math[_0x37f36b(0x3e1,0x42c)](this['windData'][_0x254dcc(0x2c,0x16)][_0x37f36b(0x2f3,0x347)],_0x172e00['y']+_0x40f4de),this['viewerParameters'][_0x37f36b(0x3ce,0x361)]=_0x46d044,this['viewerParameters'][_0x37f36b(0x439,0x440)]=_0x172e00;const _0x3e7c9e=this['windData']['bounds']['east']-this['windData']['bounds'][_0x254dcc(0x2f,0x31)],_0x4e3f37=this['windData']['bounds'][_0x254dcc(-0x3a,-0xf)]-this['windData'][_0x254dcc(-0x60,0x16)]['south'],_0x5d2f7f=(_0x46d044['y']-_0x46d044['x'])/_0x3e7c9e,_0x24f269=(_0x172e00['y']-_0x172e00['x'])/_0x4e3f37,_0x17abda=Math['min'](_0x5d2f7f,_0x24f269),_0x3f2693=0x3e8*_0x17abda;_0x3f2693>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x3f2693)));}this[_0x254dcc(0xc7,0x6c)]['sceneMode']=this[_0x37f36b(0x375,0x366)]['mode'],(_0x14e813=this[_0x254dcc(0x37,0x23)])===null||_0x14e813===void 0x0||_0x14e813['applyViewerParameters'](this['viewerParameters']);}[_0x56b2d0(0x52,0x99)](_0x1d9fae,_0x4d944d){const {bounds:_0x2f084a,width:_0x226821,height:_0x401595,u:_0x22b403,v:_0x1bc7e7,speed:_0x233037}=this[_0x477bde(0x313,0x296)],{flipY:_0x42d5c5}=this[_0x477bde(0x37d,0x3f8)];if(_0x1d9fae<_0x2f084a[_0x581a8f(0x4df,0x4bb)]||_0x1d9fae>_0x2f084a[_0x477bde(0x33d,0x2dd)]||_0x4d944d<_0x2f084a['south']||_0x4d944d>_0x2f084a[_0x581a8f(0x49f,0x4d0)])return null;const _0x4d0f1a=(_0x1d9fae-_0x2f084a[_0x581a8f(0x4df,0x50a)])/(_0x2f084a['east']-_0x2f084a['west'])*(_0x226821-0x1);let _0x2736e8=(_0x4d944d-_0x2f084a[_0x581a8f(0x53b,0x55e)])/(_0x2f084a[_0x477bde(0x2b5,0x317)]-_0x2f084a['south'])*(_0x401595-0x1);_0x42d5c5&&(_0x2736e8=_0x401595-0x1-_0x2736e8);const _0x121385=Math['floor'](_0x4d0f1a),_0x13250d=Math['floor'](_0x2736e8),_0x3cc385=Math['floor'](_0x4d0f1a),_0x4fa309=Math[_0x477bde(0x39a,0x340)](_0x3cc385+0x1,_0x226821-0x1),_0x177111=Math[_0x477bde(0x303,0x361)](_0x2736e8),_0x4b5347=Math['min'](_0x177111+0x1,_0x401595-0x1),_0x21ea64=_0x4d0f1a-_0x3cc385,_0x27d5ab=_0x2736e8-_0x177111;function _0x581a8f(_0x37f8f5,_0x27b44d){return _0x56b2d0(_0x27b44d,_0x37f8f5-0x42d);}function _0x477bde(_0x49efca,_0x17e548){return _0x395db7(_0x17e548,_0x49efca- -0xb5);}const _0x511995=_0x13250d*_0x226821+_0x121385,_0x54011a=_0x177111*_0x226821+_0x3cc385,_0x500ace=_0x177111*_0x226821+_0x4fa309,_0x3bcc18=_0x4b5347*_0x226821+_0x3cc385,_0x261902=_0x4b5347*_0x226821+_0x4fa309,_0xe93a24=_0x22b403[_0x477bde(0x392,0x404)][_0x54011a],_0x4f7165=_0x22b403[_0x581a8f(0x57c,0x577)][_0x500ace],_0x58c8eb=_0x22b403[_0x581a8f(0x57c,0x4fd)][_0x3bcc18],_0x19173c=_0x22b403[_0x477bde(0x392,0x3bb)][_0x261902],_0x5f1937=(0x1-_0x21ea64)*(0x1-_0x27d5ab)*_0xe93a24+_0x21ea64*(0x1-_0x27d5ab)*_0x4f7165+(0x1-_0x21ea64)*_0x27d5ab*_0x58c8eb+_0x21ea64*_0x27d5ab*_0x19173c,_0x36ce86=_0x1bc7e7['array'][_0x54011a],_0x199d0f=_0x1bc7e7['array'][_0x500ace],_0x43b1aa=_0x1bc7e7['array'][_0x3bcc18],_0x226191=_0x1bc7e7[_0x477bde(0x392,0x34b)][_0x261902],_0x4eccad=(0x1-_0x21ea64)*(0x1-_0x27d5ab)*_0x36ce86+_0x21ea64*(0x1-_0x27d5ab)*_0x199d0f+(0x1-_0x21ea64)*_0x27d5ab*_0x43b1aa+_0x21ea64*_0x27d5ab*_0x226191,_0x3aab21=Math['sqrt'](_0x5f1937*_0x5f1937+_0x4eccad*_0x4eccad),_0x18da41={};_0x18da41['u']=_0x22b403['array'][_0x511995],_0x18da41['v']=_0x1bc7e7[_0x581a8f(0x57c,0x5a8)][_0x511995],_0x18da41['speed']=_0x233037[_0x581a8f(0x57c,0x4fe)][_0x511995];const _0x2c10a0={};_0x2c10a0['u']=_0x5f1937,_0x2c10a0['v']=_0x4eccad,_0x2c10a0['speed']=_0x3aab21;const _0x3e5686={};return _0x3e5686['original']=_0x18da41,_0x3e5686[_0x581a8f(0x595,0x5df)]=_0x2c10a0,_0x3e5686;}}mars3d__namespace[_0x395db7(0x4ad,0x466)][_0x395db7(0x35c,0x3da)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x3e1abd(_0x2cfe55,_0x2a6bdd){return _0x56b2d0(_0x2cfe55,_0x2a6bdd-0x432);}this[_0x3e1abd(0x5db,0x59f)]=null,this['lat']=null,this[_0x4ffbe2(0x1f2,0x1a1)]=null,this['tlat']=null,this['age']=null;function _0x4ffbe2(_0x2b7d09,_0x220471){return _0x56b2d0(_0x220471,_0x2b7d09-0xa1);}this['speed']=null;}[_0x56b2d0(0x7d,0x94)](){for(const _0x35b456 in this){delete this[_0x35b456];}}}class CanvasWindField{constructor(_0xf774fe){this['setOptions'](_0xf774fe);}get[_0x395db7(0x360,0x3db)](){function _0x46612a(_0x58f5a1,_0x305b44){return _0x395db7(_0x305b44,_0x58f5a1- -0x2a8);}return this[_0x46612a(0x10c,0xce)];}set[_0x56b2d0(0xbe,0xe3)](_0x15317a){function _0xc7f0ee(_0x2012ce,_0x596fae){return _0x395db7(_0x596fae,_0x2012ce- -0xfc);}this[_0x3b86bf(0x235,0x296)]=(0x64-(_0x15317a>0x63?0x63:_0x15317a))*0x64;function _0x3b86bf(_0x46590c,_0x471c93){return _0x56b2d0(_0x471c93,_0x46590c-0x179);}this['_calc_speedRate']=[(this['xmax']-this[_0x3b86bf(0x22d,0x289)])/this['_speedRate'],(this['ymax']-this[_0xc7f0ee(0x275,0x1f5)])/this['_speedRate']];}get['maxAge'](){function _0x5f033b(_0x271751,_0x3ab6e7){return _0x56b2d0(_0x271751,_0x3ab6e7-0x52);}return this[_0x5f033b(0x125,0xc7)];}set['maxAge'](_0x1a2d7c){this['_maxAge']=_0x1a2d7c;}['setOptions'](_0x312407){this['options']=_0x312407,this['maxAge']=_0x312407['maxAge']||0x78;function _0x442c2d(_0xdc085b,_0x1c1fac){return _0x395db7(_0x1c1fac,_0xdc085b- -0x513);}this[_0x442c2d(-0x138,-0xd0)]=_0x312407['speedRate']||0x32;function _0xfaa913(_0x50d4ec,_0x2edc78){return _0x395db7(_0x50d4ec,_0x2edc78- -0x559);}this['particles']=[];const _0xa7ab19=_0x312407[_0xfaa913(-0x207,-0x1d4)]||0x1000;for(let _0x48df88=0x0;_0x48df88<_0xa7ab19;_0x48df88++){const _0x4b2d11=this[_0x442c2d(-0x12f,-0xe2)](new CanvasParticle());this['particles'][_0x442c2d(-0x116,-0xb7)](_0x4b2d11);}}['setDate'](_0x1513a4){this['rows']=_0x1513a4[_0x108a5f(0x221,0x23c)],this['cols']=_0x1513a4['cols'];function _0xd8aaac(_0x2116d2,_0x39d7e8){return _0x395db7(_0x2116d2,_0x39d7e8- -0x3db);}function _0x108a5f(_0xf7080e,_0x1d0fec){return _0x395db7(_0xf7080e,_0x1d0fec- -0x1b3);}this['xmin']=_0x1513a4['xmin'],this['xmax']=_0x1513a4['xmax'],this['ymin']=_0x1513a4['ymin'],this['ymax']=_0x1513a4[_0x108a5f(0x256,0x239)],this['grid']=[];const _0xd28b42=_0x1513a4['udata'],_0x53f1a5=_0x1513a4['vdata'];let _0x1f46ab=![];_0xd28b42[_0xd8aaac(0x60,-0x15)]===this['rows']&&_0xd28b42[0x0][_0xd8aaac(0x1c,-0x15)]===this['cols']&&(_0x1f46ab=!![]);let _0x15de0d=0x0,_0x524403=null,_0x481947=null;for(let _0x296043=0x0;_0x296043<this['rows'];_0x296043++){_0x524403=[];for(let _0x2473d3=0x0;_0x2473d3<this['cols'];_0x2473d3++,_0x15de0d++){_0x1f46ab?_0x481947=this[_0x108a5f(0x248,0x210)](_0xd28b42[_0x296043][_0x2473d3],_0x53f1a5[_0x296043][_0x2473d3]):_0x481947=this[_0xd8aaac(-0x32,-0x18)](_0xd28b42[_0x15de0d],_0x53f1a5[_0x15de0d]),_0x524403[_0xd8aaac(-0x49,0x22)](_0x481947);}this['grid'][_0xd8aaac(0x51,0x22)](_0x524403);}!this['options'][_0x108a5f(0x31b,0x2af)]&&this[_0xd8aaac(-0x1,0x7b)]['reverse']();}[_0x56b2d0(0x13c,0xe6)](){delete this['rows'];function _0x423b5f(_0x12da66,_0xaeeb86){return _0x395db7(_0xaeeb86,_0x12da66- -0x3b9);}delete this['cols'],delete this['xmin'];function _0x4e5f8e(_0x486b33,_0x2b3f2e){return _0x395db7(_0x2b3f2e,_0x486b33- -0x484);}delete this['xmax'],delete this[_0x4e5f8e(-0x113,-0x125)],delete this[_0x4e5f8e(-0x98,-0x4e)],delete this['grid'],delete this[_0x423b5f(-0x1f,-0x3e)];}[_0x395db7(0x454,0x3e1)](_0x2e87d0,_0x3f3ed1){function _0x421f59(_0x3eb634,_0x3e66bc){return _0x395db7(_0x3e66bc,_0x3eb634- -0x274);}const _0x449315=(_0x2e87d0-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x421f59(0x1dd,0x252)]-0x1),_0x1a513c=(this['ymax']-_0x3f3ed1)/(this[_0x421f59(0x178,0x155)]-this['ymin'])*(this['rows']-0x1);function _0x22249f(_0x186f02,_0x12bce2){return _0x395db7(_0x186f02,_0x12bce2- -0x34f);}return[_0x449315,_0x1a513c];}[_0x56b2d0(0x180,0x15c)](_0x5e7a5e,_0x50b367){if(_0x5e7a5e<0x0||_0x5e7a5e>=this['cols']||_0x50b367>=this['rows'])return[0x0,0x0,0x0];const _0x3508e3=Math['floor'](_0x5e7a5e);function _0x1fb2e5(_0x52941c,_0x54bcf3){return _0x56b2d0(_0x54bcf3,_0x52941c-0x8e);}const _0x4f2a00=Math[_0x1fb2e5(0x14e,0xe2)](_0x50b367);if(_0x3508e3===_0x5e7a5e&&_0x4f2a00===_0x50b367)return this[_0x1fb2e5(0x1ec,0x1b0)][_0x50b367][_0x5e7a5e];const _0x233b27=_0x3508e3+0x1,_0x1395de=_0x4f2a00+0x1;function _0x4c6b25(_0x23b234,_0x17735e){return _0x395db7(_0x17735e,_0x23b234- -0x461);}const _0x286b81=this[_0x4c6b25(-0xd,-0x6c)](_0x3508e3,_0x4f2a00),_0x56a03b=this['getUVByXY'](_0x233b27,_0x4f2a00),_0x3347e7=this[_0x4c6b25(-0xd,-0xf)](_0x3508e3,_0x1395de),_0x88f2cd=this['getUVByXY'](_0x233b27,_0x1395de);let _0xb6f530=null;try{_0xb6f530=this[_0x1fb2e5(0x1ee,0x1ff)](_0x5e7a5e-_0x3508e3,_0x50b367-_0x4f2a00,_0x286b81,_0x56a03b,_0x3347e7,_0x88f2cd);}catch(_0x409f87){console['log'](_0x5e7a5e,_0x50b367);}return _0xb6f530;}['_bilinearInterpolation'](_0x46cbfd,_0x56e9b9,_0x25c096,_0x5f20b2,_0x3f848d,_0x91feee){const _0x4fbd7d=0x1-_0x46cbfd,_0x6197ec=0x1-_0x56e9b9,_0x2500d0=_0x4fbd7d*_0x6197ec,_0x2942d9=_0x46cbfd*_0x6197ec,_0x5d8833=_0x4fbd7d*_0x56e9b9;function _0x11fc1f(_0x5034b3,_0x57a9f6){return _0x395db7(_0x57a9f6,_0x5034b3- -0x539);}const _0x4efb52=_0x46cbfd*_0x56e9b9,_0x1a2b76=_0x25c096[0x0]*_0x2500d0+_0x5f20b2[0x0]*_0x2942d9+_0x3f848d[0x0]*_0x5d8833+_0x91feee[0x0]*_0x4efb52,_0x34a8f9=_0x25c096[0x1]*_0x2500d0+_0x5f20b2[0x1]*_0x2942d9+_0x3f848d[0x1]*_0x5d8833+_0x91feee[0x1]*_0x4efb52;return this[_0x11fc1f(-0x176,-0x1ea)](_0x1a2b76,_0x34a8f9);}[_0x56b2d0(0xa4,0xcb)](_0x2ec479,_0x39f370){return[+_0x2ec479,+_0x39f370,Math['sqrt'](_0x2ec479*_0x2ec479+_0x39f370*_0x39f370)];}[_0x56b2d0(0x115,0xfe)](_0x41a014,_0x2b13fa){if(!this[_0x2b7a0f(0x1ad,0x137)](_0x41a014,_0x2b13fa))return null;function _0x5c4127(_0xe52a9a,_0x48c4b7){return _0x395db7(_0xe52a9a,_0x48c4b7- -0x7d);}const _0x31a4c4=this['toGridXY'](_0x41a014,_0x2b13fa),_0x38d612=this[_0x2b7a0f(0x13f,0x140)](_0x31a4c4[0x0],_0x31a4c4[0x1]);function _0x2b7a0f(_0x43f7fb,_0x4fc4de){return _0x395db7(_0x43f7fb,_0x4fc4de- -0x314);}return _0x38d612;}[_0x56b2d0(0x1ac,0x153)](_0x1936bf,_0x4d9a20){function _0x343b1f(_0x4a3db7,_0x35b124){return _0x395db7(_0x35b124,_0x4a3db7- -0x2d0);}function _0x1b55b3(_0x1a2673,_0xd7f315){return _0x56b2d0(_0xd7f315,_0x1a2673- -0x28a);}return _0x1936bf>=this[_0x343b1f(0xdc,0x98)]&&_0x1936bf<=this['xmax']&&_0x4d9a20>=this[_0x343b1f(0xa1,0x62)]&&_0x4d9a20<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x8cd11a=fRandomByfloat(this['xmin'],this['xmax']),_0xbb30a=fRandomByfloat(this['ymin'],this['ymax']),_0x11833b={};_0x11833b[_0x4a413f(0x23e,0x248)]=_0xbb30a;function _0x4a413f(_0x46121a,_0x301f6e){return _0x56b2d0(_0x301f6e,_0x46121a-0x1c8);}return _0x11833b['lng']=_0x8cd11a,_0x11833b;}['getParticles'](){let _0x16a4db,_0x1c27c7,_0x44c4d7;function _0x15080d(_0x26d18f,_0x167a69){return _0x56b2d0(_0x26d18f,_0x167a69-0x2a8);}function _0x2bec7d(_0x476951,_0x4a31a7){return _0x395db7(_0x4a31a7,_0x476951- -0x24e);}for(let _0x31b9df=0x0,_0x520903=this['particles']['length'];_0x31b9df<_0x520903;_0x31b9df++){let _0x313d3b=this['particles'][_0x31b9df];_0x313d3b[_0x15080d(0x3ea,0x3ae)]<=0x0&&(_0x313d3b=this[_0x15080d(0x38e,0x394)](_0x313d3b));if(_0x313d3b[_0x15080d(0x413,0x3ae)]>0x0){const _0x3abbde=_0x313d3b['tlng'],_0x55af2e=_0x313d3b['tlat'];_0x44c4d7=this['getUVByPoint'](_0x3abbde,_0x55af2e),_0x44c4d7?(_0x16a4db=_0x3abbde+this['_calc_speedRate'][0x0]*_0x44c4d7[0x0],_0x1c27c7=_0x55af2e+this['_calc_speedRate'][0x1]*_0x44c4d7[0x1],_0x313d3b['lng']=_0x3abbde,_0x313d3b[_0x15080d(0x2c1,0x31e)]=_0x55af2e,_0x313d3b['tlng']=_0x16a4db,_0x313d3b['tlat']=_0x1c27c7,_0x313d3b['speed']=_0x44c4d7[0x2],_0x313d3b['age']--):_0x313d3b[_0x2bec7d(0x1b0,0x203)]=0x0;}}return this[_0x2bec7d(0x14c,0x12d)];}['_randomParticle'](_0x49a0de){let _0x3b8e11,_0x228d8d;for(let _0x5be11c=0x0;_0x5be11c<0x1e;_0x5be11c++){_0x3b8e11=this['getRandomLatLng'](),_0x228d8d=this['getUVByPoint'](_0x3b8e11[_0x314a3f(0x58d,0x529)],_0x3b8e11['lat']);if(_0x228d8d&&_0x228d8d[0x2]>0x0)break;}if(!_0x228d8d)return _0x49a0de;const _0x5e3b9b=_0x3b8e11['lng']+this['_calc_speedRate'][0x0]*_0x228d8d[0x0],_0x56e368=_0x3b8e11['lat']+this['_calc_speedRate'][0x1]*_0x228d8d[0x1];_0x49a0de['lng']=_0x3b8e11['lng'];function _0x314a3f(_0x46093e,_0x28bbc1){return _0x56b2d0(_0x46093e,_0x28bbc1-0x3bc);}_0x49a0de[_0x314a3f(0x43b,0x432)]=_0x3b8e11['lat'],_0x49a0de['tlng']=_0x5e3b9b,_0x49a0de['tlat']=_0x56e368,_0x49a0de[_0x267057(0x337,0x37c)]=Math['round'](0xa+Math[_0x267057(0x2c3,0x24d)]()*this[_0x267057(0x343,0x390)]);function _0x267057(_0x3e9c72,_0x30063e){return _0x56b2d0(_0x30063e,_0x3e9c72-0x231);}return _0x49a0de[_0x314a3f(0x504,0x4ef)]=_0x228d8d[0x2],_0x49a0de;}['destroy'](){for(const _0x1a045e in this){delete this[_0x1a045e];}}}function fRandomByfloat(_0x563bda,_0x112904){return _0x563bda+Math['random']()*(_0x112904-_0x563bda);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x395db7(0x3b2,0x38b)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0xde3743={}){super(_0xde3743),this['_setOptionsHook'](_0xde3743);function _0x1e4ff3(_0x4fbadd,_0x29ccf8){return _0x56b2d0(_0x29ccf8,_0x4fbadd- -0x248);}function _0x26ab40(_0x4e000d,_0x36b0a1){return _0x395db7(_0x36b0a1,_0x4e000d- -0x586);}this[_0x26ab40(-0x1a0,-0x11f)]=null,_0xde3743['colors']&&_0xde3743[_0x1e4ff3(-0x111,-0xc8)]&&(this[_0x1e4ff3(-0x12f,-0x123)]=new mars3d__namespace[(_0x26ab40(-0x1b5,-0x1f3))](_0xde3743));}['_setOptionsHook'](_0x540d28,_0x3b8e1e){this[_0xd4126(0x345,0x373)]=0x3e8/(_0x540d28[_0xd4126(0x331,0x358)]||0xa),this[_0xd4126(0x3b9,0x37c)]=this[_0xd4126(0x3f4,0x388)][_0xd4126(0x396,0x352)]??![],this[_0x1e4da0(0xef,0x84)]=_0x540d28['color']||'#ffffff',this[_0xd4126(0x366,0x378)]=_0x540d28[_0xd4126(0x349,0x378)]||0x1;function _0x1e4da0(_0x2fbbd6,_0x2fc4f1){return _0x395db7(_0x2fbbd6,_0x2fc4f1- -0x350);}function _0xd4126(_0x39ab58,_0x50bd64){return _0x56b2d0(_0x39ab58,_0x50bd64-0x24e);}this[_0x1e4da0(0x7a,0xc2)]=_0x540d28['fixedHeight']??0x0,this[_0x1e4da0(0x92,0x112)]=_0x540d28[_0xd4126(0x370,0x3b8)]??![],this[_0xd4126(0x2ec,0x2c2)]&&this[_0x1e4da0(-0x5b,0x1c)]['setOptions'](_0x540d28);}get['layer'](){function _0x52e7e1(_0x4afe50,_0x83c906){return _0x56b2d0(_0x83c906,_0x4afe50- -0x2cd);}return this[_0x52e7e1(-0x1df,-0x1bf)];}get[_0x56b2d0(0x14b,0x13e)](){function _0x4211dd(_0x389913,_0x3a3ad9){return _0x395db7(_0x3a3ad9,_0x389913- -0x585);}function _0x16b6d2(_0x4330da,_0x48f89e){return _0x56b2d0(_0x48f89e,_0x4330da-0x153);}return this[_0x16b6d2(0x1fc,0x242)][_0x16b6d2(0x1e4,0x166)]['canvas']['clientWidth'];}get['canvasHeight'](){function _0x44a25b(_0x5c485e,_0x45def3){return _0x56b2d0(_0x45def3,_0x5c485e- -0x188);}return this['_map'][_0x44a25b(-0xf7,-0x16f)]['canvas']['clientHeight'];}get[_0x56b2d0(0xf3,0x104)](){return this['_pointerEvents'];}set['pointerEvents'](_0x14d60b){function _0x4d1c66(_0x22357c,_0x26f136){return _0x56b2d0(_0x26f136,_0x22357c-0x266);}function _0x3545b2(_0x2077dd,_0x4e2e28){return _0x56b2d0(_0x4e2e28,_0x2077dd- -0x2c3);}this[_0x4d1c66(0x394,0x36d)]=_0x14d60b;if(!this['canvas'])return;_0x14d60b?this['canvas']['style']['pointer-events']='all':this[_0x3545b2(-0x1d5,-0x1a2)][_0x3545b2(-0x22e,-0x1f3)]['pointer-events']=_0x3545b2(-0x18d,-0x11f);}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x77ee39){this[_0x5ff741(0x261,0x225)][_0x57683f(0x189,0x128)]=_0x77ee39;function _0x57683f(_0x27c4a6,_0x3c1a62){return _0x395db7(_0x27c4a6,_0x3c1a62- -0x25d);}function _0x5ff741(_0x38497c,_0x5078b8){return _0x56b2d0(_0x5078b8,_0x38497c-0x127);}clearTimeout(this[_0x5ff741(0x19e,0x19a)]),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set[_0x395db7(0x3ff,0x3db)](_0xfe3bf3){this['options']['speedRate']=_0xfe3bf3;function _0x3c0b42(_0x5aac0f,_0x3032b9){return _0x56b2d0(_0x3032b9,_0x5aac0f-0xe6);}function _0x318c8a(_0x2d29b5,_0x1cb088){return _0x395db7(_0x1cb088,_0x2d29b5- -0x100);}this[_0x318c8a(0x26c,0x222)]&&(this[_0x3c0b42(0x15a,0x109)][_0x3c0b42(0x1c9,0x19d)]=_0xfe3bf3);}get['maxAge'](){function _0x5efdfd(_0x57086a,_0x5d2bc4){return _0x395db7(_0x5d2bc4,_0x57086a- -0x2e6);}return this[_0x5efdfd(0x14c,0xd5)]['maxAge'];}set['maxAge'](_0x565179){function _0x5c31f2(_0x2ccc6,_0x5287d7){return _0x395db7(_0x5287d7,_0x2ccc6- -0x27f);}this[_0x1667ce(-0x241,-0x1d5)][_0x1667ce(-0x1c4,-0x1fd)]=_0x565179;function _0x1667ce(_0x30ffc9,_0x1eabdb){return _0x56b2d0(_0x30ffc9,_0x1eabdb- -0x30f);}this['windField']&&(this[_0x5c31f2(0xed,0xaa)]['maxAge']=_0x565179);}get[_0x56b2d0(0x198,0x145)](){function _0x5da54d(_0x6d532e,_0x4984d0){return _0x395db7(_0x4984d0,_0x6d532e- -0x4eb);}return this[_0x5da54d(-0x123,-0x15a)];}set[_0x395db7(0x3e0,0x43d)](_0x20a5c5){this['setData'](_0x20a5c5);}get['rectangle'](){function _0x2cab52(_0x3eeb56,_0x17bbf7){return _0x56b2d0(_0x3eeb56,_0x17bbf7- -0x106);}function _0x58f035(_0x5be69d,_0x3f578c){return _0x56b2d0(_0x5be69d,_0x3f578c-0x20d);}let _0xf82f50=this[_0x58f035(0x296,0x2dd)][_0x2cab52(-0x2e,-0x52)],_0x10d0c6=this[_0x58f035(0x300,0x2dd)][_0x2cab52(-0x3f,0x5)],_0x562b7d=this[_0x58f035(0x339,0x2dd)]['ymin'],_0x3e3189=this['windData'][_0x2cab52(0x42,-0x12)];return _0x10d0c6>=0x167&&_0xf82f50===0x0&&(_0xf82f50=-0xb4,_0x10d0c6=0xb4),_0xf82f50=Math['max'](_0xf82f50,-0xb4),_0x10d0c6=Math['min'](_0x10d0c6,0xb4),_0x562b7d=Math['max'](_0x562b7d,-0x5a),_0x3e3189=Math['min'](_0x3e3189,0x5a),Cesium['Rectangle']['fromDegrees'](_0xf82f50,_0x562b7d,_0x10d0c6,_0x3e3189);}['_showHook'](_0x4fb008){function _0x502806(_0x327bd1,_0x3f16ab){return _0x395db7(_0x3f16ab,_0x327bd1- -0x26a);}function _0x5325e6(_0x39752e,_0x4814da){return _0x395db7(_0x39752e,_0x4814da- -0x22d);}_0x4fb008?this['_addedHook']():(this['windData']&&(this[_0x5325e6(0x26a,0x205)]['data']=this[_0x502806(0x15e,0x175)]),this[_0x502806(0x109,0xae)]());}['_mountedHook'](){function _0x25a214(_0x4e55ea,_0x56cb69){return _0x56b2d0(_0x4e55ea,_0x56cb69- -0x2de);}function _0x1a6863(_0x4e8f40,_0x1f78cc){return _0x395db7(_0x4e8f40,_0x1f78cc- -0x4ab);}this['options'][_0x25a214(-0x2b5,-0x239)]?this['initWorker']():this['windField']=new CanvasWindField(this[_0x25a214(-0x180,-0x1a4)]);}[_0x56b2d0(0x116,0xca)](){function _0x243697(_0x4875f4,_0x1c5d32){return _0x56b2d0(_0x1c5d32,_0x4875f4-0x3d5);}this['canvas']=this['_createCanvas']();const _0x31cade={};_0x31cade[_0x55416a(0x265,0x296)]=!![],this[_0x243697(0x460,0x3eb)]=this['canvas']['getContext']('2d',_0x31cade);function _0x55416a(_0x515371,_0x30fa66){return _0x56b2d0(_0x30fa66,_0x515371-0x1a0);}this['bindEvent'](),this['options'][_0x55416a(0x2e5,0x2af)]&&this[_0x55416a(0x2e6,0x29c)](this['options'][_0x55416a(0x2e5,0x2f0)]);}['_removedHook'](){this['clear']();function _0x4b9dde(_0x4624e5,_0x56dc33){return _0x56b2d0(_0x4624e5,_0x56dc33- -0xce);}this[_0x4b9dde(-0x20,0x3f)]();function _0x5f0feb(_0x47b27f,_0x1bf2c2){return _0x395db7(_0x1bf2c2,_0x47b27f-0x130);}this[_0x5f0feb(0x516,0x4b7)]&&(this['_map']['container'][_0x4b9dde(0x1f,-0x5b)](this[_0x4b9dde(0xe,0x20)]),delete this['canvas']);}['_createCanvas'](){const _0x27a94d=mars3d__namespace['DomUtil']['create'](_0x1fe957(0x1d5,0x1fe),'mars3d-canvasWind',this[_0x3c293d(-0x124,-0x16d)][_0x3c293d(-0x177,-0x107)]);_0x27a94d['style']['position']='absolute';function _0x1fe957(_0x44fce1,_0x3db78a){return _0x395db7(_0x44fce1,_0x3db78a- -0x1e8);}_0x27a94d[_0x3c293d(-0x1f4,-0x181)]['top']='0px',_0x27a94d[_0x3c293d(-0x124,-0x181)]['left']='0px',_0x27a94d['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x27a94d['style']['height']=this[_0x1fe957(0x1b5,0x1b9)]['scene']['canvas']['clientHeight']+'px',_0x27a94d['style'][_0x3c293d(-0x180,-0x112)]=this['_pointerEvents']?'auto':_0x3c293d(-0x84,-0xe0),_0x27a94d[_0x1fe957(0x1ba,0x1a5)]['zIndex']=this['options']['zIndex']??0x9;function _0x3c293d(_0x463fe6,_0x31389d){return _0x56b2d0(_0x463fe6,_0x31389d- -0x216);}return _0x27a94d['width']=this[_0x3c293d(-0x1a2,-0x16d)]['scene']['canvas']['clientWidth'],_0x27a94d[_0x1fe957(0x153,0x193)]=this['_map'][_0x3c293d(-0x124,-0x185)]['canvas']['clientHeight'],_0x27a94d;}['resize'](){function _0x32897d(_0x1f4f85,_0x506434){return _0x395db7(_0x1f4f85,_0x506434-0x135);}function _0x5cecd2(_0xa866f,_0x45b6c4){return _0x56b2d0(_0xa866f,_0x45b6c4- -0x1d);}this['canvas']&&(this['canvas']['style'][_0x32897d(0x4bc,0x523)]=this[_0x32897d(0x4f4,0x4d6)][_0x32897d(0x50a,0x4be)][_0x32897d(0x554,0x51b)][_0x32897d(0x5de,0x566)]+'px',this['canvas'][_0x5cecd2(-0x8,0x78)][_0x5cecd2(0x26,0x66)]=this[_0x5cecd2(0x46,0x8c)]['scene']['canvas']['clientHeight']+'px',this['canvas']['width']=this['_map']['scene']['canvas']['clientWidth'],this['canvas'][_0x5cecd2(0x3f,0x66)]=this['_map']['scene']['canvas'][_0x5cecd2(0x85,0x8b)]);}['bindEvent'](){function _0x1c3cb4(_0x39795a,_0x4b9f68){return _0x56b2d0(_0x39795a,_0x4b9f68-0x474);}const _0x4d25ee=this;function _0x5418b5(_0x18ecef,_0xffea55){return _0x56b2d0(_0x18ecef,_0xffea55- -0x23c);}let _0x302a6a=Date['now']();(function _0x1d04e5(){if(_0x4d25ee[_0x33f408(0x7b,0xc0)])return;function _0x3dcf84(_0x49e6b5,_0x97809a){return _0x15b7(_0x97809a- -0x1b9,_0x49e6b5);}function _0x33f408(_0x195d87,_0x4b42ea){return _0x15b7(_0x195d87- -0xda,_0x4b42ea);}_0x4d25ee['_animateFrame']=window['requestAnimationFrame'](_0x1d04e5);if(_0x4d25ee[_0x3dcf84(0x66,0x1e)]&&_0x4d25ee['windField']){const _0x37133b=Date['now'](),_0x59108d=_0x37133b-_0x302a6a;_0x59108d>_0x4d25ee[_0x33f408(0x104,0x11c)]&&(_0x302a6a=_0x37133b-_0x59108d%_0x4d25ee[_0x33f408(0x104,0xf7)],_0x4d25ee[_0x33f408(0x5b,-0x4)]());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this['mouse_down']=![],this[_0x5418b5(-0x146,-0x189)]=![],this[_0x5418b5(-0x11b,-0x102)][_0x1c3cb4(0x55f,0x517)]&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this[_0x1c3cb4(0x4f3,0x4f5)],this),this[_0x5418b5(-0x214,-0x193)]['on'](mars3d__namespace[_0x1c3cb4(0x50d,0x4f8)]['mouseDown'],this[_0x5418b5(-0x236,-0x1b5)],this),this['_map']['on'](mars3d__namespace[_0x1c3cb4(0x4e2,0x4f8)][_0x5418b5(-0x109,-0x13d)],this[_0x5418b5(-0x134,-0x1b4)],this)));}['unbindEvent'](){window['cancelAnimationFrame'](this[_0x4bb663(-0xb6,-0x85)]);function _0xc4510f(_0x41493f,_0xf2a878){return _0x56b2d0(_0xf2a878,_0x41493f-0xb7);}delete this[_0xc4510f(0x152,0xe8)];function _0x4bb663(_0x52dc2c,_0x401f29){return _0x56b2d0(_0x52dc2c,_0x401f29- -0x120);}window[_0xc4510f(0x1dd,0x215)]('resize',this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType'][_0xc4510f(0x1a7,0x1ab)],this['_onMapWhellEvent'],this),this['_map'][_0x4bb663(0x25,0x47)](mars3d__namespace['EventType'][_0x4bb663(-0x2f,-0x40)],this[_0x4bb663(-0xe1,-0x99)],this),this[_0xc4510f(0x160,0xfe)][_0x4bb663(0x3d,0x47)](mars3d__namespace[_0x4bb663(-0x3d,-0x9c)][_0x4bb663(-0x3d,-0x21)],this['_onMouseUpEvent'],this),this[_0x4bb663(-0x8c,-0x77)][_0x4bb663(0xae,0x47)](mars3d__namespace[_0x4bb663(-0x79,-0x9c)]['mouseMove'],this[_0x4bb663(0x6d,0x41)],this));}[_0x395db7(0x3a9,0x379)](_0x2e1d34){clearTimeout(this['refreshTimer']);if(!this['show']||!this[_0xc94091(-0xe8,-0xcf)])return;function _0xc94091(_0xed2d4c,_0x578bd7){return _0x56b2d0(_0xed2d4c,_0x578bd7- -0x1bd);}function _0x22d0d7(_0x14f7d6,_0x2520d4){return _0x56b2d0(_0x2520d4,_0x14f7d6-0x48d);}this[_0x22d0d7(0x57b,0x548)][_0xc94091(-0xe9,-0x128)][_0xc94091(-0xe1,-0x103)]=_0xc94091(-0xe6,-0x14d),this[_0x22d0d7(0x565,0x5da)]=setTimeout(()=>{function _0x24485c(_0x549733,_0x2835a6){return _0xc94091(_0x2835a6,_0x549733-0x2de);}if(!this[_0x631f66(0x66,0x3b)])return;function _0x631f66(_0x21084c,_0x4421c4){return _0x22d0d7(_0x4421c4- -0x570,_0x21084c);}this['redraw'](),this[_0x24485c(0x20f,0x272)][_0x24485c(0x1b6,0x172)]['visibility']='visible';},0xc8);}[_0x395db7(0x34a,0x37f)](_0xc3bb33){this['mouse_down']=!![],this['_map']['off'](mars3d__namespace['EventType'][_0x1748d0(0x232,0x1f8)],this[_0x1748d0(0x292,0x298)],this);function _0x1748d0(_0x20083a,_0x3529e2){return _0x395db7(_0x20083a,_0x3529e2- -0x1c1);}function _0x324d59(_0x441900,_0x3e4ca1){return _0x56b2d0(_0x441900,_0x3e4ca1- -0x315);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x324d59(-0x233,-0x1b4)],this);}[_0x395db7(0x3dc,0x459)](_0xf048e4){function _0x7466de(_0x34b75b,_0x52db21){return _0x395db7(_0x52db21,_0x34b75b- -0x21f);}if(!this['show']||!this['canvas'])return;function _0x3f35e9(_0x150778,_0x59b5e2){return _0x395db7(_0x59b5e2,_0x150778- -0x5a);}this['mouse_down']&&(this['canvas']['style'][_0x7466de(0x193,0x1e5)]=_0x7466de(0x149,0x136),this['mouse_move']=!![]);}[_0x395db7(0x357,0x380)](_0x2f0ef9){function _0x1cdd1e(_0x382493,_0x48cf47){return _0x56b2d0(_0x48cf47,_0x382493-0x1a1);}if(!this['show']||!this['canvas'])return;function _0x37d688(_0x4b956f,_0x515318){return _0x395db7(_0x515318,_0x4b956f- -0x5bf);}this[_0x1cdd1e(0x24a,0x23c)][_0x37d688(-0x160,-0x1c8)](mars3d__namespace[_0x37d688(-0x243,-0x2c2)][_0x37d688(-0x206,-0x19e)],this['_onMouseMoveEvent'],this),this['mouse_down']&&this['mouse_move']&&this['redraw'](),this['canvas']['style'][_0x37d688(-0x20d,-0x28b)]=_0x37d688(-0x171,-0x1cb),this[_0x1cdd1e(0x2c1,0x2dd)]=![],this['mouse_move']=![];}[_0x395db7(0x489,0x43e)](_0x27ab34){this['clear']();function _0x16a8a7(_0xe770d5,_0x593e77){return _0x56b2d0(_0xe770d5,_0x593e77- -0x7e);}this['windData']=_0x27ab34;function _0x306085(_0x15f732,_0x2e40e7){return _0x56b2d0(_0x15f732,_0x2e40e7- -0x2f8);}this['windField'][_0x306085(-0x1f3,-0x268)](_0x27ab34),this[_0x16a8a7(-0x2d,-0x6)]();}['redraw'](){if(!this['show'])return;function _0x265285(_0x6dc8a4,_0x4cf74d){return _0x395db7(_0x4cf74d,_0x6dc8a4- -0x54e);}this[_0x27e41e(0x73,0x30)]['setOptions'](this['options']);function _0x27e41e(_0x3e6a67,_0x545f47){return _0x395db7(_0x3e6a67,_0x545f47- -0x33c);}this[_0x265285(-0x1da,-0x17a)]();}['update'](){if(this[_0x1f5088(0x2,-0x5)])return;function _0x36ff81(_0x2d507c,_0x331d57){return _0x56b2d0(_0x331d57,_0x2d507c-0x12d);}function _0x1f5088(_0x2b3fef,_0x141023){return _0x395db7(_0x2b3fef,_0x141023- -0x457);}this[_0x36ff81(0x287,0x272)]=!![];if(this[_0x36ff81(0x1d2,0x18a)])this['windField']['update']();else{const _0x15fa38=this[_0x36ff81(0x1a1,0x1ec)]['getParticles']();this['_drawLines'](_0x15fa38);}this[_0x1f5088(-0x12,-0x5)]=![];}['_drawLines'](_0x16fd12){this['_canvasParticles']=_0x16fd12;function _0x414da(_0x94d1a2,_0x4260ae){return _0x395db7(_0x4260ae,_0x94d1a2- -0x5f2);}function _0xb1c16a(_0xd202a4,_0x687cf2){return _0x56b2d0(_0x687cf2,_0xd202a4-0x240);}this['canvasContext'][_0xb1c16a(0x374,0x31f)]='destination-in',this[_0xb1c16a(0x2cb,0x2b3)][_0xb1c16a(0x2de,0x271)](0x0,0x0,this[_0x414da(-0x1bc,-0x15c)],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext'][_0x414da(-0x24c,-0x259)]=0.9;const _0x1d08d8=this[_0x414da(-0x251,-0x2c7)][_0xb1c16a(0x2d1,0x315)]['mode']!==Cesium['SceneMode']['SCENE3D'],_0x4c0ecd=this[_0x414da(-0x1bc,-0x163)]*0.25;if(this[_0x414da(-0x1e1,-0x1b5)])for(let _0x51e771=0x0,_0x3352b1=_0x16fd12['length'];_0x51e771<_0x3352b1;_0x51e771++){const _0x5001b4=_0x16fd12[_0x51e771],_0x5b4ece=this[_0x414da(-0x233,-0x206)](_0x5001b4,_0x5001b4[_0x414da(-0x18d,-0x12f)],_0x5001b4[_0x414da(-0x284,-0x2ce)],_0x5001b4['alt']),_0x19bd77=this[_0x414da(-0x233,-0x1d2)](_0x5001b4,_0x5001b4['tlng'],_0x5001b4['tlat'],_0x5001b4['talt']);if(!_0x5b4ece||!_0x19bd77)continue;if(_0x1d08d8&&Math[_0xb1c16a(0x354,0x344)](_0x5b4ece[0x0]-_0x19bd77[0x0])>=_0x4c0ecd)continue;this['canvasContext']['beginPath'](),this['canvasContext'][_0x414da(-0x1d0,-0x193)]=this['lineWidth'],this[_0x414da(-0x26f,-0x29d)][_0x414da(-0x1e5,-0x1c4)]=this['_colorRamp']['getColor'](_0x5001b4['speed']),this['canvasContext']['moveTo'](_0x5b4ece[0x0],_0x5b4ece[0x1]),this[_0xb1c16a(0x2cb,0x319)]['lineTo'](_0x19bd77[0x0],_0x19bd77[0x1]),this['canvasContext'][_0xb1c16a(0x2ff,0x2fc)]();}else{this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0xb1c16a(0x36a,0x36d)],this['canvasContext']['strokeStyle']=this['color'];for(let _0xae5044=0x0,_0x17e607=_0x16fd12['length'];_0xae5044<_0x17e607;_0xae5044++){const _0x43304b=_0x16fd12[_0xae5044],_0x5beed0=this['_tomap'](_0x43304b,_0x43304b[_0xb1c16a(0x3ad,0x41a)],_0x43304b['lat'],_0x43304b[_0xb1c16a(0x32f,0x331)]),_0x290e47=this[_0xb1c16a(0x307,0x2ce)](_0x43304b,_0x43304b['tlng'],_0x43304b['tlat'],_0x43304b[_0x414da(-0x243,-0x26c)]);if(!_0x5beed0||!_0x290e47)continue;if(_0x1d08d8&&Math[_0xb1c16a(0x354,0x351)](_0x5beed0[0x0]-_0x290e47[0x0])>=_0x4c0ecd)continue;this['canvasContext']['moveTo'](_0x5beed0[0x0],_0x5beed0[0x1]),this[_0x414da(-0x26f,-0x27a)][_0x414da(-0x264,-0x27d)](_0x290e47[0x0],_0x290e47[0x1]);}this['canvasContext']['stroke']();}}[_0x395db7(0x3a5,0x3bf)](_0x3413af,_0x192937,_0x3063c0,_0xeb48cc){const _0x2cad15=Cesium[_0x470fe6(-0x180,-0x19a)][_0x470fe6(-0x13c,-0x177)](_0x192937,_0x3063c0,_0xeb48cc??this['fixedHeight']),_0x5e6558=this['_map']['scene'];function _0x470fe6(_0x13a73b,_0x2734bf){return _0x56b2d0(_0x2734bf,_0x13a73b- -0x21d);}function _0x4e94cb(_0x7b9128,_0x5c622d){return _0x395db7(_0x7b9128,_0x5c622d- -0x525);}if(_0x5e6558[_0x470fe6(-0xcd,-0x127)]===Cesium['SceneMode']['SCENE3D']){const _0x355659=new Cesium[(_0x470fe6(-0x100,-0x94))](_0x5e6558['globe'][_0x4e94cb(-0x15b,-0xf0)],_0x5e6558['camera'][_0x4e94cb(-0x105,-0x10e)]),_0x3edf10=_0x355659['isPointVisible'](_0x2cad15);if(!_0x3edf10)return _0x3413af['age']=0x0,null;}const _0x29bc65=mars3d__namespace['PointTrans']['toWindowCoordinates'](this[_0x4e94cb(-0x147,-0x184)][_0x4e94cb(-0x1d0,-0x19c)],_0x2cad15);return _0x29bc65?[_0x29bc65['x'],_0x29bc65['y']]:null;}['clear'](){function _0x2d411b(_0x5e5dde,_0x2b1f0c){return _0x56b2d0(_0x2b1f0c,_0x5e5dde- -0x2c6);}this['windField'][_0x2d411b(-0x1e0,-0x18e)](),delete this['windData'];}['initWorker'](){function _0x462cbc(_0x42a78b,_0x387fcc){return _0x56b2d0(_0x42a78b,_0x387fcc-0x31d);}this['worker']=new Worker(this['options'][_0x3e52dc(0x31,0xb2)]);function _0x3e52dc(_0x401503,_0x22ad73){return _0x56b2d0(_0x22ad73,_0x401503- -0x74);}this['worker']['onmessage']=_0xab4b34=>{function _0x593814(_0xaac39a,_0x5dca41){return _0x3e52dc(_0x5dca41-0x19e,_0xaac39a);}this['_drawLines'](_0xab4b34['data'][_0x593814(0x247,0x1cc)]),this['_updateIng2']=![];},this['windField']={'init':_0x54d624=>{function _0x448fa9(_0x10604e,_0x1cacde){return _0x3e52dc(_0x1cacde- -0x20c,_0x10604e);}const _0x3e4266={};_0x3e4266['type']='init',_0x3e4266['options']=_0x54d624,this[_0x448fa9(-0x22d,-0x1db)]['postMessage'](_0x3e4266);},'setOptions':_0x5bc1f4=>{function _0x3201b2(_0x14f7fe,_0x50224e){return _0x3e52dc(_0x14f7fe-0x2ef,_0x50224e);}const _0x3d6af5={};_0x3d6af5[_0x356cf8(-0xe4,-0x96)]='setOptions',_0x3d6af5['options']=_0x5bc1f4;function _0x356cf8(_0x1eabd7,_0x1be1b8){return _0x3e52dc(_0x1eabd7- -0x186,_0x1be1b8);}this['worker'][_0x3201b2(0x363,0x3a6)](_0x3d6af5);},'setDate':_0x233076=>{const _0x63bf04={};_0x63bf04['type']='setDate',_0x63bf04['data']=_0x233076,this['worker']['postMessage'](_0x63bf04);},'update':()=>{function _0x4ab997(_0x3f0f2d,_0x1fec02){return _0x3e52dc(_0x1fec02- -0x1a9,_0x3f0f2d);}if(this['_updateIng2'])return;this[_0x4ab997(-0x186,-0x143)]=!![];const _0x5ddc8e={};_0x5ddc8e[_0x2e196e(0x47a,0x493)]='update';function _0x2e196e(_0x3270b1,_0x491d9c){return _0x3e52dc(_0x3270b1-0x3d8,_0x491d9c);}this['worker'][_0x4ab997(-0x100,-0x135)](_0x5ddc8e);},'clear':()=>{function _0x216c8a(_0x51fd04,_0x16186a){return _0x3e52dc(_0x51fd04- -0x148,_0x16186a);}function _0x5eb875(_0x212866,_0x47e1e6){return _0x3e52dc(_0x47e1e6- -0x188,_0x212866);}const _0x54243b={};_0x54243b['type']=_0x216c8a(-0xd6,-0x137),this[_0x5eb875(-0x127,-0x157)][_0x5eb875(-0xbd,-0x114)](_0x54243b);}},this[_0x462cbc(0x3c5,0x391)]['init'](this['options']);}}mars3d__namespace[_0x56b2d0(0x119,0x16e)][_0x56b2d0(0xad,0xe2)]('canvasWind',CanvasWindLayer),mars3d__namespace[_0x56b2d0(0x5c,0x93)][_0x56b2d0(0x77,0x8e)]=CanvasWindLayer,mars3d__namespace[_0x56b2d0(0x98,0x7f)]=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x395db7(0x312,0x386)]=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x56b2d0(0x143,0xdb)]=WindUtil;const _0x428c09={};_0x428c09['value']=!![],Object['defineProperty'](exports,_0x56b2d0(0x73,0xb1),_0x428c09);
}));
