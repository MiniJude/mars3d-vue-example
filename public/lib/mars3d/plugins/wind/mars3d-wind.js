/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.10
 * 编译日期：2024-12-11 21:56
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x112020,_0x397326){function _0x3b93de(_0x465ad4,_0x5d304d){return _0x5860(_0x5d304d-0x15f,_0x465ad4);}function _0x4d4329(_0x4d1c1c,_0x1b0b2c){return _0x5860(_0x1b0b2c- -0x1f6,_0x4d1c1c);}const _0x38d0c7=_0x112020();while(!![]){try{const _0x2462ca=parseInt(_0x3b93de(0x43b,0x3e4))/0x1+parseInt(_0x4d4329(0x50,0x14))/0x2*(parseInt(_0x3b93de(0x3a9,0x3bb))/0x3)+parseInt(_0x3b93de(0x49e,0x41d))/0x4+-parseInt(_0x4d4329(0xee,0xad))/0x5+parseInt(_0x3b93de(0x350,0x367))/0x6*(parseInt(_0x4d4329(0xd5,0xd9))/0x7)+parseInt(_0x3b93de(0x35c,0x364))/0x8+-parseInt(_0x4d4329(0xc6,0x90))/0x9;if(_0x2462ca===_0x397326)break;else _0x38d0c7['push'](_0x38d0c7['shift']());}catch(_0xfd89a3){_0x38d0c7['push'](_0x38d0c7['shift']());}}}(_0x4a12,0x303da));function _interopNamespace(_0x347ec0){if(_0x347ec0&&_0x347ec0['__esModule'])return _0x347ec0;var _0x3b0fea=Object['create'](null);function _0xafa7d4(_0x8c6c34,_0x216547){return _0x5860(_0x8c6c34- -0x24f,_0x216547);}return _0x347ec0&&Object[_0xafa7d4(0x57,-0x1c)](_0x347ec0)['forEach'](function(_0x431e82){function _0x42008e(_0x5cac70,_0x3b3c59){return _0xafa7d4(_0x5cac70-0x51b,_0x3b3c59);}function _0x1ec5c9(_0x53970e,_0x3ed405){return _0xafa7d4(_0x53970e-0x25a,_0x3ed405);}if(_0x431e82!=='default'){var _0x3064f7=Object[_0x42008e(0x576,0x514)](_0x347ec0,_0x431e82);Object[_0x42008e(0x4ce,0x514)](_0x3b0fea,_0x431e82,_0x3064f7[_0x1ec5c9(0x29a,0x250)]?_0x3064f7:{'enumerable':!![],'get':function(){return _0x347ec0[_0x431e82];}});}}),_0x3b0fea['default']=_0x347ec0,_0x3b0fea;}var mars3d__namespace=_interopNamespace(mars3d);function _0x4a12(){const _0xc39674=['_addedHook','setOptions','moveTo','canvasHeight','_onMouseMoveEvent','particlesTextureSize','update','rendering','random','computing','toWindowCoordinates','frameTime','ymin','interpolated','sceneMode','blendFuncDestination','getU','#ffffff','particlesTextures','getDataAtLonLat','currentParticlesPosition','options','tlat','style','viewerParameters','abs','rawRenderState','cols','lat','domain','type','getUVByPoint','_removedHook','Cartesian3','_calcUV','windTextures','reCreateWindTextures','EventType','_map','latitude','_setOptionsHook','_calc_speedRate','show','destroyParticlesTextures','min','processWindData','speedRate','pow','FLOAT','_updateIng2','_onMapWhellEvent','particleSystem','frameRateAdjustment','defineProperty','morphComplete','layer','1599432wWQcqt','pickEllipsoid','WindLayer','927174TcKIHj','canvasWind','94EOfesI','setDate','_animateFrame','updateViewerParameters','max','getSpeed','fromCache','length','UNSIGNED_INT','clientHeight','createRawRenderState','getSegmentDrawVertexShader','floor','beginPath','_onMouseUpEvent','magnificationFilter','depthTexture','fill','UNSIGNED_BYTE','mouse_move','data','PointTrans','createParticlesTextures','changed','alpha','wind','grid','_speedRate','west','lastFramesPerSecond','pixelSize','changeOptions','shaderProgram','updateWindData','resize','nextParticlesPosition','pointer-events','onParticlesTextureSizeChange','camera','fromCssColorString','getUVByXY','renderState','getSegmentDrawFragmentShader','Cesium','color','_maxAge','vertexShaderSource','speedFactor','pixelFormat','_onMouseDownEvent','_randomParticle','remove','worker','postProcessingPosition','postMessage','globe','round','framebuffer','createWindTextures','SCENE3D','flipY','requestRender','RED','frameRateMonitor','redraw','clear','number','values','xmin','willReadFrequently','stroke','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','wrapT','Math','mars3d-canvasWind','particles','canvasContext','zIndex','height','canvas','ellipsoid','primitiveType','13827mwFATP','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','hasOwnProperty','fillRect','setData','bounds','createRenderingFramebuffers','fixedHeight','particlesNumber','stringify','width','commandType','_colorRamp','outputTexture','CanvasWindField','fragmentShaderSource','position','STATIC_DRAW','visible','push','tlng','maxAge','removeEventListener','windField','mouseDown','cartesianToCartographic','unbindEvent','windData','north','vdata','xmax','useViewerBounds','lng','scene','attributeLocations','RGBA','array','particlesSpeed','bind','updatePosition','now','179477LBzFWX','3681567gdocVo','clientWidth','destoryRenderingFramebuffers','MAX_VALUE','cancelAnimationFrame','Compute','vmin','addEventListener','createSegmentsGeometry','get','vertexArray','age','autoClear','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','refreshTimer','componentDatatype','lineWidth','sources','textures','lineLength','commandToExecute','clearFramebuffers','drawingBufferWidth','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','fromDegrees','_drawLines','drawingBufferHeight','rows','reverse','1581685TXlPaC','LINEAR','forEach','keys','umin','applyViewerParameters','createColorTableTexture','getOwnPropertyDescriptor','clearCommand','frameState.commandList\x20is\x20undefined','colorTable','EllipsoidalOccluder','getCalculateSpeedShader','_updateIng','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','Cartesian2','_tomap','east','mouseMove','colors','colorTextures','speed','blendEquation','FUNC_ADD','segments','latRange','visibility','689744zZNVmd','NEAREST','initWorker','owner','context','mode','fromGeometry','toGridXY','isDestroy','enabled','isDestroyed','CanvasWindLayer','uniformMap','previousParticlesPosition','pointerEvents','mouse_down','calculateSpeed','7ySLgDk','destroy','WindUtil','ymax','toDegrees','_canvasParticles','mouseHidden','geometry','_pointerEvents','off','primitives','reverseY','steps','bufferUsage','south'];_0x4a12=function(){return _0xc39674;};return _0x4a12();}const Cesium$2=mars3d__namespace['Cesium'];function getU(_0xa76e60,_0x2b892f){const _0x1b74d8=_0xa76e60*Math['cos'](Cesium$2['Math']['toRadians'](_0x2b892f));return _0x1b74d8;}function getV(_0x28d687,_0x3a0632){const _0x343274=_0x28d687*Math['sin'](Cesium$2[_0xcebf1c(0x96,0xb0)]['toRadians'](_0x3a0632));function _0xcebf1c(_0xc994,_0x226642){return _0x5860(_0xc994- -0x1bd,_0x226642);}return _0x343274;}function getSpeed(_0x41cf1a,_0x51bb59){const _0x5c9ce4=Math['sqrt'](Math['pow'](_0x41cf1a,0x2)+Math[_0x190288(-0xf7,-0xf4)](_0x51bb59,0x2));function _0x190288(_0x4398d3,_0x5a0928){return _0x5860(_0x5a0928- -0x2f0,_0x4398d3);}return _0x5c9ce4;}function getDirection(_0x4271aa,_0x435c34){let _0x59ecfb=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x435c34,_0x4271aa));return _0x59ecfb+=_0x59ecfb<0x0?0x168:0x0,_0x59ecfb;}const _0x3793e3={};_0x3793e3['__proto__']=null,_0x3793e3[_0x20bf04(0x293,0x217)]=getU,_0x3793e3['getV']=getV,_0x3793e3[_0x38134b(-0x138,-0xd3)]=getSpeed,_0x3793e3['getDirection']=getDirection;var WindUtil=_0x3793e3,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x38134b(-0xab,-0x91),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0x20bf04(0x27e,0x2eb),renderParticlesVertexShader=_0x20bf04(0x261,0x2d7);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x3c8a2d={};return _0x3c8a2d['sources']=[calculateSpeedShader],new ShaderSource$1(_0x3c8a2d);}static['getUpdatePositionShader'](){const _0x103f5e={};_0x103f5e[_0x324186(-0xd3,-0xce)]=[updatePositionShader];function _0x324186(_0x5b855b,_0x30af77){return _0x20bf04(_0x5b855b,_0x30af77- -0x39f);}return new ShaderSource$1(_0x103f5e);}static['getSegmentDrawVertexShader'](){const _0x206b97={};return _0x206b97['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x206b97);}static['getSegmentDrawFragmentShader'](){const _0xce8706={};_0xce8706[_0x5853c4(0x533,0x528)]=[renderParticlesFragmentShader];function _0x5853c4(_0x564a61,_0x3ac007){return _0x38134b(_0x564a61,_0x3ac007-0x573);}return new ShaderSource$1(_0xce8706);}static['getPostProcessingPositionShader'](){const _0x1e4f89={};return _0x1e4f89['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x1e4f89);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x1850e4){this[_0x4f8d3b(0x6b,0xe8)]=_0x1850e4[_0x4f8d3b(0x6b,0x22)],this['geometry']=_0x1850e4['geometry'],this[_0x4f8d3b(0x82,0x0)]=_0x1850e4['attributeLocations'],this['primitiveType']=_0x1850e4[_0x4f8d3b(0x5f,0xc1)],this[_0x57748e(0x576,0x5b1)]=_0x1850e4[_0x4f8d3b(0xce,0x71)]||{},this['vertexShaderSource']=_0x1850e4[_0x57748e(0x4e4,0x54e)],this['fragmentShaderSource']=_0x1850e4[_0x57748e(0x517,0x571)],this[_0x57748e(0x493,0x480)]=_0x1850e4['rawRenderState'],this['framebuffer']=_0x1850e4['framebuffer'];function _0x4f8d3b(_0x49b68a,_0x5a16bf){return _0x20bf04(_0x5a16bf,_0x49b68a- -0x236);}this['outputTexture']=_0x1850e4[_0x57748e(0x515,0x521)],this['autoClear']=defaultValue(_0x1850e4[_0x57748e(0x53e,0x5a9)],![]),this['preExecute']=_0x1850e4['preExecute'],this['show']=!![],this[_0x57748e(0x546,0x5aa)]=undefined;function _0x57748e(_0x1cf346,_0x4d858a){return _0x20bf04(_0x4d858a,_0x1cf346-0x272);}this['clearCommand']=undefined,this['isDynamic']=_0x1850e4['isDynamic']??(()=>!![]),this[_0x4f8d3b(0x96,0x7e)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x52fc4a){function _0x2e28f7(_0x16905a,_0x62d52f){return _0x38134b(_0x62d52f,_0x16905a- -0x49);}function _0x33c810(_0x1157ef,_0x12d866){return _0x20bf04(_0x1157ef,_0x12d866- -0x2fd);}if(this['commandType']==='Draw'){const _0x19cd9b={};_0x19cd9b[_0x2e28f7(-0x69,-0xc1)]=_0x52fc4a,_0x19cd9b[_0x33c810(-0xc,0x13)]=this[_0x33c810(0x8a,0x13)],_0x19cd9b['attributeLocations']=this['attributeLocations'],_0x19cd9b['bufferUsage']=BufferUsage$1[_0x33c810(0x30,-0x56)];const _0x34836e=VertexArray$1[_0x33c810(0x7a,0x1)](_0x19cd9b),_0x395139={};_0x395139['context']=_0x52fc4a,_0x395139['vertexShaderSource']=this[_0x33c810(-0xfa,-0x8b)],_0x395139[_0x2e28f7(-0xc0,-0xb4)]=this['fragmentShaderSource'],_0x395139['attributeLocations']=this['attributeLocations'];const _0x384273=ShaderProgram[_0x33c810(-0xa6,-0xb3)](_0x395139),_0x29d091=RenderState['fromCache'](this[_0x2e28f7(-0x144,-0x100)]),_0x23c326={};return _0x23c326[_0x33c810(-0x3c,-0x2)]=this,_0x23c326['vertexArray']=_0x34836e,_0x23c326['primitiveType']=this[_0x33c810(-0xe9,-0x68)],_0x23c326['modelMatrix']=Matrix4['IDENTITY'],_0x23c326[_0x33c810(-0x10a,-0x90)]=_0x29d091,_0x23c326['shaderProgram']=_0x384273,_0x23c326[_0x33c810(-0x57,-0x80)]=this[_0x2e28f7(-0xe8,-0x87)],_0x23c326['uniformMap']=this[_0x2e28f7(-0x61,-0x4a)],_0x23c326['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x23c326);}else{if(this[_0x33c810(0xe,-0x5c)]===_0x2e28f7(-0xa0,-0x34)){const _0x18eea7={};return _0x18eea7['owner']=this,_0x18eea7['fragmentShaderSource']=this['fragmentShaderSource'],_0x18eea7[_0x33c810(0x87,0x7)]=this['uniformMap'],_0x18eea7['outputTexture']=this[_0x33c810(-0x66,-0x5a)],_0x18eea7['persists']=!![],new ComputeCommand(_0x18eea7);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x5d3f3c,_0x35d1bf){function _0x30ebff(_0x4359e7,_0x5367ac){return _0x38134b(_0x4359e7,_0x5367ac-0x2e7);}this[_0x30ebff(0x35e,0x2db)]=_0x35d1bf;function _0x1f0051(_0x41f663,_0x24d737){return _0x38134b(_0x41f663,_0x24d737-0x5a4);}defined(this[_0x1f0051(0x53f,0x55c)])&&(this['commandToExecute']['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x5d3f3c,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x1f0051(0x55a,0x52f)]}));}[_0x38134b(-0xaf,-0x10f)](_0x1490cb){function _0x453808(_0x48957f,_0x5cfd87){return _0x38134b(_0x5cfd87,_0x48957f-0xd6);}function _0x1b58d8(_0x5e03c8,_0xc8fe29){return _0x20bf04(_0x5e03c8,_0xc8fe29- -0x16a);}if(!this['isDynamic']())return;if(!this['show']||!defined(_0x1490cb))return;!defined(this['commandToExecute'])&&(this[_0x1b58d8(0x105,0x16a)]=this['createCommand'](_0x1490cb['context']));defined(this['preExecute'])&&this['preExecute']();if(!_0x1490cb['commandList']){console['warn'](_0x453808(0xa0,0x111));return;}defined(this[_0x453808(0x9f,0xa8)])&&_0x1490cb['commandList']['push'](this['clearCommand']),defined(this[_0x1b58d8(0x195,0x16a)])&&_0x1490cb['commandList'][_0x1b58d8(0xd6,0x13f)](this[_0x453808(0x8e,0x9d)]);}[_0x38134b(0x1a,-0x1a)](){return![];}[_0x38134b(-0x29,-0x12)](){if(defined(this[_0x88741a(0x20b,0x1f5)])){var _0x5dafac;(_0x5dafac=this['commandToExecute']['shaderProgram'])===null||_0x5dafac===void 0x0||_0x5dafac['destroy'](),this[_0x256e00(0x22d,0x283)][_0x256e00(0x1ac,0x213)]=undefined;}function _0x256e00(_0x363e13,_0x14698){return _0x20bf04(_0x363e13,_0x14698- -0x51);}function _0x88741a(_0x2317d1,_0x8910bc){return _0x38134b(_0x8910bc,_0x2317d1-0x253);}return destroyObject(this);}}function deepMerge(_0x5d1ced,_0x48eae7){function _0x52f24e(_0x2a858a,_0x1b8e6d){return _0x20bf04(_0x1b8e6d,_0x2a858a- -0xec);}if(!_0x5d1ced)return _0x48eae7;if(!_0x48eae7)return _0x5d1ced;const _0x7a517f={..._0x48eae7},_0x476209=_0x7a517f;for(const _0x2ca443 in _0x5d1ced){if(Object['prototype'][_0x52f24e(0x1ac,0x1ab)]['call'](_0x5d1ced,_0x2ca443)){const _0x55a4aa=_0x5d1ced[_0x2ca443],_0x5654e8=_0x48eae7[_0x2ca443];if(Array['isArray'](_0x55a4aa)){_0x476209[_0x2ca443]=_0x55a4aa['slice']();continue;}if(_0x55a4aa&&typeof _0x55a4aa==='object'){_0x476209[_0x2ca443]=deepMerge(_0x55a4aa,_0x5654e8||{});continue;}_0x55a4aa!==undefined&&(_0x476209[_0x2ca443]=_0x55a4aa);}}return _0x476209;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0xeb4327,_0x46b44d,_0x313fce,_0x4986e8,_0x137050){function _0x3d386f(_0x4b2081,_0x29a32a){return _0x38134b(_0x4b2081,_0x29a32a-0xc4);}this['context']=_0xeb4327,this['options']=_0x313fce,this['viewerParameters']=_0x4986e8,this['windData']=_0x46b44d,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0xd6c892={};_0xd6c892['scene']=_0x137050;function _0x21ec4d(_0x35ceef,_0xd459bc){return _0x20bf04(_0xd459bc,_0x35ceef- -0x3b2);}_0xd6c892['samplingWindow']=0x1,_0xd6c892['quietPeriod']=0x0,this[_0x21ec4d(-0x12f,-0xa7)]=new FrameRateMonitor(_0xd6c892),this['initFrameRate'](),this[_0x21ec4d(-0x134,-0x17c)](),this['createParticlesTextures'](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x10f867=()=>{function _0x6229e3(_0xe23a46,_0x40f6c5){return _0x5860(_0x40f6c5- -0x12d,_0xe23a46);}function _0x56cacb(_0x4bd851,_0x4db88d){return _0x5860(_0x4db88d-0x173,_0x4bd851);}this['frameRateMonitor'][_0x6229e3(0x99,0xfa)]>0x14&&(this['frameRate']=this[_0x56cacb(0x3ed,0x3bc)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math[_0x6229e3(0x165,0xe1)](this['frameRate'],0x1));};_0x10f867();const _0x3e3003=setInterval(_0x10f867,0x3e8);function _0x225616(_0x40331d,_0x554226){return _0x38134b(_0x554226,_0x40331d- -0x4a);}const _0x4061d9=this[_0x225616(-0x5c,-0xce)][_0x225616(-0xaa,-0x102)](this);function _0x42f50a(_0x5ca9fd,_0x5b0c07){return _0x20bf04(_0x5ca9fd,_0x5b0c07- -0x1ed);}this['destroy']=()=>{clearInterval(_0x3e3003),_0x4061d9();};}[_0x38134b(-0xea,-0x9e)](){const _0x3f20b6={};_0x3f20b6['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x3f20b6['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];function _0x24aded(_0x212a11,_0x1a66ea){return _0x38134b(_0x1a66ea,_0x212a11-0x1dc);}const _0x55e08c={'context':this['context'],'width':this[_0x3bdc61(0x520,0x50f)]['width'],'height':this[_0x3bdc61(0x520,0x4a7)][_0x3bdc61(0x501,0x56d)],'pixelFormat':PixelFormat$1[_0x24aded(0x142,0x128)],'pixelDatatype':PixelDatatype$1[_0x24aded(0xf7,0xbc)],'flipY':this[_0x3bdc61(0x48b,0x409)][_0x3bdc61(0x4ef,0x476)]??![],'sampler':new Sampler$1(_0x3f20b6)};function _0x3bdc61(_0x34e842,_0x22f150){return _0x38134b(_0x22f150,_0x34e842-0x58b);}this[_0x24aded(0xea,0xc1)]={'U':new Texture$1({..._0x55e08c,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x55e08c,'source':{'arrayBufferView':new Float32Array(this[_0x3bdc61(0x520,0x4ad)]['v']['array'])}})};}[_0x38134b(-0xfe,-0xc2)](){const _0x1b93da={};_0x1b93da['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x42f63c(_0x21bfea,_0xd98b80){return _0x20bf04(_0x21bfea,_0xd98b80- -0x419);}_0x1b93da[_0x3fe101(0x130,0x114)]=TextureMagnificationFilter$1[_0x3fe101(0x1f6,0x1ba)];const _0x47a36a={'context':this['context'],'width':this[_0x42f63c(-0x21f,-0x1fd)][_0x3fe101(0x13e,0xcd)],'height':this[_0x3fe101(0x114,0xdd)]['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x3fe101(0xd5,0xf8)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x3fe101(0xbb,0xdd)]['particlesTextureSize']*this[_0x42f63c(-0x1de,-0x1fd)][_0x3fe101(0xf1,0xcd)]*0x4)[_0x42f63c(-0x21e,-0x1c4)](0x0)},'sampler':new Sampler$1(_0x1b93da)};function _0x3fe101(_0xbbc510,_0x6ac6e9){return _0x38134b(_0xbbc510,_0x6ac6e9-0x1dd);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x47a36a),'currentParticlesPosition':new Texture$1(_0x47a36a),'nextParticlesPosition':new Texture$1(_0x47a36a),'postProcessingPosition':new Texture$1(_0x47a36a),'particlesSpeed':new Texture$1(_0x47a36a)};}['destroyParticlesTextures'](){function _0x4ddb4a(_0x4bc247,_0x324196){return _0x38134b(_0x4bc247,_0x324196- -0xd);}function _0xd03877(_0xd423f8,_0x2c16d4){return _0x20bf04(_0xd423f8,_0x2c16d4-0x11b);}Object['values'](this['particlesTextures'])[_0xd03877(0x41b,0x3fa)](_0x4ca04f=>_0x4ca04f[_0xd03877(0x429,0x425)]());}['createComputingPrimitives'](){function _0x53b0c7(_0x38c4ed,_0x744bef){return _0x38134b(_0x38c4ed,_0x744bef-0x47e);}function _0x45a9da(_0x1a7966,_0x1e4cd0){return _0x38134b(_0x1e4cd0,_0x1a7966-0x1f2);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x45a9da(0x19b,0x1b7),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x45a9da(0x109,0x132)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x45a9da(0x187,0x198)]['v'][_0x53b0c7(0x363,0x395)],this[_0x45a9da(0x187,0x142)]['v'][_0x53b0c7(0x361,0x3aa)]),'speedRange':()=>new Cartesian2$1(this[_0x45a9da(0x187,0x148)]['speed'][_0x45a9da(0x109,0x8a)],this[_0x53b0c7(0x3b3,0x413)]['speed'][_0x53b0c7(0x351,0x3aa)]),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x4ac6c0(_0x3e675a,_0x210926){return _0x45a9da(_0x3e675a- -0x102,_0x210926);}function _0x1dddeb(_0x4557c8,_0x3989c2){return _0x53b0c7(_0x3989c2,_0x4557c8- -0x1ba);}return(this['viewerParameters'][_0x1dddeb(0x20a,0x200)]+0x32)*this[_0x1dddeb(0x1c4,0x1fc)][_0x1dddeb(0x21b,0x25e)];},'frameRateAdjustment':()=>this[_0x45a9da(0x111,0xb0)],'dimension':()=>new Cartesian2$1(this[_0x53b0c7(0x440,0x413)]['width'],this[_0x45a9da(0x187,0x1fd)][_0x53b0c7(0x421,0x3f4)]),'minimum':()=>new Cartesian2$1(this[_0x53b0c7(0x39c,0x413)]['bounds'][_0x45a9da(0x136,0x10b)],this[_0x53b0c7(0x480,0x413)][_0x45a9da(0x171,0x16b)]['south']),'maximum':()=>new Cartesian2$1(this['windData'][_0x45a9da(0x171,0x11e)]['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x45a9da(0x1bf,0x20d)](),'outputTexture':this['particlesTextures'][_0x45a9da(0x191,0x131)],'preExecute':()=>{function _0x29600b(_0x14404b,_0x2cfb14){return _0x53b0c7(_0x2cfb14,_0x14404b- -0x1e3);}function _0xf2c630(_0x1d2170,_0xa96616){return _0x53b0c7(_0xa96616,_0x1d2170- -0x23a);}const _0x56755a=this[_0x29600b(0x198,0x121)]['previousParticlesPosition'];this[_0x29600b(0x198,0x207)]['previousParticlesPosition']=this['particlesTextures'][_0x29600b(0x19a,0x141)],this[_0xf2c630(0x141,0x16e)][_0xf2c630(0x143,0x119)]=this['particlesTextures'][_0x29600b(0x1f8,0x1d4)],this[_0x29600b(0x198,0x1b3)][_0x29600b(0x1f8,0x178)]=_0x56755a,this['primitives'][_0xf2c630(0x230,0x280)][_0xf2c630(0x1fc,0x249)]&&(this[_0xf2c630(0x23b,0x21a)][_0xf2c630(0x230,0x247)]['commandToExecute'][_0xf2c630(0x1cb,0x250)]=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this[_0x45a9da(0xf2,0x13b)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x45a9da(0xef,0x102)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x45a9da(0x191,0x164)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures'][_0x53b0c7(0x35e,0x3c9)],'preExecute':()=>{function _0x3002d0(_0x176fda,_0x9b6c1){return _0x53b0c7(_0x176fda,_0x9b6c1- -0x14d);}function _0x51d288(_0x118485,_0x5e2e4b){return _0x45a9da(_0x5e2e4b-0x32b,_0x118485);}this['primitives'][_0x3002d0(0x2aa,0x2d2)][_0x3002d0(0x2c6,0x2e9)]&&(this[_0x3002d0(0x2f1,0x328)][_0x51d288(0x4d1,0x4be)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x3002d0(0x2a8,0x27c)]);},'isDynamic':()=>this[_0x45a9da(0xf2,0x121)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x45a9da(0x19b,0x172),'uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x45a9da(0xef,0xf9)]['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this['viewerParameters'][_0x53b0c7(0x3cf,0x458)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x45a9da(0x136,0x108)],this[_0x53b0c7(0x3b3,0x413)][_0x53b0c7(0x40b,0x3fd)][_0x53b0c7(0x47e,0x450)]),'dataLatRange':()=>new Cartesian2$1(this[_0x45a9da(0x187,0x1d6)][_0x53b0c7(0x452,0x3fd)]['south'],this['windData']['bounds'][_0x53b0c7(0x479,0x414)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this[_0x53b0c7(0x31b,0x37e)]['dropRate'],'dropRateBump':()=>this[_0x45a9da(0xf2,0xdd)]['dropRateBump'],'useViewerBounds':()=>this['options'][_0x53b0c7(0x461,0x417)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x53b0c7(0x3c2,0x37b)]['postProcessingPosition'],'preExecute':()=>{function _0x1df24f(_0x2ff8c6,_0x4ab9f6){return _0x45a9da(_0x2ff8c6-0x2d9,_0x4ab9f6);}function _0x1a613d(_0x32cc91,_0x3de6ba){return _0x53b0c7(_0x3de6ba,_0x32cc91- -0x5a);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this[_0x1df24f(0x4c2,0x4c4)]['postProcessingPosition']['commandToExecute']['outputTexture']=this[_0x1a613d(0x321,0x35b)][_0x1a613d(0x381,0x31b)]);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){this['windTextures']['U'][_0x32091e(0x39d,0x402)](),this['windTextures']['V']['destroy']();function _0x32091e(_0xe14d7d,_0x449705){return _0x38134b(_0x449705,_0xe14d7d-0x3af);}this['createWindTextures']();}[_0x20bf04(0x209,0x265)](_0x359f04){this['windData']=_0x359f04,this['reCreateWindTextures']();}['updateOptions'](_0x22363d){function _0x1fff5c(_0x75d6ca,_0x39e213){return _0x38134b(_0x39e213,_0x75d6ca- -0x84);}const _0x4725af=_0x22363d['flipY']!==undefined&&_0x22363d['flipY']!==this['options'][_0x3aa901(0x265,0x2a2)];this['options']=deepMerge(_0x22363d,this[_0x3aa901(0x201,0x1ba)]);function _0x3aa901(_0x15c886,_0x4baed2){return _0x20bf04(_0x4baed2,_0x15c886- -0x1b);}_0x4725af&&this[_0x3aa901(0x210,0x19f)]();}[_0x20bf04(0x259,0x234)](_0x4cc427){const {array:_0xfc73a2}=_0x4cc427;let {min:_0x1f5dab,max:_0x5b25c5}=_0x4cc427;function _0xd7770d(_0x2d5175,_0x3304d4){return _0x20bf04(_0x2d5175,_0x3304d4- -0x169);}const _0x3586b0=new Float32Array(_0xfc73a2[_0xd7770d(0x8d,0xe2)]);_0x1f5dab===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x1f5dab=Math['min'](..._0xfc73a2));function _0x5dbb42(_0x3a2e6c,_0x3e1f3d){return _0x20bf04(_0x3e1f3d,_0x3a2e6c- -0x40f);}_0x5b25c5===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x5b25c5=Math['max'](..._0xfc73a2));const _0x53efa7=Math['max'](Math['abs'](_0x1f5dab),Math[_0x5dbb42(-0x1ef,-0x1b1)](_0x5b25c5));for(let _0x398d29=0x0;_0x398d29<_0xfc73a2[_0xd7770d(0x92,0xe2)];_0x398d29++){const _0x3db6cc=_0xfc73a2[_0x398d29]/_0x53efa7;_0x3586b0[_0x398d29]=_0x3db6cc;}return _0x3586b0;}[_0x20bf04(0x2a5,0x30a)](){Object['values'](this['windTextures'])['forEach'](_0x2e0da8=>_0x2e0da8['destroy']());function _0x36bb3d(_0x23d189,_0x86cc5a){return _0x20bf04(_0x23d189,_0x86cc5a-0x1c8);}function _0x3d3e8a(_0x3b55c3,_0x15eee1){return _0x20bf04(_0x3b55c3,_0x15eee1-0x83);}Object['values'](this['particlesTextures'])['forEach'](_0x21bd7d=>_0x21bd7d[_0x3d3e8a(0x40a,0x38d)]()),Object['values'](this['primitives'])[_0x3d3e8a(0x380,0x362)](_0x5d1cff=>_0x5d1cff[_0x3d3e8a(0x3fa,0x38d)]()),this[_0x3d3e8a(0x2e8,0x306)]['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x4b164e,_0x1c4bf2,_0x2c00ed,_0x9685e0){this['context']=_0x4b164e,this['options']=_0x1c4bf2;function _0x53da5b(_0x341a14,_0x1f0030){return _0x20bf04(_0x1f0030,_0x341a14- -0x322);}this['viewerParameters']=_0x2c00ed,this['computing']=_0x9685e0;(typeof this['options']['particlesTextureSize']!==_0x53da5b(-0x9c,-0xde)||this['options']['particlesTextureSize']<=0x0)&&(console['error'](_0x12920e(0x403,0x3eb)),this[_0x12920e(0x352,0x342)]['particlesTextureSize']=0x100);this['colorTable']=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures']();function _0x12920e(_0x5f46b9,_0x2fc604){return _0x38134b(_0x2fc604,_0x5f46b9-0x452);}this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}['createRenderingTextures'](){const _0x5cf353={};_0x5cf353[_0x201127(0x261,0x21c)]=this['context'],_0x5cf353['width']=this[_0x201127(0x241,0x21c)][_0x32d8b0(0x2be,0x2ab)],_0x5cf353['height']=this['context'][_0x201127(0x192,0x1fa)],_0x5cf353[_0x201127(0x1a8,0x194)]=PixelFormat['RGBA'],_0x5cf353['pixelDatatype']=PixelDatatype[_0x201127(0xf6,0x176)];const _0x1c1387=_0x5cf353,_0x13c593={};function _0x201127(_0x19301f,_0x522ea1){return _0x38134b(_0x19301f,_0x522ea1-0x23c);}_0x13c593['context']=this['context'],_0x13c593['width']=this['context']['drawingBufferWidth'],_0x13c593['height']=this['context'][_0x32d8b0(0x2c2,0x28a)],_0x13c593[_0x32d8b0(0x25c,0x2cc)]=PixelFormat['DEPTH_COMPONENT'],_0x13c593['pixelDatatype']=PixelDatatype[_0x32d8b0(0x234,0x1d4)];function _0x32d8b0(_0x25b59e,_0x5a3629){return _0x20bf04(_0x5a3629,_0x25b59e- -0x18);}const _0x215ca4=_0x13c593;return{'segmentsColor':new Texture(_0x1c1387),'segmentsDepth':new Texture(_0x215ca4)};}[_0x20bf04(0x23a,0x29c)](){const _0x252afe={};function _0x4c4f53(_0x590c79,_0x41d20e){return _0x38134b(_0x41d20e,_0x590c79- -0x89);}_0x252afe['context']=this['context'],_0x252afe[_0xc41e7(0xb8,0x61)]=[this[_0xc41e7(0x99,0x99)]['segmentsColor']],_0x252afe[_0xc41e7(0x1b,0x76)]=this['textures']['segmentsDepth'];function _0xc41e7(_0x318d6c,_0x4348dd){return _0x20bf04(_0x4348dd,_0x318d6c- -0x239);}return{'segments':new Framebuffer(_0x252afe)};}[_0x38134b(0x1d,-0x5a)](){function _0x5cd787(_0x4b3af9,_0x2727fe){return _0x20bf04(_0x4b3af9,_0x2727fe- -0x2a6);}Object['values'](this['framebuffers'])[_0x5cd787(0x41,0x39)](_0x1f813c=>{_0x1f813c['destroy']();});}['createColorTableTexture'](){const _0x4d9c4f=new Float32Array(this[_0x859cdb(-0xfe,-0x8b)]['colors']['flatMap'](_0x237d81=>{function _0x39f92a(_0x33dfff,_0x36c4ba){return _0x859cdb(_0x33dfff-0x125,_0x36c4ba);}const _0x195821=Color$1[_0x4a3dc4(0xf6,0x157)](_0x237d81);function _0x4a3dc4(_0x2007d1,_0x35f334){return _0x859cdb(_0x35f334-0x206,_0x2007d1);}return[_0x195821['red'],_0x195821['green'],_0x195821['blue'],_0x195821[_0x4a3dc4(0x190,0x148)]];})),_0x21d80c={};_0x21d80c['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x21d80c['magnificationFilter']=TextureMagnificationFilter[_0x46e865(0x8c,0x32)],_0x21d80c['wrapS']=TextureWrap['CLAMP_TO_EDGE'];function _0x46e865(_0x3c449c,_0x1e83da){return _0x38134b(_0x3c449c,_0x1e83da-0x70);}_0x21d80c[_0x859cdb(-0x8e,-0xb1)]=TextureWrap['CLAMP_TO_EDGE'];function _0x859cdb(_0x2290fd,_0x2b8af3){return _0x20bf04(_0x2b8af3,_0x2290fd- -0x31a);}return new Texture({'context':this['context'],'width':this[_0x46e865(-0xc8,-0x90)][_0x46e865(0x86,0x44)][_0x859cdb(-0xcf,-0xd2)],'height':0x1,'pixelFormat':PixelFormat[_0x46e865(0x92,0xd)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x21d80c),'source':{'width':this[_0x46e865(-0xd1,-0x90)][_0x859cdb(-0x2a,0x43)]['length'],'height':0x1,'arrayBufferView':_0x4d9c4f}});}[_0x38134b(-0xb3,-0x54)](){const _0x4ecfe4=0x4,_0x1e78a7=this['options'][_0x42b4e7(0x53b,0x4e5)];let _0x440b03=[];for(let _0x43e9e1=0x0;_0x43e9e1<_0x1e78a7;_0x43e9e1++){for(let _0xf50544=0x0;_0xf50544<_0x1e78a7;_0xf50544++){for(let _0x8ed980=0x0;_0x8ed980<_0x4ecfe4;_0x8ed980++){_0x440b03['push'](_0x43e9e1/_0x1e78a7),_0x440b03['push'](_0xf50544/_0x1e78a7);}}}_0x440b03=new Float32Array(_0x440b03);const _0x71ac47=this['options']['particlesTextureSize']**0x2;let _0x120b8a=[];for(let _0x260c27=0x0;_0x260c27<_0x71ac47;_0x260c27++){_0x120b8a['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x120b8a=new Float32Array(_0x120b8a);let _0x1894ac=[];function _0x564d5b(_0x624ac7,_0x4063fd){return _0x38134b(_0x624ac7,_0x4063fd- -0xf1);}for(let _0x11be35=0x0,_0x6214b1=0x0;_0x11be35<_0x71ac47;_0x11be35++){_0x1894ac['push'](_0x6214b1+0x0,_0x6214b1+0x1,_0x6214b1+0x2,_0x6214b1+0x2,_0x6214b1+0x1,_0x6214b1+0x3),_0x6214b1+=_0x4ecfe4;}_0x1894ac=new Uint32Array(_0x1894ac);const _0x19dded={};_0x19dded[_0x42b4e7(0x617,0x5a8)]=ComponentDatatype[_0x42b4e7(0x55a,0x510)],_0x19dded['componentsPerAttribute']=0x2,_0x19dded[_0x564d5b(-0x1fa,-0x186)]=_0x440b03;const _0x1e84d3={};_0x1e84d3[_0x42b4e7(0x53a,0x5a8)]=ComponentDatatype[_0x42b4e7(0x4a9,0x510)],_0x1e84d3['componentsPerAttribute']=0x3;function _0x42b4e7(_0x127a69,_0x4f8a44){return _0x20bf04(_0x127a69,_0x4f8a44-0x2d9);}_0x1e84d3['values']=_0x120b8a;const _0x24e13b=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x19dded),'normal':new GeometryAttribute(_0x1e84d3)}),'indices':_0x1894ac});return _0x24e13b;}[_0x20bf04(0x250,0x24e)](_0x17560){const _0x483205={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x17560};return Appearance['getDefaultRenderState'](!![],![],_0x483205);}['createPrimitives'](){const _0x4449e0={};_0x4449e0['st']=0x0,_0x4449e0['normal']=0x1;const _0x52ded6={};function _0x1b4d5f(_0x897245,_0x16c7f1){return _0x20bf04(_0x897245,_0x16c7f1- -0x274);}_0x52ded6['enabled']=!![];function _0x8be9cf(_0x567426,_0x15dd13){return _0x20bf04(_0x15dd13,_0x567426- -0x3ea);}const _0x19c324={};_0x19c324[_0x1b4d5f(0xa0,0x8d)]=!![],_0x19c324[_0x1b4d5f(0x9d,0x7f)]=WebGLRenderingContext[_0x8be9cf(-0xf6,-0x7c)],_0x19c324['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x19c324[_0x1b4d5f(-0xc8,-0x5e)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x4f8e84={};_0x4f8e84['viewport']=undefined,_0x4f8e84['depthTest']=_0x52ded6,_0x4f8e84['depthMask']=!![],_0x4f8e84['blending']=_0x19c324;const _0x563673=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4449e0,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this[_0x1b4d5f(-0x6e,-0x64)][_0x8be9cf(-0x1d1,-0x21e)][_0x1b4d5f(0x5e,0x91)],'currentParticlesPosition':()=>this[_0x8be9cf(-0x1da,-0x1de)][_0x1b4d5f(-0xdb,-0x5b)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0x1b4d5f(-0x40,-0x64)]['frameRateAdjustment'],'colorTable':()=>this[_0x8be9cf(-0x103,-0x9a)],'domain':()=>{var _0x4a6b7f,_0x1ccd27;function _0x530fb3(_0x2188ba,_0x484e48){return _0x8be9cf(_0x2188ba-0x73a,_0x484e48);}const _0x2d0cfa=new Cartesian2(((_0x4a6b7f=this['options']['domain'])===null||_0x4a6b7f===void 0x0?void 0x0:_0x4a6b7f[_0x894ef5(0x20f,0x1e3)])??this[_0x894ef5(0x1ec,0x217)]['windData']['speed'][_0x530fb3(0x583,0x606)],((_0x1ccd27=this[_0x530fb3(0x56c,0x5cb)][_0x894ef5(0x200,0x234)])===null||_0x1ccd27===void 0x0?void 0x0:_0x1ccd27['max'])??this[_0x530fb3(0x560,0x5aa)][_0x530fb3(0x601,0x5e2)]['speed']['max']);function _0x894ef5(_0x4b407a,_0x379f77){return _0x8be9cf(_0x4b407a-0x3c6,_0x379f77);}return _0x2d0cfa;},'displayRange':()=>{var _0x14c22a,_0x3ff839;function _0x5a7a25(_0x3fc23f,_0x19b56b){return _0x8be9cf(_0x3fc23f-0x6dd,_0x19b56b);}function _0x5bc95e(_0x36c379,_0x47558a){return _0x8be9cf(_0x36c379-0x1d6,_0x47558a);}const _0x3d926b=new Cartesian2(((_0x14c22a=this['options']['displayRange'])===null||_0x14c22a===void 0x0?void 0x0:_0x14c22a['min'])??this['computing']['windData']['speed']['min'],((_0x3ff839=this[_0x5bc95e(0x8,-0x5e)]['displayRange'])===null||_0x3ff839===void 0x0?void 0x0:_0x3ff839[_0x5a7a25(0x53b,0x570)])??this[_0x5bc95e(-0x4,0x2a)][_0x5a7a25(0x5a4,0x61a)][_0x5a7a25(0x5e5,0x65e)][_0x5a7a25(0x53b,0x50c)]);return _0x3d926b;},'particleHeight':()=>this['options']['particleHeight']||0x0,'aspect':()=>this[_0x8be9cf(-0xee,-0xd7)][_0x1b4d5f(0x97,0x62)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x52018c={};_0x52018c['min']=0x1,_0x52018c['max']=0x2;function _0x591a23(_0x1fdac7,_0x2433d9){return _0x8be9cf(_0x1fdac7-0x10c,_0x2433d9);}const _0x2bfe1a=this[_0x591a23(-0xc2,-0x13b)]['lineWidth']||_0x52018c;return new Cartesian2(_0x2bfe1a['min'],_0x2bfe1a['max']);},'lineLength':()=>{const _0x3459c4={};_0x3459c4['min']=0x14,_0x3459c4['max']=0x64;const _0xb55f97=this[_0x2c3b19(-0x1dd,-0x1c7)]['lineLength']||_0x3459c4;function _0x2c3b19(_0x2dbe15,_0x1578bf){return _0x1b4d5f(_0x2dbe15,_0x1578bf- -0x16f);}return new Cartesian2(_0xb55f97['min'],_0xb55f97['max']);},'is3D':()=>this[_0x1b4d5f(-0x65,-0x55)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x1b4d5f(-0x6e,-0x25)](),'fragmentShaderSource':ShaderManager[_0x8be9cf(-0x17c,-0x134)](),'rawRenderState':this['createRawRenderState'](_0x4f8e84)}),_0x138cb3={};return _0x138cb3['segments']=_0x563673,_0x138cb3;}['onParticlesTextureSizeChange'](){const _0x3c7ee6=this['createSegmentsGeometry']();this['primitives'][_0x1047e4(0x54c,0x57d)]['geometry']=_0x3c7ee6;const _0x13f5d8={};_0x13f5d8['context']=this['context'];function _0x1047e4(_0x365e79,_0x407339){return _0x38134b(_0x407339,_0x365e79-0x573);}_0x13f5d8['geometry']=_0x3c7ee6;function _0x4a1a13(_0x4b2b19,_0x35ab76){return _0x38134b(_0x35ab76,_0x4b2b19-0x144);}_0x13f5d8[_0x1047e4(0x50f,0x4ea)]=this[_0x4a1a13(0x13b,0xd1)]['segments']['attributeLocations'],_0x13f5d8[_0x1047e4(0x56d,0x55f)]=BufferUsage['STATIC_DRAW'];const _0xeb3c3e=VertexArray['fromGeometry'](_0x13f5d8);this[_0x1047e4(0x56a,0x5ad)]['segments'][_0x1047e4(0x52b,0x4a6)]&&(this[_0x4a1a13(0x13b,0x130)][_0x1047e4(0x54c,0x554)]['commandToExecute'][_0x4a1a13(0xf2,0x12d)]=_0xeb3c3e);}['onColorTableChange'](){function _0xfeff42(_0x3ca427,_0xc71d0){return _0x20bf04(_0xc71d0,_0x3ca427-0x2ac);}function _0x24d935(_0x540615,_0x47175b){return _0x38134b(_0x540615,_0x47175b-0x121);}this[_0x24d935(0x108,0xec)]['destroy'](),this['colorTable']=this[_0x24d935(0x12c,0xe8)]();}['updateOptions'](_0xb08a17){const _0xfa5f0f=_0xb08a17['colors']&&JSON[_0x286291(0x285,0x2aa)](_0xb08a17['colors'])!==JSON['stringify'](this['options']['colors']);this['options']=deepMerge(_0xb08a17,this['options']);function _0x286291(_0x2f11f4,_0x36f576){return _0x20bf04(_0x36f576,_0x2f11f4- -0x1a);}_0xfa5f0f&&this['onColorTableChange']();}[_0x20bf04(0x37e,0x30a)](){Object['values'](this['framebuffers'])[_0x2f56b0(0x1c6,0x13e)](_0x4040ee=>{_0x4040ee['destroy']();});function _0x2f56b0(_0x4896e7,_0x50ce97){return _0x38134b(_0x4896e7,_0x50ce97-0x17b);}function _0x4e5ca0(_0x190e3f,_0x4de167){return _0x20bf04(_0x4de167,_0x190e3f-0x110);}Object['values'](this['primitives'])[_0x2f56b0(0x18a,0x13e)](_0x438da3=>{function _0x1a47e2(_0x238283,_0x38f15d){return _0x2f56b0(_0x238283,_0x38f15d-0x1c8);}_0x438da3[_0x1a47e2(0x306,0x331)]();}),this[_0x4e5ca0(0x3f7,0x46a)]['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x38134b(-0x79,-0xad)];class WindParticleSystem{constructor(_0xae257b,_0x31b788,_0x3699cf,_0x274f37,_0x1d5879){this['context']=_0xae257b;function _0x4fc2a4(_0x2a719e,_0x201e2d){return _0x20bf04(_0x201e2d,_0x2a719e- -0x278);}this['options']=_0x3699cf,this['viewerParameters']=_0x274f37,this[_0x2e7fce(0x53b,0x522)]=new WindParticlesComputing(_0xae257b,_0x31b788,_0x3699cf,_0x274f37,_0x1d5879),this['rendering']=new WindParticlesRendering(_0xae257b,_0x3699cf,_0x274f37,this[_0x4fc2a4(-0x68,-0x9c)]);function _0x2e7fce(_0x50745a,_0x17f200){return _0x20bf04(_0x17f200,_0x50745a-0x32b);}this[_0x4fc2a4(0x5d,0x55)]();}['getPrimitives'](){function _0x16e230(_0x269d8c,_0x16d323){return _0x38134b(_0x269d8c,_0x16d323-0x16e);}function _0x1ff683(_0x2d2363,_0x31347e){return _0x38134b(_0x2d2363,_0x31347e-0x4a);}const _0x5ac1b0=[this['computing'][_0x1ff683(-0x8,0x41)]['calculateSpeed'],this['computing']['primitives']['updatePosition'],this['computing']['primitives']['postProcessingPosition'],this['rendering'][_0x1ff683(0x69,0x41)][_0x1ff683(0x9c,0x23)]];return _0x5ac1b0;}[_0x38134b(-0x58,-0x47)](){const _0x303fd0=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this['rendering']['framebuffers'])['forEach'](_0x4ad078=>{_0x303fd0['framebuffer']=this['rendering']['framebuffers'][_0x4ad078],_0x303fd0['execute'](this['context']);});}['changeOptions'](_0x170a49){let _0x30f891=![];_0x170a49[_0x2f6b6d(0x8d,0x90)]&&this[_0x337cda(0x4f0,0x53a)]['particlesTextureSize']!==_0x170a49['particlesTextureSize']&&(_0x30f891=!![]);const _0x28058f=deepMerge(_0x170a49,this[_0x2f6b6d(0x9d,0x7a)]);if(_0x28058f[_0x337cda(0x55b,0x52a)]<0x1)throw new Error(_0x337cda(0x5ec,0x5b5));function _0x2f6b6d(_0x3431a0,_0x2417bf){return _0x38134b(_0x2417bf,_0x3431a0-0x19d);}this['options']=_0x28058f;function _0x337cda(_0x2679bf,_0x25bc74){return _0x20bf04(_0x2679bf,_0x25bc74-0x31e);}this[_0x2f6b6d(0x8f,0x114)]['updateOptions'](_0x170a49),this[_0x2f6b6d(0x91,0x109)]['updateOptions'](_0x170a49),_0x30f891&&(this[_0x2f6b6d(0x91,0xfe)][_0x337cda(0x504,0x550)](),this[_0x2f6b6d(0x91,0xdf)]['createParticlesTextures'](),this[_0x2f6b6d(0x8f,0x105)][_0x2f6b6d(0xea,0xfd)]());}['applyViewerParameters'](_0x5e45ea){this[_0x308ed5(0x6b,0x7a)]=_0x5e45ea;function _0x260be8(_0x4e5865,_0x1d5b0f){return _0x20bf04(_0x1d5b0f,_0x4e5865-0x1c1);}function _0x308ed5(_0x431f73,_0x20e4f7){return _0x38134b(_0x20e4f7,_0x431f73-0x168);}this[_0x308ed5(0x5c,0x18)]['viewerParameters']=_0x5e45ea,this[_0x308ed5(0x5a,0x21)]['viewerParameters']=_0x5e45ea;}[_0x20bf04(0x2a9,0x30a)](){function _0x35da38(_0x179f28,_0x3568b8){return _0x20bf04(_0x179f28,_0x3568b8-0x324);}this['computing'][_0x35da38(0x687,0x62e)](),this['rendering']['destroy']();}}function _0x38134b(_0x292159,_0x2fa9d7){return _0x5860(_0x2fa9d7- -0x2e2,_0x292159);}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x20bf04(0x1ce,0x23e)]['BaseLayer'],_0x5a198a={};_0x5a198a['min']=0x1,_0x5a198a['max']=0x2;const _0x1301e8={};_0x1301e8[_0x38134b(-0x125,-0xe9)]=0x14,_0x1301e8['max']=0x64;const _0x1944ca={};_0x1944ca['particlesTextureSize']=0x64,_0x1944ca['particleHeight']=0x3e8,_0x1944ca[_0x20bf04(0x2fe,0x2d0)]=_0x5a198a;function _0x20bf04(_0x2fc2f8,_0x4e52c9){return _0x5860(_0x4e52c9-0x3a,_0x2fc2f8);}_0x1944ca[_0x20bf04(0x2b5,0x2d3)]=_0x1301e8,_0x1944ca[_0x20bf04(0x245,0x273)]=0x1,_0x1944ca['dropRate']=0.003,_0x1944ca['dropRateBump']=0.001,_0x1944ca['colors']=['rgb(206,255,255)'],_0x1944ca[_0x20bf04(0x25b,0x280)]=![],_0x1944ca['dynamic']=!![];const DEF_OPTIONS=_0x1944ca;class WindLayer extends BaseLayer$1{constructor(_0x444f20={}){_0x444f20={...DEF_OPTIONS,..._0x444f20},super(_0x444f20);function _0x1448a5(_0x313974,_0xf4d4be){return _0x20bf04(_0x313974,_0xf4d4be- -0x1b9);}this[_0x1448a5(0xd8,0x76)](_0x444f20,_0x444f20);}get['layer'](){return this['primitives'];}get['data'](){return this['options']['data'];}set['data'](_0x6929cc){function _0x33db7b(_0x222610,_0x19bff0){return _0x38134b(_0x19bff0,_0x222610- -0x50);}this['options'][_0x33db7b(-0x114,-0xbf)]=_0x6929cc,this['setData'](_0x6929cc);}get['colors'](){function _0x3ce5d7(_0x1e6bb2,_0x54ff38){return _0x38134b(_0x54ff38,_0x1e6bb2-0x14b);}function _0x4468c6(_0x2e94c4,_0x1b7bcb){return _0x20bf04(_0x1b7bcb,_0x2e94c4- -0x273);}return this[_0x3ce5d7(0x4b,0x93)][_0x3ce5d7(0x11f,0x16a)];}set['colors'](_0x3633f5){this['options'][_0x3c6e2a(0x2db,0x32c)]=_0x3633f5;const _0x4d6dfa={};function _0x314c15(_0x36c5d0,_0x5aefd5){return _0x38134b(_0x36c5d0,_0x5aefd5-0x38e);}_0x4d6dfa['colors']=_0x3633f5;function _0x3c6e2a(_0x555c84,_0xce5bbb){return _0x38134b(_0xce5bbb,_0x555c84-0x307);}this['_setOptionsHook'](this[_0x3c6e2a(0x207,0x203)],_0x4d6dfa);}['_mountedHook'](){}[_0x20bf04(0x2be,0x318)](){this['scene']=this['_map'][_0x46b43f(0x12d,0x17d)],this[_0x46b43f(0xe0,0x141)]=this[_0x1c5eb3(0x587,0x505)]['camera'];this['options']['data']&&this['setData'](this['options']['data']);if(!this[_0x46b43f(0x127,0x154)])return;this[_0x46b43f(0x95,0xbd)]={'lonRange':new Cesium$1[(_0x46b43f(0x162,0x193))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x46b43f(0x12d,0xe7)]['mode']},this[_0x46b43f(0xbd,0xb0)](),this[_0x1c5eb3(0x4c7,0x512)]=new WindParticleSystem(this[_0x1c5eb3(0x54e,0x58f)]['context'],this['windData'],this['options'],this['viewerParameters'],this[_0x46b43f(0x12d,0xbd)]),this[_0x1c5eb3(0x662,0x5eb)]=this['particleSystem']['getPrimitives'](),this['primitives'][_0x46b43f(0x155,0xee)](_0x3550f8=>{function _0x362024(_0x4b60e6,_0x35065c){return _0x1c5eb3(_0x4b60e6,_0x35065c- -0x16a);}this[_0x362024(0x48f,0x425)]['primitives']['add'](_0x3550f8);}),this['camera']['percentageChanged']=0.01;function _0x1c5eb3(_0x53aaa4,_0x4c5000){return _0x20bf04(_0x53aaa4,_0x4c5000-0x2d8);}function _0x46b43f(_0x1aadb2,_0x22fb38){return _0x38134b(_0x22fb38,_0x1aadb2-0x192);}this['camera'][_0x46b43f(0xd1,0x110)]['addEventListener'](this['updateViewerParameters'][_0x1c5eb3(0x51d,0x594)](this)),this[_0x46b43f(0x12d,0xd4)][_0x46b43f(0xb3,0x57)]['addEventListener'](this[_0x1c5eb3(0x537,0x51f)]['bind'](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){this['camera'][_0x2796d7(0x28c,0x30e)]['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x2796d7(_0x5de7d0,_0x52d8d3){return _0x20bf04(_0x52d8d3,_0x5de7d0-0x31);}this[_0x3807a7(0x656,0x663)][_0x2796d7(0x26e,0x28e)][_0x3807a7(0x647,0x658)](this[_0x2796d7(0x278,0x259)]['bind'](this));function _0x3807a7(_0x24bab2,_0xa93a01){return _0x38134b(_0x24bab2,_0xa93a01-0x6c8);}window['removeEventListener'](_0x3807a7(0x5a6,0x612),this['updateViewerParameters']['bind'](this)),this[_0x2796d7(0x344,0x3cb)]&&(this[_0x2796d7(0x344,0x38b)][_0x2796d7(0x310,0x30b)](_0x1357a0=>{function _0x4414ec(_0x3396e4,_0x38ba57){return _0x2796d7(_0x38ba57- -0x97,_0x3396e4);}function _0x1c5b5a(_0x433c51,_0xef7c94){return _0x3807a7(_0xef7c94,_0x433c51- -0x78e);}this['scene'][_0x1c5b5a(-0xcf,-0xfe)][_0x1c5b5a(-0x16b,-0x105)](_0x1357a0);}),delete this[_0x2796d7(0x344,0x2cd)]),this[_0x3807a7(0x636,0x5e6)]&&(this['particleSystem'][_0x3807a7(0x6e7,0x6b6)](),delete this[_0x3807a7(0x61a,0x5e6)]);}['setData'](_0x1cff5b,_0x1684a1){this[_0x5ee369(0x32d,0x388)]=this['processWindData'](_0x1cff5b);if(_0x1684a1){this[_0x5ee369(0x379,0x2fe)](),this['_addedHook']();return;}function _0x321c9c(_0x8a1580,_0x42a936){return _0x20bf04(_0x8a1580,_0x42a936-0x27e);}function _0x5ee369(_0x487ddf,_0x432cf4){return _0x38134b(_0x487ddf,_0x432cf4-0x3f3);}this['particleSystem']?(this['particleSystem'][_0x321c9c(0x40d,0x48e)][_0x5ee369(0x36a,0x33c)](this['windData']),this[_0x321c9c(0x5a8,0x535)]['requestRender']()):this['_addedHook']();}[_0x38134b(-0x7e,-0xed)](_0xc959e9,_0x1cada4){function _0x2dcf7a(_0x2039ca,_0x1a9a47){return _0x20bf04(_0x1a9a47,_0x2039ca- -0x97);}function _0x2c5930(_0xcf3c92,_0x42eec4){return _0x20bf04(_0xcf3c92,_0x42eec4- -0x33a);}this['particleSystem']&&(this[_0x2c5930(-0x113,-0x100)][_0x2dcf7a(0x1cc,0x1b9)](_0x1cada4),this['scene'][_0x2c5930(-0x44,-0xb9)]());}['processWindData'](_0x10ddef){var _0x48e686,_0x3a833a;const _0x3f6322={..._0x10ddef};function _0x480572(_0x3563fc,_0x3ac927){return _0x38134b(_0x3ac927,_0x3563fc-0x3d9);}const _0x4a8e80=_0x3f6322;!_0x4a8e80[_0x480572(0x34f,0x2f5)]&&_0x4a8e80['rows']&&(_0x4a8e80[_0x480572(0x34f,0x3d7)]=_0x4a8e80['rows']);!_0x4a8e80['width']&&_0x4a8e80[_0x55da64(0x3e,0x3e)]&&(_0x4a8e80['width']=_0x4a8e80[_0x480572(0x2df,0x2fe)]);!_0x4a8e80['bounds']&&(_0x4a8e80['bounds']={'west':_0x4a8e80['xmin'],'south':_0x4a8e80['ymin'],'east':_0x4a8e80['xmax'],'north':_0x4a8e80[_0x480572(0x3c9,0x3a3)]});function _0x55da64(_0x598994,_0x16636c){return _0x38134b(_0x16636c,_0x598994-0x138);}if(!_0x4a8e80['u']){const _0x391f94={};_0x391f94['array']=_0x10ddef['udata'],_0x391f94['min']=_0x10ddef[_0x480572(0x39e,0x361)],_0x391f94['max']=_0x10ddef['umax'],_0x4a8e80['u']=_0x391f94;}if(!_0x4a8e80['v']){const _0x58f9cb={};_0x58f9cb['array']=_0x10ddef['vdata'],_0x58f9cb[_0x480572(0x2f0,0x2e3)]=_0x10ddef[_0x480572(0x383,0x317)],_0x58f9cb[_0x480572(0x305,0x2cd)]=_0x10ddef['vmax'],_0x4a8e80['v']=_0x58f9cb;}if(((_0x48e686=_0x4a8e80['speed'])===null||_0x48e686===void 0x0?void 0x0:_0x48e686['min'])===undefined||((_0x3a833a=_0x4a8e80[_0x55da64(0x10e,0x193)])===null||_0x3a833a===void 0x0?void 0x0:_0x3a833a['max'])===undefined||_0x4a8e80['speed']['array']===undefined){const _0x3ede1f={'array':new Float32Array(_0x4a8e80['u']['array'][_0x55da64(0x67,0x51)]),'min':Number[_0x55da64(0xdf,0x84)],'max':Number['MIN_VALUE']};for(let _0x514de4=0x0;_0x514de4<_0x4a8e80['u']['array'][_0x480572(0x308,0x296)];_0x514de4++){_0x3ede1f[_0x55da64(0xd6,0x10f)][_0x514de4]=Math['sqrt'](_0x4a8e80['u'][_0x55da64(0xd6,0xfd)][_0x514de4]*_0x4a8e80['u']['array'][_0x514de4]+_0x4a8e80['v']['array'][_0x514de4]*_0x4a8e80['v'][_0x55da64(0xd6,0x15d)][_0x514de4]),_0x3ede1f['array'][_0x514de4]!==0x0&&(_0x3ede1f['min']=Math['min'](_0x3ede1f['min'],_0x3ede1f['array'][_0x514de4]),_0x3ede1f['max']=Math['max'](_0x3ede1f[_0x480572(0x305,0x34a)],_0x3ede1f['array'][_0x514de4]));}_0x4a8e80['speed']=_0x3ede1f;}return _0x4a8e80;}[_0x38134b(-0x9d,-0xd5)](){var _0x2154d7;const _0x6811e7=this[_0x417c38(0xa,0x2d)],_0x133d21=_0x6811e7['canvas'],_0x4da1da={};_0x4da1da['x']=0x0,_0x4da1da['y']=0x0;const _0x452940={};_0x452940['x']=0x0,_0x452940['y']=_0x133d21['clientHeight'];const _0x3aa19a={};_0x3aa19a['x']=_0x133d21['clientWidth'],_0x3aa19a['y']=0x0;const _0x408804={};_0x408804['x']=_0x133d21['clientWidth'],_0x408804['y']=_0x133d21['clientHeight'];const _0x2d6042=[_0x4da1da,_0x452940,_0x3aa19a,_0x408804];function _0x5d178c(_0x32d88a,_0x2dc58c){return _0x38134b(_0x32d88a,_0x2dc58c-0x167);}let _0x94822d=0xb4,_0x542d34=-0xb4,_0x5e2261=0x5a;function _0x417c38(_0xf4fc54,_0xa6142d){return _0x38134b(_0xf4fc54,_0xa6142d-0x92);}let _0x27ee91=-0x5a,_0x5cca65=![];for(const _0x3537d1 of _0x2d6042){const _0x20d0db=_0x6811e7[_0x5d178c(0xdb,0xb5)][_0x417c38(0x9,-0x4a)](new Cesium$1[(_0x417c38(-0x4,0x62))](_0x3537d1['x'],_0x3537d1['y']),_0x6811e7['globe'][_0x417c38(-0x4,0xa)]);if(!_0x20d0db){_0x5cca65=!![];break;}const _0x536016=_0x6811e7[_0x5d178c(0xcf,0xc6)][_0x417c38(-0x5a,0xa)][_0x417c38(0xa2,0x25)](_0x20d0db),_0x418dc7=Cesium$1['Math'][_0x5d178c(0x168,0x158)](_0x536016['longitude']),_0x414e38=Cesium$1[_0x5d178c(0xca,0xd8)]['toDegrees'](_0x536016[_0x417c38(0x17,-0x5c)]);_0x94822d=Math['min'](_0x94822d,_0x418dc7),_0x542d34=Math[_0x5d178c(0x1d,0x93)](_0x542d34,_0x418dc7),_0x5e2261=Math[_0x417c38(-0x44,-0x57)](_0x5e2261,_0x414e38),_0x27ee91=Math[_0x5d178c(0x14,0x93)](_0x27ee91,_0x414e38);}if(!_0x5cca65){const _0x1432ec=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x5d178c(0x145,0xe6)][_0x417c38(-0x53,-0x2a)],_0x94822d),Math['min'](this['windData'][_0x5d178c(0x116,0xe6)]['east'],_0x542d34)),_0x250e5a=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x5d178c(0x179,0x162)],_0x5e2261),Math['min'](this['windData']['bounds'][_0x5d178c(0x105,0xfd)],_0x27ee91)),_0x5a3474=(_0x1432ec['y']-_0x1432ec['x'])*0.05,_0x521732=(_0x250e5a['y']-_0x250e5a['x'])*0.05;_0x1432ec['x']=Math['max'](this['windData']['bounds'][_0x417c38(-0x2,-0x2a)],_0x1432ec['x']-_0x5a3474),_0x1432ec['y']=Math['min'](this['windData'][_0x5d178c(0x160,0xe6)]['east'],_0x1432ec['y']+_0x5a3474),_0x250e5a['x']=Math[_0x5d178c(0x9c,0x93)](this['windData'][_0x417c38(0x4e,0x11)]['south'],_0x250e5a['x']-_0x521732),_0x250e5a['y']=Math['min'](this[_0x417c38(-0x8,0x27)]['bounds'][_0x5d178c(0x171,0xfd)],_0x250e5a['y']+_0x521732),this[_0x5d178c(0x62,0x6a)]['lonRange']=_0x1432ec,this[_0x417c38(-0x91,-0x6b)][_0x417c38(0x5a,0x6c)]=_0x250e5a;const _0x2b74c9=this[_0x417c38(0x9b,0x27)]['bounds']['east']-this['windData']['bounds']['west'],_0x1eec5e=this['windData']['bounds']['north']-this['windData']['bounds'][_0x5d178c(0xf6,0x162)],_0x4a3229=(_0x1432ec['y']-_0x1432ec['x'])/_0x2b74c9,_0x13435d=(_0x250e5a['y']-_0x250e5a['x'])/_0x1eec5e,_0x553a10=Math[_0x5d178c(0x2b,0x7e)](_0x4a3229,_0x13435d),_0x5d4a21=0x3e8*_0x553a10;_0x5d4a21>0x0&&(this[_0x417c38(-0x8b,-0x6b)][_0x5d178c(0x109,0xad)]=Math['max'](0x0,Math['min'](0x3e8,_0x5d4a21)));}this['viewerParameters'][_0x417c38(-0x96,-0x75)]=this[_0x5d178c(0x81,0x102)][_0x417c38(0x49,0x73)],(_0x2154d7=this['particleSystem'])===null||_0x2154d7===void 0x0||_0x2154d7[_0x5d178c(0x1a6,0x12d)](this['viewerParameters']);}[_0x20bf04(0x1db,0x21a)](_0x5e5615,_0x434590){const {bounds:_0x424933,width:_0x25da71,height:_0x3c6616,u:_0x42f4a7,v:_0x16c7e1,speed:_0x4caed0}=this[_0x2f9f17(0x23,0x7a)],{flipY:_0x2678ae}=this['options'];function _0x2b8c55(_0x48e622,_0x35c683){return _0x38134b(_0x35c683,_0x48e622-0x38a);}if(_0x5e5615<_0x424933['west']||_0x5e5615>_0x424933['east']||_0x434590<_0x424933['south']||_0x434590>_0x424933['north'])return null;const _0x53e36c=(_0x5e5615-_0x424933['west'])/(_0x424933['east']-_0x424933[_0x2f9f17(-0x2e,-0x6d)])*(_0x25da71-0x1);let _0x1859dd=(_0x434590-_0x424933['south'])/(_0x424933['north']-_0x424933['south'])*(_0x3c6616-0x1);_0x2678ae&&(_0x1859dd=_0x3c6616-0x1-_0x1859dd);const _0xa130a2=Math[_0x2b8c55(0x2be,0x339)](_0x53e36c),_0x5a6f4e=Math['floor'](_0x1859dd),_0x149064=Math['floor'](_0x53e36c),_0x4635f8=Math['min'](_0x149064+0x1,_0x25da71-0x1),_0x3c8539=Math[_0x2f9f17(-0x3e,0x22)](_0x1859dd),_0x2bbd31=Math[_0x2f9f17(-0x5b,-0x33)](_0x3c8539+0x1,_0x3c6616-0x1),_0x39ddfd=_0x53e36c-_0x149064,_0x22731c=_0x1859dd-_0x3c8539,_0x123bd8=_0x5a6f4e*_0x25da71+_0xa130a2,_0x14fa48=_0x3c8539*_0x25da71+_0x149064,_0x56fe8c=_0x3c8539*_0x25da71+_0x4635f8,_0xcf96c9=_0x2bbd31*_0x25da71+_0x149064,_0x24f73f=_0x2bbd31*_0x25da71+_0x4635f8,_0x13a6fb=_0x42f4a7['array'][_0x14fa48],_0x3f57b1=_0x42f4a7[_0x2b8c55(0x328,0x3a0)][_0x56fe8c],_0x2c08f2=_0x42f4a7[_0x2b8c55(0x328,0x2c5)][_0xcf96c9],_0x183e3d=_0x42f4a7[_0x2f9f17(0x2c,0x72)][_0x24f73f],_0x3c3f05=(0x1-_0x39ddfd)*(0x1-_0x22731c)*_0x13a6fb+_0x39ddfd*(0x1-_0x22731c)*_0x3f57b1+(0x1-_0x39ddfd)*_0x22731c*_0x2c08f2+_0x39ddfd*_0x22731c*_0x183e3d,_0x4c939a=_0x16c7e1['array'][_0x14fa48],_0x58a2a5=_0x16c7e1['array'][_0x56fe8c],_0x2f2f7c=_0x16c7e1['array'][_0xcf96c9],_0x3efb1b=_0x16c7e1['array'][_0x24f73f],_0x3f4ca4=(0x1-_0x39ddfd)*(0x1-_0x22731c)*_0x4c939a+_0x39ddfd*(0x1-_0x22731c)*_0x58a2a5+(0x1-_0x39ddfd)*_0x22731c*_0x2f2f7c+_0x39ddfd*_0x22731c*_0x3efb1b,_0x1b3881=Math['sqrt'](_0x3c3f05*_0x3c3f05+_0x3f4ca4*_0x3f4ca4),_0x2f60af={};_0x2f60af['u']=_0x42f4a7['array'][_0x123bd8],_0x2f60af['v']=_0x16c7e1['array'][_0x123bd8],_0x2f60af['speed']=_0x4caed0['array'][_0x123bd8];const _0x190926={};_0x190926['u']=_0x3c3f05;function _0x2f9f17(_0x329d0e,_0x450f24){return _0x20bf04(_0x450f24,_0x329d0e- -0x28e);}_0x190926['v']=_0x3f4ca4,_0x190926['speed']=_0x1b3881;const _0x36a912={};return _0x36a912['original']=_0x2f60af,_0x36a912[_0x2f9f17(-0x7a,-0x66)]=_0x190926,_0x36a912;}}mars3d__namespace['LayerUtil']['register'](_0x20bf04(0x2bf,0x25d),WindLayer),mars3d__namespace[_0x20bf04(0x1d7,0x23e)][_0x38134b(-0x134,-0xdb)]=WindLayer;class CanvasParticle{constructor(){this[_0x232ec3(-0x33,-0x57)]=null,this['lat']=null;function _0x232ec3(_0x94d2cb,_0x433893){return _0x38134b(_0x433893,_0x94d2cb-0x33);}this['tlng']=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x50c2b7 in this){delete this[_0x50c2b7];}}}class CanvasWindField{constructor(_0x45762e){function _0x73ae8a(_0xde614f,_0x5a7e57){return _0x38134b(_0x5a7e57,_0xde614f-0x321);}this[_0x73ae8a(0x31e,0x320)](_0x45762e);}get[_0x38134b(-0xdd,-0xe7)](){return this['_speedRate'];}set['speedRate'](_0x1bd5f6){function _0x4fd81a(_0x288917,_0x2695b8){return _0x20bf04(_0x288917,_0x2695b8- -0x398);}this['_speedRate']=(0x64-(_0x1bd5f6>0x63?0x63:_0x1bd5f6))*0x64;function _0x19e9fa(_0x113021,_0x985fde){return _0x20bf04(_0x985fde,_0x113021-0x19d);}this[_0x4fd81a(-0x1e6,-0x168)]=[(this[_0x4fd81a(-0x154,-0xe4)]-this[_0x19e9fa(0x425,0x41e)])/this['_speedRate'],(this[_0x4fd81a(-0x1a,-0x8c)]-this[_0x19e9fa(0x3b0,0x343)])/this[_0x19e9fa(0x3fc,0x3b5)]];}get[_0x38134b(-0x16,-0x71)](){function _0x3d5212(_0x65ac5b,_0x5eb201){return _0x38134b(_0x5eb201,_0x65ac5b- -0xdc);}return this[_0x3d5212(-0x187,-0x114)];}set[_0x20bf04(0x30e,0x2ab)](_0x5ef3e0){this['_maxAge']=_0x5ef3e0;}[_0x38134b(-0x67,-0x3)](_0x41ba14){this[_0x154955(0x3ba,0x394)]=_0x41ba14;function _0x154955(_0x4cf43c,_0x5e7768){return _0x20bf04(_0x4cf43c,_0x5e7768-0x178);}function _0x4cb563(_0x4f7634,_0x4654fe){return _0x38134b(_0x4654fe,_0x4f7634-0x68d);}this[_0x154955(0x471,0x423)]=_0x41ba14[_0x154955(0x3ce,0x423)]||0x78,this[_0x4cb563(0x5a6,0x55c)]=_0x41ba14['speedRate']||0x32,this[_0x154955(0x419,0x407)]=[];const _0x31e5b1=_0x41ba14[_0x154955(0x3fd,0x416)]||0x1000;for(let _0x620f20=0x0;_0x620f20<_0x31e5b1;_0x620f20++){const _0x8970f8=this[_0x4cb563(0x5e7,0x61b)](new CanvasParticle());this['particles']['push'](_0x8970f8);}}['setDate'](_0x516aa1){this['rows']=_0x516aa1['rows'],this[_0x191794(0x3f4,0x3a2)]=_0x516aa1['cols'],this['xmin']=_0x516aa1[_0x37e00d(0x5c2,0x5bc)],this[_0x37e00d(0x5d2,0x5e8)]=_0x516aa1['xmax'],this[_0x191794(0x3e5,0x3ef)]=_0x516aa1[_0x37e00d(0x4ca,0x547)],this[_0x37e00d(0x6ac,0x640)]=_0x516aa1['ymax'];function _0x37e00d(_0x4f3d3a,_0x469980){return _0x20bf04(_0x4f3d3a,_0x469980-0x334);}this[_0x191794(0x430,0x472)]=[];const _0x316574=_0x516aa1['udata'],_0x49fd86=_0x516aa1[_0x191794(0x485,0x491)];let _0x335162=![];function _0x191794(_0x3e99c3,_0x18b54e){return _0x20bf04(_0x18b54e,_0x3e99c3-0x1d2);}_0x316574[_0x37e00d(0x516,0x57f)]===this['rows']&&_0x316574[0x0]['length']===this['cols']&&(_0x335162=!![]);let _0x682e8a=0x0,_0x204312=null,_0x25d91e=null;for(let _0x115482=0x0;_0x115482<this['rows'];_0x115482++){_0x204312=[];for(let _0x3ddd1e=0x0;_0x3ddd1e<this[_0x191794(0x3f4,0x445)];_0x3ddd1e++,_0x682e8a++){_0x335162?_0x25d91e=this[_0x191794(0x3fb,0x432)](_0x316574[_0x115482][_0x3ddd1e],_0x49fd86[_0x115482][_0x3ddd1e]):_0x25d91e=this[_0x191794(0x3fb,0x429)](_0x316574[_0x682e8a],_0x49fd86[_0x682e8a]),_0x204312[_0x191794(0x47b,0x4cb)](_0x25d91e);}this[_0x37e00d(0x54f,0x592)]['push'](_0x204312);}this['options'][_0x37e00d(0x6c5,0x648)]&&this[_0x37e00d(0x5b4,0x592)][_0x37e00d(0x608,0x610)]();}['clear'](){delete this['rows'],delete this[_0x11ff20(0x20d,0x18a)],delete this['xmin'],delete this['xmax'];function _0x11ff20(_0x5179c8,_0x145ca3){return _0x20bf04(_0x145ca3,_0x5179c8- -0x15);}delete this[_0x11ff20(0x1fe,0x250)],delete this[_0x11ff20(0x2f7,0x369)];function _0x2fd01e(_0xce39cd,_0x56bb6d){return _0x20bf04(_0xce39cd,_0x56bb6d-0x1b3);}delete this['grid'],delete this[_0x2fd01e(0x482,0x442)];}[_0x38134b(0x1a,-0x1d)](_0x38c5db,_0x3179c8){function _0x5f4306(_0x4d2c20,_0xfb1e61){return _0x38134b(_0x4d2c20,_0xfb1e61-0xb9);}const _0x167a05=(_0x38c5db-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x5f4306(-0x99,-0x41)]-0x1),_0x3299df=(this['ymax']-_0x3179c8)/(this['ymax']-this['ymin'])*(this[_0x32d45d(0x49f,0x474)]-0x1);function _0x32d45d(_0x44f210,_0x2b7ea1){return _0x38134b(_0x44f210,_0x2b7ea1-0x4b5);}return[_0x167a05,_0x3299df];}[_0x38134b(-0xa0,-0xb0)](_0x18585b,_0x2ca90d){function _0xf8fa97(_0x215eb1,_0x450b59){return _0x38134b(_0x450b59,_0x215eb1-0x4af);}if(_0x18585b<0x0||_0x18585b>=this[_0x421096(-0x224,-0x1d7)]||_0x2ca90d>=this['rows'])return[0x0,0x0,0x0];function _0x421096(_0x4cdc3a,_0x2395d0){return _0x38134b(_0x4cdc3a,_0x2395d0- -0xdd);}const _0x8273e=Math['floor'](_0x18585b),_0x513ddb=Math['floor'](_0x2ca90d);if(_0x8273e===_0x18585b&&_0x513ddb===_0x2ca90d)return this[_0xf8fa97(0x3f1,0x3f3)][_0x2ca90d][_0x18585b];const _0x5bb748=_0x8273e+0x1,_0x2405ac=_0x513ddb+0x1,_0x53833d=this['getUVByXY'](_0x8273e,_0x513ddb),_0x4a060e=this['getUVByXY'](_0x5bb748,_0x513ddb),_0x4eafe1=this[_0x421096(-0x166,-0x18d)](_0x8273e,_0x2405ac),_0x5784f6=this['getUVByXY'](_0x5bb748,_0x2405ac);let _0x15d66a=null;try{_0x15d66a=this['_bilinearInterpolation'](_0x18585b-_0x8273e,_0x2ca90d-_0x513ddb,_0x53833d,_0x4a060e,_0x4eafe1,_0x5784f6);}catch(_0x392b00){console['log'](_0x18585b,_0x2ca90d);}return _0x15d66a;}['_bilinearInterpolation'](_0x5ba5de,_0x5ea1de,_0x426cb0,_0x3c3b12,_0x2508ff,_0x592ab3){const _0x465d7a=0x1-_0x5ba5de,_0x122d7b=0x1-_0x5ea1de,_0x505189=_0x465d7a*_0x122d7b,_0x194a30=_0x5ba5de*_0x122d7b,_0x4e7850=_0x465d7a*_0x5ea1de,_0x4777ef=_0x5ba5de*_0x5ea1de,_0x167080=_0x426cb0[0x0]*_0x505189+_0x3c3b12[0x0]*_0x194a30+_0x2508ff[0x0]*_0x4e7850+_0x592ab3[0x0]*_0x4777ef,_0x365349=_0x426cb0[0x1]*_0x505189+_0x3c3b12[0x1]*_0x194a30+_0x2508ff[0x1]*_0x4e7850+_0x592ab3[0x1]*_0x4777ef;return this['_calcUV'](_0x167080,_0x365349);}[_0x38134b(-0xdf,-0xf3)](_0x42f71f,_0x2802a8){return[+_0x42f71f,+_0x2802a8,Math['sqrt'](_0x42f71f*_0x42f71f+_0x2802a8*_0x2802a8)];}['getUVByPoint'](_0x5f0677,_0x41501f){if(!this['isInExtent'](_0x5f0677,_0x41501f))return null;const _0x15a72b=this['toGridXY'](_0x5f0677,_0x41501f),_0x52f867=this['getUVByXY'](_0x15a72b[0x0],_0x15a72b[0x1]);return _0x52f867;}['isInExtent'](_0x258e44,_0x25e51f){function _0x2af540(_0x3d5995,_0x13aa4b){return _0x20bf04(_0x3d5995,_0x13aa4b-0x24b);}return _0x258e44>=this[_0x2af540(0x475,0x4d3)]&&_0x258e44<=this['xmax']&&_0x25e51f>=this['ymin']&&_0x25e51f<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x216ffb=fRandomByfloat(this[_0x58b7b0(0x4fd,0x578)],this[_0x58b7b0(0x529,0x4a3)]),_0x1a68af=fRandomByfloat(this['ymin'],this['ymax']),_0xd87e70={};_0xd87e70['lat']=_0x1a68af;function _0x58b7b0(_0x3f833c,_0xab65ca){return _0x20bf04(_0xab65ca,_0x3f833c-0x275);}function _0x11cd27(_0x3d38fc,_0x54468e){return _0x20bf04(_0x3d38fc,_0x54468e-0x1d9);}return _0xd87e70['lng']=_0x216ffb,_0xd87e70;}['getParticles'](){function _0x55f1d9(_0x133a7c,_0x2f6d22){return _0x38134b(_0x2f6d22,_0x133a7c-0x668);}function _0x21b0e2(_0x458256,_0x5d12f0){return _0x38134b(_0x458256,_0x5d12f0-0x175);}let _0x2c8233,_0x1d69fd,_0x307695;for(let _0x1e76d1=0x0,_0x35b1a9=this['particles']['length'];_0x1e76d1<_0x35b1a9;_0x1e76d1++){let _0x398778=this[_0x55f1d9(0x5db,0x61a)][_0x1e76d1];_0x398778['age']<=0x0&&(_0x398778=this['_randomParticle'](_0x398778));if(_0x398778['age']>0x0){const _0x37b924=_0x398778[_0x21b0e2(0xb2,0x103)],_0x424979=_0x398778[_0x55f1d9(0x569,0x4e4)];_0x307695=this[_0x21b0e2(0x1e,0x7f)](_0x37b924,_0x424979),_0x307695?(_0x2c8233=_0x37b924+this[_0x55f1d9(0x57c,0x597)][0x0]*_0x307695[0x0],_0x1d69fd=_0x424979+this[_0x55f1d9(0x57c,0x532)][0x1]*_0x307695[0x1],_0x398778[_0x21b0e2(0x162,0x10f)]=_0x37b924,_0x398778[_0x55f1d9(0x56f,0x4e7)]=_0x424979,_0x398778['tlng']=_0x2c8233,_0x398778[_0x55f1d9(0x569,0x5aa)]=_0x1d69fd,_0x398778['speed']=_0x307695[0x2],_0x398778['age']--):_0x398778[_0x55f1d9(0x617,0x5a9)]=0x0;}}return this['particles'];}[_0x38134b(-0x6d,-0xa6)](_0x1eea92){let _0x4c14b6,_0x3f7f07;for(let _0x47f7b2=0x0;_0x47f7b2<0x1e;_0x47f7b2++){_0x4c14b6=this['getRandomLatLng'](),_0x3f7f07=this['getUVByPoint'](_0x4c14b6[_0x1acbc5(-0x97,-0x74)],_0x4c14b6['lat']);if(_0x3f7f07&&_0x3f7f07[0x2]>0x0)break;}if(!_0x3f7f07)return _0x1eea92;const _0x16a021=_0x4c14b6[_0x5aff20(0x335,0x2d4)]+this[_0x5aff20(0x2c4,0x24e)][0x0]*_0x3f7f07[0x0],_0x3a4624=_0x4c14b6[_0x1acbc5(-0x12a,-0x183)]+this['_calc_speedRate'][0x1]*_0x3f7f07[0x1];_0x1eea92['lng']=_0x4c14b6['lng'];function _0x5aff20(_0xc27577,_0x260dca){return _0x20bf04(_0xc27577,_0x260dca-0x1e);}_0x1eea92['lat']=_0x4c14b6[_0x1acbc5(-0x12a,-0x134)],_0x1eea92['tlng']=_0x16a021,_0x1eea92['tlat']=_0x3a4624,_0x1eea92[_0x5aff20(0x32f,0x2e9)]=Math[_0x1acbc5(-0xd1,-0x92)](Math[_0x5aff20(0x24a,0x22d)]()*this[_0x5aff20(0x34a,0x2c9)]),_0x1eea92[_0x1acbc5(-0x5b,0x24)]=_0x3f7f07[0x2];function _0x1acbc5(_0x18d2d8,_0x505d52){return _0x38134b(_0x505d52,_0x18d2d8- -0x31);}return _0x1eea92;}[_0x38134b(0x4a,-0x12)](){for(const _0x2b1cec in this){delete this[_0x2b1cec];}}}function _0x5860(_0x1ab9b6,_0x1aaf1c){const _0x4a12d8=_0x4a12();return _0x5860=function(_0x5860ef,_0x5c64e4){_0x5860ef=_0x5860ef-0x1d2;let _0x3cca0c=_0x4a12d8[_0x5860ef];return _0x3cca0c;},_0x5860(_0x1ab9b6,_0x1aaf1c);}function fRandomByfloat(_0x486e56,_0x391f2f){return _0x486e56+Math['random']()*(_0x391f2f-_0x486e56);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x20bf04(0x297,0x23e)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x4ff607={}){super(_0x4ff607);function _0x381e6c(_0x392616,_0x48b923){return _0x20bf04(_0x392616,_0x48b923- -0xcf);}this[_0x381e6c(0x1af,0x160)](_0x4ff607),this['canvas']=null;function _0x183046(_0xdda282,_0x5f54db){return _0x20bf04(_0xdda282,_0x5f54db-0x395);}_0x4ff607[_0x183046(0x600,0x685)]&&_0x4ff607[_0x183046(0x6f5,0x6aa)]&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x4ff607));}['_setOptionsHook'](_0x4cf603,_0x515f1b){this['frameTime']=0x3e8/(_0x4cf603['frameRate']||0xa),this[_0x3de8d9(0x29f,0x25f)]=this['options']['pointerEvents']??![];function _0x3de8d9(_0x50dc72,_0x25ee54){return _0x38134b(_0x25ee54,_0x50dc72-0x2aa);}this['color']=_0x4cf603[_0x2c0f98(0x369,0x39a)]||_0x3de8d9(0x1a6,0x1d1),this['lineWidth']=_0x4cf603[_0x3de8d9(0x25e,0x267)]||0x1,this['fixedHeight']=_0x4cf603[_0x3de8d9(0x22b,0x21c)]??0x0,this['reverseY']=_0x4cf603['reverseY']??![];function _0x2c0f98(_0x177dd0,_0x14de63){return _0x38134b(_0x177dd0,_0x14de63-0x446);}this['windField']&&this['windField'][_0x2c0f98(0x3fc,0x443)](_0x4cf603);}get[_0x20bf04(0x242,0x23e)](){return this['canvas'];}get['canvasWidth'](){function _0x24d416(_0x5b17f6,_0x98ac4c){return _0x38134b(_0x98ac4c,_0x5b17f6-0x2cc);}function _0x21b8aa(_0x3ccbf3,_0x272f65){return _0x20bf04(_0x272f65,_0x3ccbf3- -0x74);}return this['_map'][_0x24d416(0x267,0x290)]['canvas'][_0x21b8aa(0x24d,0x2a6)];}get['canvasHeight'](){return this['_map']['scene']['canvas']['clientHeight'];}get[_0x20bf04(0x32b,0x306)](){return this['_pointerEvents'];}set['pointerEvents'](_0x1c8dd0){function _0x55dd4c(_0x22f170,_0x104470){return _0x38134b(_0x104470,_0x22f170-0x164);}this['_pointerEvents']=_0x1c8dd0;function _0x1a4931(_0x5085c1,_0x5aa1bd){return _0x20bf04(_0x5085c1,_0x5aa1bd- -0x36);}if(!this['canvas'])return;_0x1c8dd0?this[_0x1a4931(0x1e3,0x25d)][_0x1a4931(0x233,0x1e8)][_0x55dd4c(0xb0,0x91)]='all':this['canvas']['style'][_0x1a4931(0x274,0x232)]='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x3c0290){this[_0x33290e(-0xd4,-0x14e)][_0x33290e(-0x52,-0xac)]=_0x3c0290;function _0x9b5aed(_0x44368b,_0x52e0be){return _0x38134b(_0x44368b,_0x52e0be-0x547);}function _0x33290e(_0x1c33d4,_0x290a82){return _0x38134b(_0x290a82,_0x1c33d4-0x2c);}clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x20bf04(0x2ac,0x235)](){function _0x43a843(_0x5748ee,_0x4a4deb){return _0x20bf04(_0x4a4deb,_0x5748ee- -0x3a5);}function _0x214947(_0xa33134,_0x1c7c6d){return _0x20bf04(_0x1c7c6d,_0xa33134-0x133);}return this[_0x214947(0x34f,0x2e3)][_0x214947(0x368,0x336)];}set[_0x20bf04(0x265,0x235)](_0x11b5b1){function _0x43f07d(_0xcabc79,_0x1a989c){return _0x38134b(_0xcabc79,_0x1a989c-0x523);}this[_0x43f07d(0x42d,0x423)][_0x43f07d(0x444,0x43c)]=_0x11b5b1;function _0x522048(_0x2be9ae,_0x40bcdd){return _0x38134b(_0x40bcdd,_0x2be9ae- -0x74);}this['windField']&&(this[_0x522048(-0xe3,-0xa2)]['speedRate']=_0x11b5b1);}get['maxAge'](){return this['options']['maxAge'];}set[_0x20bf04(0x26f,0x2ab)](_0x177fe1){function _0x228f5e(_0x147568,_0x30716c){return _0x20bf04(_0x30716c,_0x147568- -0x79);}function _0x1a633a(_0xde6bef,_0x498dfd){return _0x38134b(_0x498dfd,_0xde6bef-0x314);}this['options'][_0x228f5e(0x232,0x299)]=_0x177fe1,this[_0x1a633a(0x2a5,0x2cc)]&&(this['windField']['maxAge']=_0x177fe1);}get['data'](){return this['windData'];}set[_0x38134b(-0xf9,-0xc4)](_0x90df50){function _0x1b320e(_0x586167,_0x58a0e8){return _0x38134b(_0x58a0e8,_0x586167-0x57);}this[_0x1b320e(-0x2b,0x25)](_0x90df50);}get['rectangle'](){function _0x592dad(_0x5f4a3d,_0x5d7f1b){return _0x20bf04(_0x5f4a3d,_0x5d7f1b- -0x3b5);}let _0x2bfadf=this[_0x1f05eb(-0x6c,-0xa0)][_0x1f05eb(-0x95,-0x81)],_0x5f411d=this[_0x592dad(-0xde,-0x104)][_0x1f05eb(-0x69,-0xa7)],_0xe31986=this[_0x592dad(-0x153,-0x104)]['ymin'],_0x2e683c=this['windData'][_0x1f05eb(-0x11,-0x39)];_0x5f411d>=0x167&&_0x2bfadf===0x0&&(_0x2bfadf=-0xb4,_0x5f411d=0xb4);_0x2bfadf=Math[_0x1f05eb(-0xd5,-0x5d)](_0x2bfadf,-0xb4);function _0x1f05eb(_0x4b7292,_0x3cdf6d){return _0x20bf04(_0x3cdf6d,_0x4b7292- -0x31d);}return _0x5f411d=Math['min'](_0x5f411d,0xb4),_0xe31986=Math['max'](_0xe31986,-0x5a),_0x2e683c=Math['min'](_0x2e683c,0x5a),Cesium['Rectangle']['fromDegrees'](_0x2bfadf,_0xe31986,_0x5f411d,_0x2e683c);}['_showHook'](_0xc2221f){function _0x5ebbfb(_0x17165c,_0xdac34f){return _0x20bf04(_0xdac34f,_0x17165c- -0x265);}function _0x4f098e(_0x1537cf,_0x1a9e6d){return _0x20bf04(_0x1537cf,_0x1a9e6d- -0x343);}_0xc2221f?this['_addedHook']():(this[_0x5ebbfb(0x4c,0xab)]&&(this[_0x5ebbfb(-0x49,-0xcc)]['data']=this[_0x4f098e(-0x108,-0x92)]),this[_0x4f098e(-0xc4,-0x11c)]());}['_mountedHook'](){this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}['_addedHook'](){this[_0x32da4d(-0xd6,-0xd5)]=this['_createCanvas']();const _0x4a017e={};_0x4a017e[_0x28659a(0xc3,0x74)]=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x4a017e),this['bindEvent']();function _0x32da4d(_0xc17ba7,_0x25ea30){return _0x38134b(_0x25ea30,_0xc17ba7- -0x4d);}function _0x28659a(_0x5a8638,_0x149b61){return _0x38134b(_0x149b61,_0x5a8638-0x156);}this['options']['data']&&this['setData'](this['options']['data']);}['_removedHook'](){this[_0x39763d(0x1f8,0x271)](),this['unbindEvent']();function _0x262e34(_0x56939e,_0x16a212){return _0x20bf04(_0x56939e,_0x16a212-0x19c);}function _0x39763d(_0x889b7,_0x16b9fb){return _0x20bf04(_0x889b7,_0x16b9fb- -0x14);}this['canvas']&&(this[_0x39763d(0x1b4,0x219)]['container']['removeChild'](this['canvas']),delete this[_0x39763d(0x24e,0x27f)]);}['_createCanvas'](){const _0x425815=mars3d__namespace['DomUtil']['create']('canvas',_0x46ffe4(0x552,0x546),this[_0x4570fc(0x53e,0x595)]['container']);_0x425815['style'][_0x46ffe4(0x56a,0x53b)]='absolute',_0x425815['style']['top']='0px';function _0x46ffe4(_0x238b9f,_0x133995){return _0x20bf04(_0x133995,_0x238b9f-0x2c4);}_0x425815['style']['left']='0px',_0x425815['style']['width']=this[_0x4570fc(0x60f,0x595)][_0x46ffe4(0x57b,0x5dc)][_0x4570fc(0x660,0x5fb)]['clientWidth']+'px',_0x425815['style']['height']=this[_0x46ffe4(0x4f1,0x4a4)]['scene']['canvas']['clientHeight']+'px',_0x425815['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x425815['style'][_0x4570fc(0x63c,0x5f9)]=this[_0x46ffe4(0x4e0,0x4dd)]['zIndex']??0x9;function _0x4570fc(_0x113333,_0x1c686f){return _0x38134b(_0x113333,_0x1c686f-0x684);}return _0x425815['width']=this[_0x4570fc(0x54c,0x595)][_0x4570fc(0x5aa,0x61f)]['canvas'][_0x4570fc(0x608,0x629)],_0x425815['height']=this['_map']['scene'][_0x4570fc(0x62b,0x5fb)][_0x46ffe4(0x511,0x599)],_0x425815;}['resize'](){function _0x52449b(_0x173ee3,_0x4b08ff){return _0x20bf04(_0x173ee3,_0x4b08ff- -0x2fb);}function _0x277ac0(_0x4a3dba,_0x52618e){return _0x20bf04(_0x4a3dba,_0x52618e-0x31f);}this['canvas']&&(this[_0x52449b(-0xc0,-0x68)]['style'][_0x277ac0(0x58d,0x5bf)]=this[_0x277ac0(0x547,0x54c)][_0x277ac0(0x618,0x5d6)]['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this[_0x52449b(-0xc2,-0xce)]['scene'][_0x52449b(-0x68,-0x68)]['clientHeight']+'px',this[_0x277ac0(0x576,0x5b2)]['width']=this['_map']['scene']['canvas']['clientWidth'],this['canvas'][_0x277ac0(0x533,0x5b1)]=this[_0x52449b(-0xfc,-0xce)]['scene'][_0x52449b(0x17,-0x68)]['clientHeight']);}['bindEvent'](){const _0xe9606=this;let _0x3090f9=Date['now']();function _0x4f9c3a(_0xed345f,_0x324e0c){return _0x38134b(_0x324e0c,_0xed345f-0x5a3);}(function _0x32b2ee(){if(_0xe9606[_0x399a36(0x459,0x3ea)])return;function _0x399a36(_0xe1e305,_0x56c95a){return _0x5860(_0xe1e305-0x193,_0x56c95a);}_0xe9606['_animateFrame']=window['requestAnimationFrame'](_0x32b2ee);function _0x46be88(_0x1462a7,_0x1d30bf){return _0x5860(_0x1462a7- -0x257,_0x1d30bf);}if(_0xe9606['show']&&_0xe9606['windField']){const _0x26f429=Date[_0x399a36(0x417,0x404)](),_0x3546a9=_0x26f429-_0x3090f9;_0x3546a9>_0xe9606['frameTime']&&(_0x3090f9=_0x26f429-_0x3546a9%_0xe9606[_0x46be88(-0x7f,-0xe6)],_0xe9606['update']());}}(),window[_0x4f9c3a(0x54e,0x584)](_0x16c494(0x471,0x4ac),this['resize']['bind'](this),![]));function _0x16c494(_0x872aa4,_0x156433){return _0x38134b(_0x872aa4,_0x156433-0x562);}this['mouse_down']=![],this['mouse_move']=![],this['options'][_0x4f9c3a(0x596,0x5cc)]&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this[_0x4f9c3a(0x4c0,0x4b3)],this),this['_map']['on'](mars3d__namespace[_0x16c494(0x4d9,0x472)][_0x4f9c3a(0x535,0x5a3)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x16c494(0x462,0x472)]['mouseUp'],this[_0x4f9c3a(0x4d9,0x4be)],this));}[_0x20bf04(0x29b,0x2b0)](){function _0x10d208(_0x138ab2,_0x433dd3){return _0x20bf04(_0x433dd3,_0x138ab2- -0x410);}window[_0x10d208(-0x14c,-0x1d1)](this[_0x10d208(-0x1ca,-0x1ed)]),delete this['_animateFrame'],window[_0x49c9ca(0x232,0x219)]('resize',this['resize']);function _0x49c9ca(_0xdd3fa7,_0x18f27e){return _0x38134b(_0xdd3fa7,_0x18f27e-0x289);}this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map'][_0x10d208(-0xfe,-0xdf)](mars3d__namespace['EventType']['mouseDown'],this[_0x10d208(-0x19b,-0x13a)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x49c9ca(0x208,0x1bf)],this),this[_0x49c9ca(0x131,0x19a)]['off'](mars3d__namespace['EventType'][_0x10d208(-0x121,-0x19f)],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x390b79){function _0x1fbc37(_0x20df33,_0x510b64){return _0x20bf04(_0x510b64,_0x20df33- -0x5e);}clearTimeout(this[_0x1fbc37(0x270,0x21a)]);if(!this[_0x1fbc37(0x1d3,0x162)]||!this['canvas'])return;function _0x3df5fe(_0x19e8b1,_0x41c42b){return _0x38134b(_0x41c42b,_0x19e8b1-0xd4);}this['canvas'][_0x1fbc37(0x1c0,0x1b5)][_0x3df5fe(0xaf,0x100)]='hidden',this[_0x1fbc37(0x270,0x25f)]=setTimeout(()=>{function _0x556be9(_0x3bb28c,_0x4eb7a9){return _0x1fbc37(_0x3bb28c-0x1b5,_0x4eb7a9);}if(!this['show'])return;this[_0x5621a7(0x2fd,0x34e)]();function _0x5621a7(_0x52f2bc,_0x42b9c6){return _0x1fbc37(_0x52f2bc-0xd7,_0x42b9c6);}this['canvas'][_0x556be9(0x375,0x327)]['visibility']='visible';},0xc8);}[_0x38134b(-0xe1,-0xa7)](_0x5e7e26){this['mouse_down']=!![],this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0xf6c9ee(_0x4546e6,_0x2e477a){return _0x38134b(_0x4546e6,_0x2e477a-0x38e);}function _0x3a8539(_0x36aa1b,_0x14ac52){return _0x38134b(_0x14ac52,_0x36aa1b-0x32b);}this[_0xf6c9ee(0x26e,0x29f)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0xf6c9ee(0x396,0x38e)],this);}['_onMouseMoveEvent'](_0x1b2b46){function _0x42edec(_0x11514b,_0x3a2697){return _0x38134b(_0x11514b,_0x3a2697-0x694);}if(!this[_0x23aa3d(-0x125,-0x181)]||!this[_0x42edec(0x5af,0x60b)])return;function _0x23aa3d(_0x13dd7f,_0xec6de2){return _0x38134b(_0xec6de2,_0x13dd7f- -0x3a);}this[_0x23aa3d(-0x4f,-0xd3)]&&(this['canvas']['style']['visibility']='hidden',this[_0x42edec(0x5d9,0x5cf)]=!![]);}['_onMouseUpEvent'](_0x446f6b){if(!this['show']||!this[_0x15faff(0x205,0x21e)])return;this['_map'][_0x15faff(0x284,0x272)](mars3d__namespace['EventType']['mouseMove'],this[_0x15faff(0x28e,0x303)],this);this[_0x3bac6(0x3d1,0x459)]&&this['mouse_move']&&this['redraw']();function _0x3bac6(_0x2a2589,_0x101dac){return _0x20bf04(_0x101dac,_0x2a2589-0xca);}function _0x15faff(_0x860dbc,_0x2104b3){return _0x38134b(_0x2104b3,_0x860dbc-0x28e);}this['canvas']['style']['visibility']=_0x3bac6(0x372,0x375),this['mouse_down']=![],this[_0x15faff(0x1c9,0x163)]=![];}[_0x38134b(-0xe7,-0x82)](_0x57c975){function _0x8cca88(_0x382cfd,_0x5d36c7){return _0x20bf04(_0x382cfd,_0x5d36c7- -0x12e);}this['clear'](),this['windData']=_0x57c975,this[_0x8cca88(0x188,0x17f)][_0x8cca88(0x111,0x117)](_0x57c975);function _0x56c34b(_0x107998,_0x318465){return _0x38134b(_0x107998,_0x318465-0x4b1);}this['redraw']();}['redraw'](){if(!this[_0xdbab55(-0x197,-0x12b)])return;function _0x534f24(_0x389a00,_0x7002e1){return _0x38134b(_0x7002e1,_0x389a00-0x183);}function _0xdbab55(_0x36851d,_0x8fd4a4){return _0x20bf04(_0x8fd4a4,_0x36851d- -0x3c8);}this['windField'][_0x534f24(0x180,0x146)](this['options']),this['update']();}[_0x38134b(-0x123,-0x10f)](){function _0x1734d9(_0x3e93dd,_0x41fde0){return _0x20bf04(_0x41fde0,_0x3e93dd-0x15f);}if(this['_updateIng'])return;function _0x22c73d(_0x4a5c6b,_0x43c46f){return _0x38134b(_0x43c46f,_0x4a5c6b- -0x87);}this['_updateIng']=!![];if(this[_0x1734d9(0x3d7,0x3c9)])this[_0x1734d9(0x40c,0x3ff)][_0x1734d9(0x36c,0x36f)]();else{const _0x3318d7=this['windField']['getParticles']();this[_0x22c73d(-0xca,-0x5c)](_0x3318d7);}this[_0x22c73d(-0xb9,-0x4c)]=![];}[_0x20bf04(0x2cd,0x2d9)](_0x49576e){this[_0x1c62ad(0x49,0xb2)]=_0x49576e,this[_0x1c62ad(0x5f,0x34)]['globalCompositeOperation']='destination-in',this[_0x3a0333(0x37f,0x3c1)][_0x1c62ad(0x4,0x3d)](0x0,0x0,this['canvasWidth'],this[_0x3a0333(0x40a,0x3f2)]),this[_0x1c62ad(0xe,0x34)]['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;const _0x539952=this[_0x1c62ad(-0x17,-0x2f)]['scene']['mode']!==Cesium['SceneMode']['SCENE3D'];function _0x1c62ad(_0x2b2bdd,_0x8c951){return _0x38134b(_0x2b2bdd,_0x8c951-0xc0);}function _0x3a0333(_0x43e4cd,_0xbc1035){return _0x38134b(_0xbc1035,_0x43e4cd-0x40b);}const _0x209672=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x5922ea=0x0,_0x4e0e99=_0x49576e[_0x3a0333(0x33a,0x2bd)];_0x5922ea<_0x4e0e99;_0x5922ea++){const _0x1da889=_0x49576e[_0x5922ea],_0x3beddb=this['_tomap'](_0x1da889,_0x1da889[_0x3a0333(0x3a5,0x411)],_0x1da889['lat'],_0x1da889['alt']),_0x53c789=this[_0x3a0333(0x3dc,0x397)](_0x1da889,_0x1da889['tlng'],_0x1da889['tlat'],_0x1da889['talt']);if(!_0x3beddb||!_0x53c789)continue;if(_0x539952&&Math['abs'](_0x3beddb[0x0]-_0x53c789[0x0])>=_0x209672)continue;this['canvasContext'][_0x1c62ad(0x25,-0xb)](),this[_0x3a0333(0x37f,0x39c)][_0x3a0333(0x3bf,0x3d7)]=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x1c62ad(-0xa,0x46)]['getColor'](_0x1da889[_0x1c62ad(0xfb,0x96)]),this[_0x3a0333(0x37f,0x330)]['moveTo'](_0x3beddb[0x0],_0x3beddb[0x1]),this['canvasContext']['lineTo'](_0x53c789[0x0],_0x53c789[0x1]),this['canvasContext'][_0x1c62ad(-0x5,0x2e)]();}else{this[_0x3a0333(0x37f,0x311)]['beginPath'](),this['canvasContext'][_0x3a0333(0x3bf,0x3bc)]=this['lineWidth'],this[_0x1c62ad(0x18,0x34)]['strokeStyle']=this['color'];for(let _0x451333=0x0,_0x2e59af=_0x49576e[_0x1c62ad(-0x78,-0x11)];_0x451333<_0x2e59af;_0x451333++){const _0x36faaa=_0x49576e[_0x451333],_0x2a598c=this['_tomap'](_0x36faaa,_0x36faaa[_0x3a0333(0x3a5,0x369)],_0x36faaa['lat'],_0x36faaa['alt']),_0x4ce848=this['_tomap'](_0x36faaa,_0x36faaa[_0x1c62ad(0x11,0x4e)],_0x36faaa['tlat'],_0x36faaa['talt']);if(!_0x2a598c||!_0x4ce848)continue;if(_0x539952&&Math[_0x1c62ad(0x25,-0x3c)](_0x2a598c[0x0]-_0x4ce848[0x0])>=_0x209672)continue;this[_0x3a0333(0x37f,0x335)][_0x3a0333(0x409,0x3a5)](_0x2a598c[0x0],_0x2a598c[0x1]),this['canvasContext']['lineTo'](_0x4ce848[0x0],_0x4ce848[0x1]);}this[_0x1c62ad(0x2c,0x34)]['stroke']();}}[_0x38134b(0x45,-0x2f)](_0x89bbb9,_0x5b486b,_0x5289cc,_0x5e2ced){function _0x10c0d3(_0x562326,_0x39e529){return _0x38134b(_0x39e529,_0x562326-0x590);}function _0x3fe9da(_0xa0c684,_0x58f471){return _0x20bf04(_0xa0c684,_0x58f471- -0x6a);}const _0x2508bb=Cesium[_0x3fe9da(0x13e,0x1be)][_0x10c0d3(0x54c,0x5cc)](_0x5b486b,_0x5289cc,_0x5e2ced??this['fixedHeight']),_0x39ba3a=this[_0x10c0d3(0x4a1,0x514)]['scene'];if(_0x39ba3a['mode']===Cesium['SceneMode'][_0x10c0d3(0x4f3,0x4da)]){const _0x59324b=new Cesium[(_0x3fe9da(0x2bf,0x27e))](_0x39ba3a[_0x10c0d3(0x4ef,0x4ba)][_0x3fe9da(0x1de,0x22a)],_0x39ba3a['camera']['positionWC']),_0x1d3423=_0x59324b['isPointVisible'](_0x2508bb);if(!_0x1d3423)return _0x89bbb9['age']=0x0,null;}const _0x36241b=mars3d__namespace[_0x10c0d3(0x4cd,0x4e4)][_0x10c0d3(0x485,0x4ce)](this[_0x10c0d3(0x4a1,0x481)][_0x3fe9da(0x24e,0x24d)],_0x2508bb);return _0x36241b?[_0x36241b['x'],_0x36241b['y']]:null;}[_0x38134b(-0xcb,-0x97)](){function _0x5c8408(_0x581305,_0x39ca7b){return _0x20bf04(_0x39ca7b,_0x581305- -0x170);}function _0x75b2ff(_0x4718d0,_0x2c5b71){return _0x38134b(_0x2c5b71,_0x4718d0-0x57c);}this[_0x75b2ff(0x50d,0x58f)][_0x5c8408(0x115,0xbc)](),delete this['windData'];}[_0x38134b(-0x73,-0x22)](){this['worker']=new Worker(this['options']['worker']);function _0xac121f(_0x7c3276,_0x7ebdaa){return _0x38134b(_0x7ebdaa,_0x7c3276-0x4dd);}this[_0x349c8d(-0xc1,-0x9f)]['onmessage']=_0x578083=>{function _0x2c8e0d(_0x3363dc,_0x1c6fb4){return _0x349c8d(_0x3363dc,_0x1c6fb4-0x5cb);}this['_drawLines'](_0x578083[_0x2c8e0d(0x4ba,0x50c)]['particles']),this['_updateIng2']=![];},this['windField']={'init':_0x3b0025=>{const _0x18759d={};function _0x4773da(_0x4ffe9e,_0x8210b5){return _0x349c8d(_0x4ffe9e,_0x8210b5-0x95);}_0x18759d[_0x4773da(-0x46,-0x5d)]='init',_0x18759d['options']=_0x3b0025,this['worker']['postMessage'](_0x18759d);},'setOptions':_0x474a41=>{const _0x5c63b5={};_0x5c63b5[_0x171f3b(0x34b,0x347)]=_0x16c296(0x6c7,0x66e),_0x5c63b5[_0x171f3b(0x388,0x33e)]=_0x474a41;function _0x16c296(_0x1b700a,_0x5ef1e5){return _0x349c8d(_0x5ef1e5,_0x1b700a-0x6c5);}function _0x171f3b(_0x5511cc,_0x519ec1){return _0x349c8d(_0x5511cc,_0x519ec1-0x439);}this[_0x16c296(0x626,0x5f2)][_0x171f3b(0x33d,0x39c)](_0x5c63b5);},'setDate':_0x4f3609=>{function _0x4b1b2f(_0x14dcfc,_0x13fd04){return _0x349c8d(_0x13fd04,_0x14dcfc-0x491);}function _0xf5b200(_0x306d77,_0x513a4f){return _0x349c8d(_0x306d77,_0x513a4f-0x58e);}const _0x260347={};_0x260347['type']=_0xf5b200(0x47c,0x4bc),_0x260347['data']=_0x4f3609,this[_0x4b1b2f(0x3f2,0x380)]['postMessage'](_0x260347);},'update':()=>{function _0x90ce4d(_0x102bcd,_0x36ff22){return _0x349c8d(_0x102bcd,_0x36ff22-0x400);}if(this[_0x58b866(0x4d3,0x4ca)])return;this['_updateIng2']=!![];const _0x1927be={};function _0x58b866(_0x980df4,_0x170d17){return _0x349c8d(_0x170d17,_0x980df4-0x5b2);}_0x1927be[_0x90ce4d(0x2e4,0x30e)]='update',this['worker']['postMessage'](_0x1927be);},'clear':()=>{const _0x3993a2={};function _0x1bc595(_0xb303ae,_0x186977){return _0x349c8d(_0xb303ae,_0x186977-0x665);}function _0x5547af(_0x3c939d,_0x8c6a53){return _0x349c8d(_0x8c6a53,_0x3c939d- -0x74);}_0x3993a2['type']='clear',this[_0x5547af(-0x113,-0xf2)][_0x5547af(-0x111,-0x18f)](_0x3993a2);}};function _0x349c8d(_0x24b206,_0x38283c){return _0x20bf04(_0x24b206,_0x38283c- -0x317);}this[_0xac121f(0x46e,0x43f)]['init'](this['options']);}}mars3d__namespace['LayerUtil']['register'](_0x38134b(-0xa5,-0xd9),CanvasWindLayer),mars3d__namespace['layer'][_0x20bf04(0x35b,0x303)]=CanvasWindLayer,mars3d__namespace[_0x38134b(-0x6d,-0x78)]=CanvasWindField,mars3d__namespace[_0x20bf04(0x32e,0x30b)]=WindUtil,exports[_0x20bf04(0x256,0x2a4)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x20bf04(0x2ae,0x30b)]=WindUtil;const _0x57cb7e={};_0x57cb7e['value']=!![],Object[_0x38134b(-0xd9,-0xe0)](exports,'__esModule',_0x57cb7e);
}));
