/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.4
 * 编译日期：2025-03-25 22:41
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';function _0x75ed(_0x36f52d,_0x50c131){const _0x491ccf=_0x491c();return _0x75ed=function(_0x75ed66,_0x1400ab){_0x75ed66=_0x75ed66-0x15c;let _0x4dc40e=_0x491ccf[_0x75ed66];return _0x4dc40e;},_0x75ed(_0x36f52d,_0x50c131);}(function(_0x302605,_0x17021a){function _0x50f06f(_0x1d7af0,_0x3ff058){return _0x75ed(_0x3ff058- -0x156,_0x1d7af0);}const _0x10dbba=_0x302605();function _0x4f1d58(_0x907356,_0x49c7ce){return _0x75ed(_0x49c7ce- -0x2e1,_0x907356);}while(!![]){try{const _0x1293df=-parseInt(_0x50f06f(-0x58,0x24))/0x1+parseInt(_0x4f1d58(-0xe6,-0x10a))/0x2*(parseInt(_0x50f06f(0x35,0xa9))/0x3)+parseInt(_0x4f1d58(-0xa7,-0xe7))/0x4*(parseInt(_0x4f1d58(-0x1d1,-0x148))/0x5)+parseInt(_0x4f1d58(-0x90,-0xaf))/0x6+parseInt(_0x50f06f(0x62,0x2b))/0x7*(-parseInt(_0x4f1d58(-0xa2,-0x9a))/0x8)+-parseInt(_0x50f06f(0xb4,0x113))/0x9+parseInt(_0x50f06f(0xf,0x79))/0xa;if(_0x1293df===_0x17021a)break;else _0x10dbba['push'](_0x10dbba['shift']());}catch(_0x18c4af){_0x10dbba['push'](_0x10dbba['shift']());}}}(_0x491c,0x3f380));function _interopNamespace(_0x1fc627){function _0x44e642(_0x3eafe3,_0x277d5b){return _0x75ed(_0x277d5b-0x219,_0x3eafe3);}if(_0x1fc627&&_0x1fc627[_0x44e642(0x37c,0x3e7)])return _0x1fc627;var _0x39448b=Object['create'](null);function _0x655354(_0x5e7dc4,_0x56ec06){return _0x75ed(_0x5e7dc4-0x1d6,_0x56ec06);}return _0x1fc627&&Object[_0x44e642(0x3ff,0x37e)](_0x1fc627)['forEach'](function(_0x1beecd){function _0xa63e41(_0x1e0b55,_0x1ffb8a){return _0x655354(_0x1e0b55- -0xb1,_0x1ffb8a);}if(_0x1beecd!=='default'){var _0x1747cf=Object['getOwnPropertyDescriptor'](_0x1fc627,_0x1beecd);Object[_0xa63e41(0x283,0x304)](_0x39448b,_0x1beecd,_0x1747cf['get']?_0x1747cf:{'enumerable':!![],'get':function(){return _0x1fc627[_0x1beecd];}});}}),_0x39448b['default']=_0x1fc627,_0x39448b;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x12a367,_0x2f8299){const _0x5752ad=_0x12a367*Math['cos'](Cesium$2['Math']['toRadians'](_0x2f8299));return _0x5752ad;}function getV(_0x344b0f,_0x33e80c){function _0x16a40e(_0x50aab4,_0x385c99){return _0x75ed(_0x50aab4-0x37b,_0x385c99);}function _0x581040(_0x87e4a3,_0x2f7cfe){return _0x75ed(_0x87e4a3- -0x322,_0x2f7cfe);}const _0x1e4536=_0x344b0f*Math[_0x16a40e(0x53c,0x553)](Cesium$2[_0x581040(-0xd2,-0xe2)][_0x16a40e(0x515,0x4b0)](_0x33e80c));return _0x1e4536;}function getSpeed(_0x33c755,_0x32ae64){function _0x3ca87d(_0x1f86fb,_0x6109db){return _0x75ed(_0x6109db- -0x2d5,_0x1f86fb);}const _0x1e24d8=Math['sqrt'](Math[_0x3ca87d(-0x167,-0x121)](_0x33c755,0x2)+Math['pow'](_0x32ae64,0x2));return _0x1e24d8;}function getDirection(_0x1d7341,_0x453fed){let _0x25f570=Cesium$2[_0x25dd11(0x5b3,0x5a5)]['toDegrees'](Math['atan2'](_0x453fed,_0x1d7341));function _0x25dd11(_0x22f855,_0x4c426f){return _0x75ed(_0x4c426f-0x355,_0x22f855);}return _0x25f570+=_0x25f570<0x0?0x168:0x0,_0x25f570;}const _0x16e5fe={};_0x16e5fe[_0x433a89(0xe2,0x131)]=null,_0x16e5fe['getU']=getU,_0x16e5fe['getV']=getV,_0x16e5fe[_0x2cd999(-0x20,0x6a)]=getSpeed,_0x16e5fe['getDirection']=getDirection;var WindUtil=_0x16e5fe,updatePositionShader=_0x2cd999(0x5,0x37),calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x433a89(0xdb,0xe0)](){const _0x38110f={};return _0x38110f['sources']=[calculateSpeedShader],new ShaderSource$1(_0x38110f);}static['getUpdatePositionShader'](){const _0x101ac9={};return _0x101ac9['sources']=[updatePositionShader],new ShaderSource$1(_0x101ac9);}static[_0x2cd999(-0xf0,-0xac)](){const _0x2afe30={};_0x2afe30[_0xed21c7(0x4b4,0x462)]=[renderParticlesVertexShader];function _0xed21c7(_0x2af5f5,_0x1fe34d){return _0x2cd999(_0x1fe34d-0x46e,_0x2af5f5);}return new ShaderSource$1(_0x2afe30);}static['getSegmentDrawFragmentShader'](){const _0xe27d70={};return _0xe27d70['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0xe27d70);}static['getPostProcessingPositionShader'](){const _0x184156={};return _0x184156['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x184156);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x22cae8){this[_0x1aacd7(0x13,-0x73)]=_0x22cae8['commandType'],this[_0x2f40bb(0x2d4,0x2f3)]=_0x22cae8['geometry'],this['attributeLocations']=_0x22cae8[_0x2f40bb(0x2ba,0x2c5)],this[_0x1aacd7(0x26,-0x3d)]=_0x22cae8[_0x2f40bb(0x2bd,0x2ca)],this[_0x2f40bb(0x29f,0x29a)]=_0x22cae8['uniformMap']||{};function _0x1aacd7(_0xc000ee,_0x152956){return _0x433a89(_0xc000ee- -0x6a,_0x152956);}this['vertexShaderSource']=_0x22cae8['vertexShaderSource'],this[_0x2f40bb(0x257,0x1f0)]=_0x22cae8['fragmentShaderSource'],this['rawRenderState']=_0x22cae8['rawRenderState'],this['framebuffer']=_0x22cae8['framebuffer'],this['outputTexture']=_0x22cae8[_0x1aacd7(-0x44,0x3)],this[_0x1aacd7(-0x6d,-0x31)]=_0x22cae8[_0x1aacd7(-0x6d,-0x45)]??![],this['preExecute']=_0x22cae8['preExecute'];function _0x2f40bb(_0x45f4a3,_0x485fc7){return _0x433a89(_0x45f4a3-0x22d,_0x485fc7);}this[_0x1aacd7(-0x19,-0x5d)]=!![],this[_0x2f40bb(0x274,0x27d)]=undefined,this[_0x1aacd7(-0x69,-0x95)]=undefined,this['isDynamic']=_0x22cae8[_0x2f40bb(0x2a1,0x26e)]??(()=>!![]),this['autoClear']&&(this[_0x2f40bb(0x22e,0x1af)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}[_0x433a89(0x106,0x130)](_0x3b2660){function _0x2e19ce(_0x5cae8e,_0x12ae08){return _0x433a89(_0x12ae08-0x3d9,_0x5cae8e);}function _0x47ba85(_0xcfc8d8,_0x2ebfc4){return _0x2cd999(_0x2ebfc4-0x4ca,_0xcfc8d8);}if(this['commandType']==='Draw'){const _0x26ee07={};_0x26ee07[_0x2e19ce(0x427,0x406)]=_0x3b2660,_0x26ee07['geometry']=this[_0x47ba85(0x4e6,0x471)],_0x26ee07['attributeLocations']=this['attributeLocations'],_0x26ee07[_0x2e19ce(0x3ac,0x3ed)]=BufferUsage$1['STATIC_DRAW'];const _0xbd1b4=VertexArray$1['fromGeometry'](_0x26ee07),_0x461bb2={};_0x461bb2[_0x47ba85(0x3f4,0x3f7)]=_0x3b2660,_0x461bb2['vertexShaderSource']=this['vertexShaderSource'],_0x461bb2['fragmentShaderSource']=this['fragmentShaderSource'],_0x461bb2['attributeLocations']=this[_0x2e19ce(0x489,0x466)];const _0x30616d=ShaderProgram['fromCache'](_0x461bb2),_0x3c362a=RenderState[_0x47ba85(0x409,0x402)](this[_0x47ba85(0x494,0x49f)]),_0x493cac={};return _0x493cac[_0x47ba85(0x46a,0x414)]=this,_0x493cac['vertexArray']=_0xbd1b4,_0x493cac[_0x47ba85(0x473,0x45a)]=this['primitiveType'],_0x493cac[_0x47ba85(0x441,0x417)]=Matrix4['IDENTITY'],_0x493cac[_0x47ba85(0x4bb,0x437)]=_0x3c362a,_0x493cac['shaderProgram']=_0x30616d,_0x493cac[_0x2e19ce(0x39d,0x3e7)]=this['framebuffer'],_0x493cac[_0x47ba85(0x431,0x43c)]=this['uniformMap'],_0x493cac['pass']=Pass$1[_0x2e19ce(0x4bd,0x4e8)],new DrawCommand(_0x493cac);}else{if(this['commandType']==='Compute'){const _0x4b4bf0={};return _0x4b4bf0[_0x47ba85(0x3cb,0x414)]=this,_0x4b4bf0['fragmentShaderSource']=this['fragmentShaderSource'],_0x4b4bf0[_0x47ba85(0x42f,0x43c)]=this['uniformMap'],_0x4b4bf0[_0x47ba85(0x456,0x3f0)]=this['outputTexture'],_0x4b4bf0['persists']=!![],new ComputeCommand(_0x4b4bf0);}else throw new Error(_0x47ba85(0x47a,0x46c));}}['setGeometry'](_0x42e65b,_0x2eedb8){this[_0x28cf15(0x3c9,0x42c)]=_0x2eedb8;function _0x28cf15(_0x1c16b5,_0x947207){return _0x433a89(_0x1c16b5-0x322,_0x947207);}function _0x92a3d4(_0x277f76,_0x1c7ff6){return _0x433a89(_0x1c7ff6- -0xbd,_0x277f76);}defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x42e65b,'geometry':this[_0x92a3d4(-0x25,-0x16)],'attributeLocations':this[_0x28cf15(0x3af,0x398)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x36fcd0){if(!this['isDynamic']())return;if(!this[_0x2585ae(-0x26a,-0x1ee)]||!defined(_0x36fcd0))return;!defined(this['commandToExecute'])&&(this[_0x2585ae(-0x1b2,-0x1f8)]=this[_0x2585ae(-0xc7,-0x139)](_0x36fcd0['context']));function _0x2585ae(_0x4fc024,_0x354ffe){return _0x2cd999(_0x354ffe- -0x13f,_0x4fc024);}defined(this[_0x2585ae(-0x13c,-0x13d)])&&this['preExecute']();if(!_0x36fcd0[_0x2585ae(-0x188,-0x1b9)]){console['warn'](_0x2585ae(-0x23f,-0x1c3));return;}defined(this['clearCommand'])&&_0x36fcd0['commandList']['push'](this[_0x174418(-0x41,0x38)]);function _0x174418(_0xb02354,_0x2ae5af){return _0x2cd999(_0xb02354-0xbe,_0x2ae5af);}defined(this['commandToExecute'])&&_0x36fcd0['commandList'][_0x2585ae(-0x24a,-0x236)](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x2cd999(0x7,-0x7d)](){if(defined(this['commandToExecute'])){var _0x387f70;(_0x387f70=this['commandToExecute'][_0x7eaf65(-0x76,-0x73)])===null||_0x387f70===void 0x0||_0x387f70[_0x7eaf65(0x24,0xa)](),this['commandToExecute']['shaderProgram']=undefined;}function _0x7eaf65(_0x44d14c,_0x475950){return _0x2cd999(_0x475950-0x3,_0x44d14c);}function _0x322448(_0x4e18ac,_0x2aeef8){return _0x433a89(_0x4e18ac-0x144,_0x2aeef8);}return destroyObject(this);}}function deepMerge(_0x2c1e1d,_0x2ba7b1){function _0x50c48b(_0x137cb9,_0x20ab66){return _0x2cd999(_0x20ab66-0x3e3,_0x137cb9);}function _0x33439a(_0x47eb6d,_0x3816ee){return _0x433a89(_0x47eb6d- -0x18b,_0x3816ee);}if(!_0x2c1e1d)return _0x2ba7b1;if(!_0x2ba7b1)return _0x2c1e1d;const _0x207104={..._0x2ba7b1},_0x5e2ea2=_0x207104;for(const _0xdf904b in _0x2c1e1d){if(Object['prototype']['hasOwnProperty']['call'](_0x2c1e1d,_0xdf904b)){const _0x418a14=_0x2c1e1d[_0xdf904b],_0x2b5b2f=_0x2ba7b1[_0xdf904b];if(Array[_0x50c48b(0x399,0x364)](_0x418a14)){_0x5e2ea2[_0xdf904b]=_0x418a14[_0x33439a(-0xa0,-0x39)]();continue;}if(_0x418a14&&typeof _0x418a14==='object'){_0x5e2ea2[_0xdf904b]=deepMerge(_0x418a14,_0x2b5b2f||{});continue;}_0x418a14!==undefined&&(_0x5e2ea2[_0xdf904b]=_0x418a14);}}return _0x5e2ea2;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x124ddd,_0xc425b4,_0x30562f,_0x5376b1,_0x4f2d9f){this['context']=_0x124ddd,this['options']=_0x30562f,this['viewerParameters']=_0x5376b1,this['windData']=_0xc425b4;function _0x3ba797(_0x5d0129,_0x51b70a){return _0x2cd999(_0x5d0129-0x4e1,_0x51b70a);}this['frameRate']=0x3c,this[_0xa73d1a(0x206,0x248)]=0x1;const _0x568200={};_0x568200['scene']=_0x4f2d9f,_0x568200['samplingWindow']=0x1,_0x568200['quietPeriod']=0x0,this[_0x3ba797(0x4a2,0x512)]=new FrameRateMonitor(_0x568200);function _0xa73d1a(_0x15db3e,_0x353706){return _0x2cd999(_0x15db3e-0x261,_0x353706);}this['initFrameRate'](),this[_0xa73d1a(0x246,0x225)](),this['createParticlesTextures'](),this['createComputingPrimitives']();}[_0x2cd999(-0x7e,-0xbf)](){const _0x4f89ed=()=>{function _0x40b465(_0x4dfb00,_0xc45a9d){return _0x75ed(_0xc45a9d-0xb1,_0x4dfb00);}function _0x58e082(_0x32631e,_0x231f5d){return _0x75ed(_0x32631e-0x11e,_0x231f5d);}this[_0x58e082(0x33f,0x2d7)]['lastFramesPerSecond']>0x14&&(this[_0x40b465(0x2fb,0x27a)]=this['frameRateMonitor'][_0x58e082(0x290,0x2ae)],this['frameRateAdjustment']=0x3c/Math['max'](this['frameRate'],0x1));};function _0x32910f(_0x1f770a,_0x4f37f6){return _0x433a89(_0x1f770a- -0x1a7,_0x4f37f6);}function _0x529543(_0x4a573e,_0xca9e74){return _0x433a89(_0xca9e74- -0x21f,_0x4a573e);}_0x4f89ed();const _0x44d27b=setInterval(_0x4f89ed,0x3e8),_0x33b4e8=this['destroy'][_0x32910f(-0x13d,-0xea)](this);this[_0x529543(-0x9e,-0x118)]=()=>{clearInterval(_0x44d27b),_0x33b4e8();};}[_0x2cd999(-0x1b,-0x4)](){const _0x238c6e={};_0x238c6e['minificationFilter']=TextureMinificationFilter$1[_0x51fcee(0x258,0x25f)],_0x238c6e[_0x51fcee(0x263,0x1e8)]=TextureMagnificationFilter$1['LINEAR'];function _0x59eb96(_0x21d193,_0x5125a7){return _0x2cd999(_0x5125a7-0x63c,_0x21d193);}const _0x16d00d={'context':this[_0x51fcee(0x247,0x261)],'width':this[_0x59eb96(0x5f6,0x5e4)][_0x59eb96(0x5b5,0x56b)],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x59eb96(0x5d3,0x57f)]['flipY']??![],'sampler':new Sampler$1(_0x238c6e)};function _0x51fcee(_0x4e2f4f,_0x2eacdc){return _0x433a89(_0x4e2f4f-0x21a,_0x2eacdc);}this['windTextures']={'U':new Texture$1({..._0x16d00d,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x16d00d,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x51fcee(0x28a,0x227)])}})};}['createParticlesTextures'](){const _0x5e0ffa={};_0x5e0ffa['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x1abc8d(_0x29e581,_0x5135b4){return _0x2cd999(_0x29e581-0x430,_0x5135b4);}_0x5e0ffa['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];function _0x7043a6(_0x2197e7,_0x370984){return _0x433a89(_0x2197e7-0x4d,_0x370984);}const _0x5e1d86={'context':this['context'],'width':this['options'][_0x7043a6(0xaf,0x75)],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x1abc8d(0x373,0x361)]['particlesTextureSize']*this['options'][_0x7043a6(0xaf,0x82)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x5e0ffa)};this[_0x1abc8d(0x3bf,0x3b0)]={'previousParticlesPosition':new Texture$1(_0x5e1d86),'currentParticlesPosition':new Texture$1(_0x5e1d86),'nextParticlesPosition':new Texture$1(_0x5e1d86),'postProcessingPosition':new Texture$1(_0x5e1d86),'particlesSpeed':new Texture$1(_0x5e1d86)};}['destroyParticlesTextures'](){function _0x108ef7(_0x2af3dc,_0x1f7947){return _0x433a89(_0x1f7947-0x52f,_0x2af3dc);}function _0x384f65(_0x50b424,_0x20dedb){return _0x2cd999(_0x20dedb- -0x14b,_0x50b424);}Object[_0x108ef7(0x542,0x5c8)](this['particlesTextures'])[_0x108ef7(0x5b3,0x62b)](_0x23a32f=>_0x23a32f[_0x384f65(-0x182,-0x144)]());}['createComputingPrimitives'](){function _0x5729de(_0x38a40f,_0x5bd765){return _0x2cd999(_0x38a40f-0x3bd,_0x5bd765);}function _0x4157ba(_0x1f0227,_0x83c7b7){return _0x433a89(_0x83c7b7- -0x17d,_0x1f0227);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x5729de(0x32e,0x382),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x4157ba(-0xda,-0xbb)],this[_0x5729de(0x365,0x305)]['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this['windData']['v'][_0x5729de(0x376,0x392)]),'speedRange':()=>new Cartesian2$1(this['windData']['speed'][_0x4157ba(-0x5f,-0xbb)],this[_0x5729de(0x365,0x3d3)][_0x4157ba(-0x18d,-0x108)]['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x1dee43(_0x3813b6,_0x22897c){return _0x4157ba(_0x22897c,_0x3813b6-0x13);}return(this['viewerParameters']['pixelSize']+0x32)*this['options'][_0x1dee43(-0x102,-0x165)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData'][_0x4157ba(-0x5d,-0xc3)]),'minimum':()=>new Cartesian2$1(this['windData'][_0x4157ba(-0x1c0,-0x14a)][_0x4157ba(-0xc9,-0xe5)],this[_0x5729de(0x365,0x3c0)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x4157ba(-0x5b,-0xd5)]['bounds']['east'],this[_0x5729de(0x365,0x347)]['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x4157ba(-0x4a,-0xa2)](),'outputTexture':this['particlesTextures'][_0x4157ba(-0xaa,-0xaa)],'preExecute':()=>{const _0x4edb31=this['particlesTextures']['previousParticlesPosition'];this['particlesTextures']['previousParticlesPosition']=this['particlesTextures'][_0x56d081(-0x10c,-0x13d)],this['particlesTextures'][_0x56d081(-0x1b0,-0x13d)]=this['particlesTextures']['postProcessingPosition'];function _0x56d081(_0x529e1d,_0x16d0f3){return _0x4157ba(_0x529e1d,_0x16d0f3- -0x6f);}function _0x5658fd(_0x2fa9fb,_0x202669){return _0x4157ba(_0x202669,_0x2fa9fb-0x4f1);}this['particlesTextures'][_0x56d081(-0x175,-0x1ea)]=_0x4edb31,this['primitives']['calculateSpeed']['commandToExecute']&&(this[_0x56d081(-0x109,-0x13a)]['calculateSpeed']['commandToExecute'][_0x56d081(-0x19c,-0x1c6)]=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x5729de(0x390,0x3d2)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x4159ac(_0x40a798,_0x2d3998){return _0x5729de(_0x40a798- -0x142,_0x2d3998);}function _0x483b0d(_0x556d5e,_0x151168){return _0x5729de(_0x556d5e- -0x2b,_0x151168);}this['primitives']['updatePosition']['commandToExecute']&&(this[_0x483b0d(0x344,0x2ec)]['updatePosition']['commandToExecute'][_0x483b0d(0x2b8,0x266)]=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this[_0x5729de(0x300,0x2f4)][_0x5729de(0x2ca,0x2eb)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x5729de(0x34c,0x339)]['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x4157ba(-0x85,-0xaa)],'lonRange':()=>this[_0x4157ba(-0x149,-0x14f)]['lonRange'],'latRange':()=>this['viewerParameters'][_0x4157ba(-0x45,-0x86)],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x5729de(0x2f0,0x317)][_0x4157ba(-0x94,-0xe5)],this[_0x4157ba(-0x120,-0xd5)]['bounds'][_0x4157ba(-0x86,-0x8f)]),'dataLatRange':()=>new Cartesian2$1(this[_0x4157ba(-0xf8,-0xd5)]['bounds'][_0x4157ba(-0x6f,-0x72)],this['windData'][_0x5729de(0x2f0,0x30c)]['north']),'randomCoefficient':function(){function _0x59fb2d(_0x3af1dc,_0x6e1dff){return _0x4157ba(_0x6e1dff,_0x3af1dc-0x653);}return Math[_0x59fb2d(0x4dd,0x534)]();},'dropRate':()=>this['options'][_0x4157ba(-0x65,-0xc5)],'dropRateBump':()=>this[_0x5729de(0x300,0x2b9)][_0x5729de(0x323,0x34f)],'useViewerBounds':()=>this['options'][_0x4157ba(-0xc1,-0x91)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x384280(_0x2e5f37,_0x2bf28b){return _0x4157ba(_0x2bf28b,_0x2e5f37-0xe8);}function _0x57cd0b(_0x387289,_0x251590){return _0x4157ba(_0x251590,_0x387289- -0x7e);}this[_0x384280(0x1d,0x41)]['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition']['commandToExecute']['outputTexture']=this['particlesTextures'][_0x384280(-0x93,-0xe9)]);},'isDynamic':()=>this['options']['dynamic']})};}[_0x433a89(0xbc,0x116)](){this['windTextures']['U'][_0x40fb3c(0x5a8,0x5f6)]();function _0x5669e6(_0x3b9a39,_0x4facc7){return _0x2cd999(_0x4facc7-0x2b2,_0x3b9a39);}function _0x40fb3c(_0x1869c2,_0xa4d51f){return _0x2cd999(_0x1869c2-0x5a1,_0xa4d51f);}this['windTextures']['V'][_0x5669e6(0x281,0x2b9)](),this[_0x5669e6(0x2eb,0x297)]();}['updateWindData'](_0x48ea72){function _0x1bb611(_0x413f45,_0x2e312a){return _0x2cd999(_0x2e312a- -0x30,_0x413f45);}function _0x35283a(_0xfed734,_0x2a0293){return _0x433a89(_0xfed734-0x472,_0x2a0293);}this[_0x1bb611(-0x74,-0x88)]=_0x48ea72,this[_0x35283a(0x52e,0x571)]();}['updateOptions'](_0x4bd7bb){const _0x533cb9=_0x4bd7bb[_0x57d666(0xf7,0x116)]!==undefined&&_0x4bd7bb['flipY']!==this[_0x57d666(0xd6,0x104)][_0x867ebf(0x247,0x2b3)];this['options']=deepMerge(_0x4bd7bb,this['options']);function _0x867ebf(_0x49758a,_0x743c46){return _0x433a89(_0x49758a-0x1f2,_0x743c46);}function _0x57d666(_0x5af94f,_0x380074){return _0x433a89(_0x380074-0xc1,_0x5af94f);}_0x533cb9&&this[_0x57d666(0xfa,0x17d)]();}['processWindData'](_0x273f73){const {array:_0x5072b8}=_0x273f73;let {min:_0x3e6e1c,max:_0x209773}=_0x273f73;const _0x5c1583=new Float32Array(_0x5072b8['length']);function _0x32678d(_0x53163d,_0x4efb16){return _0x433a89(_0x53163d-0xcf,_0x4efb16);}_0x3e6e1c===undefined&&(console[_0x48e7b0(0x21e,0x19a)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x3e6e1c=Math['min'](..._0x5072b8));_0x209773===undefined&&(console[_0x48e7b0(0x21e,0x205)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x209773=Math[_0x48e7b0(0x264,0x2b1)](..._0x5072b8));function _0x48e7b0(_0x43ffd2,_0x2f31ab){return _0x433a89(_0x43ffd2-0x1ab,_0x2f31ab);}const _0x284ea7=Math['max'](Math['abs'](_0x3e6e1c),Math['abs'](_0x209773));for(let _0x29bc69=0x0;_0x29bc69<_0x5072b8[_0x32678d(0x125,0x144)];_0x29bc69++){const _0x1aa1f4=_0x5072b8[_0x29bc69]/_0x284ea7;_0x5c1583[_0x29bc69]=_0x1aa1f4;}return _0x5c1583;}['destroy'](){Object[_0x1737af(0x13b,0x145)](this[_0x3d7764(0x291,0x2b9)])['forEach'](_0x5b1356=>_0x5b1356[_0x1737af(0x12d,0x1b3)]()),Object['values'](this[_0x3d7764(0x251,0x28a)])['forEach'](_0x232a24=>_0x232a24['destroy']());function _0x1737af(_0x3cb437,_0x428a8c){return _0x433a89(_0x428a8c-0xac,_0x3cb437);}Object['values'](this[_0x1737af(0xed,0x15e)])[_0x3d7764(0x35e,0x2f7)](_0x13d220=>_0x13d220['destroy']());function _0x3d7764(_0x57fb60,_0x181802){return _0x2cd999(_0x181802-0x2fb,_0x57fb60);}this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x433a89(0xf2,0x69)];class WindParticlesRendering{constructor(_0x5a7fa4,_0x4de166,_0x4684b3,_0x49ba6e){this['context']=_0x5a7fa4;function _0x3e252e(_0x1e60a9,_0x729378){return _0x2cd999(_0x1e60a9-0xe1,_0x729378);}this['options']=_0x4de166,this[_0x3e252e(0xf,0x6)]=_0x4684b3,this[_0x1f0a91(0x393,0x387)]=_0x49ba6e;(typeof this[_0x3e252e(0x24,0x6a)]['particlesTextureSize']!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x3e252e(0x24,0x71)]['particlesTextureSize']=0x100);this[_0x1f0a91(0x418,0x452)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers']();function _0x1f0a91(_0x5ac9e8,_0x59073c){return _0x433a89(_0x59073c-0x388,_0x5ac9e8);}this[_0x1f0a91(0x4ab,0x43a)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x5c9f85={};_0x5c9f85['context']=this[_0x13de36(0x236,0x24c)],_0x5c9f85['width']=this['context'][_0x50d52e(-0x12a,-0x186)];function _0x50d52e(_0x5b418f,_0x2fbe1c){return _0x2cd999(_0x2fbe1c- -0x14a,_0x5b418f);}_0x5c9f85['height']=this['context']['drawingBufferHeight'],_0x5c9f85['pixelFormat']=PixelFormat['RGBA'],_0x5c9f85[_0x50d52e(-0x234,-0x23e)]=PixelDatatype[_0x50d52e(-0x232,-0x218)];const _0x35bb54=_0x5c9f85;function _0x13de36(_0x41493e,_0x4ad70d){return _0x433a89(_0x4ad70d-0x21f,_0x41493e);}const _0x1bb57d={};_0x1bb57d[_0x50d52e(-0x268,-0x21d)]=this['context'],_0x1bb57d[_0x13de36(0x1c8,0x24e)]=this[_0x13de36(0x2d2,0x24c)]['drawingBufferWidth'],_0x1bb57d['height']=this['context'][_0x50d52e(-0x29c,-0x221)],_0x1bb57d['pixelFormat']=PixelFormat[_0x13de36(0x261,0x2c3)],_0x1bb57d[_0x13de36(0x269,0x22b)]=PixelDatatype['UNSIGNED_INT'];const _0x456b70=_0x1bb57d;return{'segmentsColor':new Texture(_0x35bb54),'segmentsDepth':new Texture(_0x456b70)};}[_0x433a89(0xe1,0x95)](){function _0x388723(_0x3b4954,_0x18b722){return _0x2cd999(_0x18b722-0x589,_0x3b4954);}const _0x5f0e3c={};function _0x24b95c(_0x44bcad,_0x52007d){return _0x433a89(_0x44bcad-0xce,_0x52007d);}return _0x5f0e3c['context']=this[_0x388723(0x440,0x4b6)],_0x5f0e3c['colorTextures']=[this['textures']['segmentsColor']],_0x5f0e3c[_0x388723(0x422,0x498)]=this[_0x388723(0x48d,0x4e5)]['segmentsDepth'],{'segments':new Framebuffer(_0x5f0e3c)};}['destoryRenderingFramebuffers'](){function _0x103e42(_0x4310d9,_0x40e0d3){return _0x2cd999(_0x4310d9-0x56e,_0x40e0d3);}function _0x34e2e9(_0x8d9a24,_0x4b9876){return _0x433a89(_0x4b9876-0x43b,_0x8d9a24);}Object[_0x34e2e9(0x497,0x4d4)](this[_0x103e42(0x4cb,0x4e9)])[_0x34e2e9(0x4ed,0x537)](_0x8cc021=>{_0x8cc021['destroy']();});}[_0x433a89(0xbd,0xdf)](){const _0x88f451=new Float32Array(this['options']['colors']['flatMap'](_0x132937=>{function _0x580533(_0x2f836c,_0x2dcca5){return _0x75ed(_0x2dcca5-0x134,_0x2f836c);}function _0x2bef1c(_0x3df777,_0x3a6587){return _0x75ed(_0x3df777- -0x188,_0x3a6587);}const _0x4633b0=Color$1['fromCssColorString'](_0x132937);return[_0x4633b0['red'],_0x4633b0['green'],_0x4633b0[_0x2bef1c(0xa6,0x101)],_0x4633b0[_0x2bef1c(0x4e,0xa4)]];})),_0x20a3e4={};function _0x267bba(_0x386403,_0x68c4e7){return _0x2cd999(_0x386403-0x103,_0x68c4e7);}_0x20a3e4['minificationFilter']=TextureMinificationFilter['LINEAR'];function _0x4dcdf8(_0x2384eb,_0x3cf758){return _0x2cd999(_0x3cf758-0x454,_0x2384eb);}return _0x20a3e4[_0x267bba(0x4c,0x57)]=TextureMagnificationFilter['LINEAR'],_0x20a3e4[_0x4dcdf8(0x47d,0x417)]=TextureWrap['CLAMP_TO_EDGE'],_0x20a3e4['wrapT']=TextureWrap[_0x267bba(0x44,-0x1)],new Texture({'context':this['context'],'width':this[_0x4dcdf8(0x3b2,0x397)]['colors'][_0x267bba(0x59,0x92)],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x20a3e4),'source':{'width':this[_0x4dcdf8(0x362,0x397)][_0x267bba(0x21,-0x63)][_0x4dcdf8(0x3d5,0x3aa)],'height':0x1,'arrayBufferView':_0x88f451}});}['createSegmentsGeometry'](){const _0x1aae64=0x4,_0x4a93b6=this['options'][_0x47d6ae(0x502,0x47e)];function _0x47d6ae(_0x2b229e,_0x167454){return _0x433a89(_0x167454-0x41c,_0x2b229e);}let _0x15fdda=[];for(let _0x3e034=0x0;_0x3e034<_0x4a93b6;_0x3e034++){for(let _0x52485e=0x0;_0x52485e<_0x4a93b6;_0x52485e++){for(let _0x2284f1=0x0;_0x2284f1<_0x1aae64;_0x2284f1++){_0x15fdda['push'](_0x3e034/_0x4a93b6),_0x15fdda[_0x441124(0x510,0x58f)](_0x52485e/_0x4a93b6);}}}_0x15fdda=new Float32Array(_0x15fdda);const _0x1cd047=this[_0x441124(0x54a,0x51a)]['particlesTextureSize']**0x2;let _0x51c396=[];for(let _0x43183c=0x0;_0x43183c<_0x1cd047;_0x43183c++){_0x51c396['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x51c396=new Float32Array(_0x51c396);let _0x33f8c8=[];for(let _0x1a8904=0x0,_0x191977=0x0;_0x1a8904<_0x1cd047;_0x1a8904++){_0x33f8c8['push'](_0x191977+0x0,_0x191977+0x1,_0x191977+0x2,_0x191977+0x2,_0x191977+0x1,_0x191977+0x3),_0x191977+=_0x1aae64;}_0x33f8c8=new Uint32Array(_0x33f8c8);const _0x30c06a={};_0x30c06a[_0x47d6ae(0x4a9,0x47f)]=ComponentDatatype[_0x441124(0x5d0,0x5c1)],_0x30c06a[_0x47d6ae(0x4f6,0x4a4)]=0x2,_0x30c06a[_0x47d6ae(0x48f,0x4b5)]=_0x15fdda;const _0x496868={};function _0x441124(_0x5aa5f7,_0x315e50){return _0x433a89(_0x5aa5f7-0x507,_0x315e50);}_0x496868[_0x441124(0x56a,0x5c4)]=ComponentDatatype['FLOAT'],_0x496868[_0x47d6ae(0x4a5,0x4a4)]=0x3,_0x496868['values']=_0x51c396;const _0x510be5=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x30c06a),'normal':new GeometryAttribute(_0x496868)}),'indices':_0x33f8c8});return _0x510be5;}['createRawRenderState'](_0xc12d21){const _0x54d322={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0xc12d21};function _0x43615f(_0x35c22f,_0xec8635){return _0x433a89(_0xec8635-0x28e,_0x35c22f);}return Appearance[_0x43615f(0x27c,0x2ce)](!![],![],_0x54d322);}['createPrimitives'](){const _0x20a6a4={};_0x20a6a4['st']=0x0,_0x20a6a4[_0x51f7d3(0x443,0x3d7)]=0x1;const _0x5972eb={};_0x5972eb['enabled']=!![];function _0x23ba81(_0xcd5f35,_0x36e02e){return _0x2cd999(_0x36e02e-0x465,_0xcd5f35);}function _0x51f7d3(_0x2110d9,_0x55a128){return _0x2cd999(_0x55a128-0x437,_0x2110d9);}const _0x4fce13={};_0x4fce13['enabled']=!![],_0x4fce13[_0x51f7d3(0x3c0,0x3eb)]=WebGLRenderingContext['FUNC_ADD'],_0x4fce13['blendFuncSource']=WebGLRenderingContext[_0x23ba81(0x338,0x3bd)],_0x4fce13[_0x51f7d3(0x362,0x3ce)]=WebGLRenderingContext[_0x23ba81(0x3e5,0x3ec)];const _0x1b4305={};_0x1b4305[_0x51f7d3(0x3e1,0x3f2)]=undefined,_0x1b4305[_0x23ba81(0x3b8,0x37d)]=_0x5972eb,_0x1b4305[_0x23ba81(0x3e4,0x444)]=!![],_0x1b4305['blending']=_0x4fce13;const _0x13af12=new CustomPrimitive({'commandType':_0x51f7d3(0x46c,0x3f6),'attributeLocations':_0x20a6a4,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x51f7d3(0x35c,0x3cd)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures'][_0x51f7d3(0x46e,0x445)],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0x23ba81(0x3a1,0x3f4)]['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x51f7d3(0x405,0x3c6)]['particlesSpeed'],'frameRateAdjustment':()=>this[_0x23ba81(0x362,0x364)][_0x51f7d3(0x442,0x3dc)],'colorTable':()=>this[_0x23ba81(0x479,0x42f)],'domain':()=>{var _0x524b97,_0x2a8362;function _0xe2eb83(_0x1c9b3f,_0x25abd4){return _0x23ba81(_0x25abd4,_0x1c9b3f- -0x41e);}const _0x373f5a=new Cartesian2(((_0x524b97=this['options'][_0x5f1f38(0x446,0x41d)])===null||_0x524b97===void 0x0?void 0x0:_0x524b97['min'])??this[_0xe2eb83(-0xba,-0x70)][_0xe2eb83(-0x11,-0x94)][_0xe2eb83(-0x44,-0x1e)][_0x5f1f38(0x462,0x414)],((_0x2a8362=this['options'][_0x5f1f38(0x446,0x43d)])===null||_0x2a8362===void 0x0?void 0x0:_0x2a8362['max'])??this['computing']['windData']['speed']['max']);function _0x5f1f38(_0x2d2e36,_0x17980e){return _0x51f7d3(_0x17980e,_0x2d2e36-0x69);}return _0x373f5a;},'displayRange':()=>{var _0x549fff,_0x53f82a;function _0x2c7039(_0x3ad8af,_0x5dbce2){return _0x23ba81(_0x5dbce2,_0x3ad8af-0x56);}const _0x17c2aa=new Cartesian2(((_0x549fff=this['options'][_0x599a54(0x250,0x205)])===null||_0x549fff===void 0x0?void 0x0:_0x549fff['min'])??this['computing']['windData']['speed'][_0x2c7039(0x47d,0x488)],((_0x53f82a=this['options'][_0x2c7039(0x4b8,0x518)])===null||_0x53f82a===void 0x0?void 0x0:_0x53f82a[_0x599a54(0x20c,0x1a7)])??this['computing'][_0x2c7039(0x463,0x44b)][_0x2c7039(0x430,0x47d)][_0x2c7039(0x474,0x44f)]);function _0x599a54(_0x13fc4d,_0x5188ad){return _0x23ba81(_0x5188ad,_0x13fc4d- -0x212);}return _0x17c2aa;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this[_0x23ba81(0x3e1,0x392)]['drawingBufferWidth']/this[_0x23ba81(0x3fe,0x392)]['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{function _0x5352fd(_0x4e34a4,_0x5e5452){return _0x51f7d3(_0x4e34a4,_0x5e5452- -0x47);}const _0x1f885e={};_0x1f885e[_0x524d2f(-0x180,-0x15f)]=0x1,_0x1f885e['max']=0x2;function _0x524d2f(_0x3b709f,_0x330bb5){return _0x51f7d3(_0x3b709f,_0x330bb5- -0x558);}const _0x308faf=this[_0x5352fd(0x367,0x333)][_0x524d2f(-0x14c,-0x126)]||_0x1f885e;return new Cartesian2(_0x308faf[_0x524d2f(-0x100,-0x15f)],_0x308faf['max']);},'lineLength':()=>{const _0x5e922b={};_0x5e922b['min']=0x14,_0x5e922b['max']=0x64;const _0x8e4788=this[_0x82d11c(0x2ae,0x304)]['lineLength']||_0x5e922b;function _0x82d11c(_0x550780,_0x2bd95a){return _0x51f7d3(_0x2bd95a,_0x550780- -0xcc);}return new Cartesian2(_0x8e4788['min'],_0x8e4788['max']);},'is3D':()=>this['viewerParameters'][_0x51f7d3(0x3b2,0x408)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x51f7d3(0x3df,0x3ca)]},'vertexShaderSource':ShaderManager[_0x23ba81(0x31c,0x375)](),'fragmentShaderSource':ShaderManager[_0x51f7d3(0x4b1,0x43f)](),'rawRenderState':this['createRawRenderState'](_0x1b4305)}),_0x56e471={};return _0x56e471[_0x51f7d3(0x421,0x42d)]=_0x13af12,_0x56e471;}[_0x433a89(0x31,-0x32)](){const _0x54eaca=this[_0xfc1c63(0x44b,0x460)]();this['primitives']['segments']['geometry']=_0x54eaca;const _0x2ade67={};_0x2ade67['context']=this['context'],_0x2ade67[_0xfc1c63(0x492,0x4d0)]=_0x54eaca,_0x2ade67['attributeLocations']=this[_0xfc1c63(0x50f,0x4db)]['segments']['attributeLocations'];function _0x295cab(_0x216e3b,_0x48f501){return _0x2cd999(_0x216e3b-0x647,_0x48f501);}_0x2ade67[_0xfc1c63(0x4c3,0x43d)]=BufferUsage['STATIC_DRAW'];function _0xfc1c63(_0x102c79,_0x1a58db){return _0x2cd999(_0x1a58db-0x529,_0x102c79);}const _0x3933ea=VertexArray['fromGeometry'](_0x2ade67);this[_0xfc1c63(0x461,0x4db)]['segments']['commandToExecute']&&(this[_0x295cab(0x5f9,0x5ad)]['segments'][_0x295cab(0x58e,0x567)][_0x295cab(0x5f2,0x62c)]=_0x3933ea);}['onColorTableChange'](){this['colorTable']['destroy']();function _0x4d4cc2(_0x132d60,_0x105df5){return _0x433a89(_0x132d60-0x39,_0x105df5);}this['colorTable']=this[_0x4d4cc2(0xf6,0xdc)]();}['updateOptions'](_0x203f5c){const _0x33a381=_0x203f5c[_0x38388a(0x418,0x480)]&&JSON['stringify'](_0x203f5c['colors'])!==JSON['stringify'](this[_0x38388a(0x43d,0x3e8)]['colors']);this[_0x38aff5(0x4ac,0x4f2)]=deepMerge(_0x203f5c,this['options']);function _0x38aff5(_0x22567c,_0x44a2ce){return _0x433a89(_0x44a2ce-0x4af,_0x22567c);}function _0x38388a(_0x3d76c5,_0x31cbb0){return _0x2cd999(_0x3d76c5-0x4fa,_0x31cbb0);}_0x33a381&&this[_0x38aff5(0x55b,0x595)]();}[_0x433a89(0x107,0x173)](){Object['values'](this[_0x5c760a(0x274,0x248)])[_0x5c760a(0x33c,0x2e7)](_0x54d7b9=>{_0x54d7b9['destroy']();});function _0x1c547a(_0x216ec6,_0x53ef74){return _0x2cd999(_0x53ef74-0x20f,_0x216ec6);}Object[_0x1c547a(0x123,0x1a8)](this['primitives'])['forEach'](_0x451b46=>{_0x451b46['destroy']();});function _0x5c760a(_0x37e3cd,_0xc7b410){return _0x2cd999(_0xc7b410-0x2eb,_0x37e3cd);}this[_0x1c547a(0x1d4,0x1d9)][_0x5c760a(0x2a5,0x2f2)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x49f8ce,_0x2475b8,_0x10b480,_0x47dcbe,_0x2439c6){this[_0x451635(-0xc7,-0x9f)]=_0x49f8ce,this['options']=_0x10b480,this[_0x451635(-0x3e,-0x9e)]=_0x47dcbe;function _0x4d9c19(_0x3d3c44,_0x52306c){return _0x433a89(_0x52306c- -0x5f,_0x3d3c44);}this['computing']=new WindParticlesComputing(_0x49f8ce,_0x2475b8,_0x10b480,_0x47dcbe,_0x2439c6),this['rendering']=new WindParticlesRendering(_0x49f8ce,_0x10b480,_0x47dcbe,this['computing']);function _0x451635(_0x1b1968,_0x3402bc){return _0x433a89(_0x3402bc- -0xcc,_0x1b1968);}this['clearFramebuffers']();}['getPrimitives'](){function _0x1e3888(_0x9025b5,_0x327f6f){return _0x433a89(_0x9025b5-0x363,_0x327f6f);}const _0x243b25=[this['computing']['primitives']['calculateSpeed'],this['computing']['primitives']['updatePosition'],this['computing'][_0x4d4029(0x4f3,0x4e3)]['postProcessingPosition'],this[_0x1e3888(0x3a8,0x409)]['primitives']['segments']];function _0x4d4029(_0xd0851c,_0xc29268){return _0x2cd999(_0xd0851c-0x541,_0xc29268);}return _0x243b25;}['clearFramebuffers'](){function _0x2e00ce(_0x205ce7,_0x63c039){return _0x433a89(_0x205ce7-0x122,_0x63c039);}const _0x21ed6e=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this['rendering']['framebuffers'])[_0x2e00ce(0x21e,0x1ab)](_0x467707=>{function _0x44dc7e(_0x4c6551,_0x29bfa6){return _0x2e00ce(_0x4c6551- -0x2eb,_0x29bfa6);}function _0x3ecf5b(_0x5b682c,_0x3e7583){return _0x2e00ce(_0x3e7583- -0x115,_0x5b682c);}_0x21ed6e['framebuffer']=this[_0x44dc7e(-0x184,-0x177)]['framebuffers'][_0x467707],_0x21ed6e[_0x44dc7e(-0x119,-0x92)](this[_0x3ecf5b(-0x2d,0x3a)]);});}['changeOptions'](_0x514ac5){let _0x1d8275=![];function _0x4fe9e5(_0x3c5ee1,_0x12af87){return _0x433a89(_0x3c5ee1-0x73,_0x12af87);}_0x514ac5['particlesTextureSize']&&this[_0x4fe9e5(0xb6,0x70)]['particlesTextureSize']!==_0x514ac5['particlesTextureSize']&&(_0x1d8275=!![]);function _0x886e5b(_0x42298c,_0x33f1a4){return _0x2cd999(_0x33f1a4-0x383,_0x42298c);}const _0x3b8885=deepMerge(_0x514ac5,this[_0x4fe9e5(0xb6,0x12e)]);if(_0x3b8885['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x3b8885,this[_0x886e5b(0x325,0x2c8)][_0x4fe9e5(0x107,0xf7)](_0x514ac5),this['computing']['updateOptions'](_0x514ac5),_0x1d8275&&(this[_0x886e5b(0x2b6,0x282)]['destroyParticlesTextures'](),this['computing']['createParticlesTextures'](),this[_0x886e5b(0x30e,0x2c8)][_0x886e5b(0x28c,0x2b4)]());}[_0x433a89(0x84,0xe6)](_0x4d8c2f){this['viewerParameters']=_0x4d8c2f,this['computing']['viewerParameters']=_0x4d8c2f;function _0x2054a6(_0x294d54,_0x52f559){return _0x2cd999(_0x52f559-0x404,_0x294d54);}this['rendering'][_0x2054a6(0x315,0x332)]=_0x4d8c2f;}[_0x433a89(0x107,0x9f)](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x2cd999(-0xe,0x5f)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x24f3e9={};_0x24f3e9['min']=0x1,_0x24f3e9[_0x2cd999(-0x47,0x33)]=0x2;const _0x109e91={};function _0x491c(){const _0x32b3ab=['array','Compute','uniformMap','warn','isDynamic','speed','alpha','87914LbMcji','_onMouseDownEvent','create','clientHeight','ellipsoid','frameState.commandList\x20is\x20undefined','commandType','_tomap','canvas','abs','isArray','initFrameRate','addEventListener','applyViewerParameters','mouseDown','commandList','ONE_MINUS_SRC_ALPHA','componentsPerAttribute','color','shaderProgram','data','wheel','attributeLocations','worker','particlesTextures','primitiveType','mouseMove','camera','segmentsDepth','updateOptions','setDate','TRIANGLES','blendFuncDestination','west','values','564eHYqeT','off','_animateFrame','_updateIng2','talt','18cxUxxk','normal','removeEventListener','Unknown\x20command\x20type','maxAge','DEPTH_COMPONENT','frameRateAdjustment','domain','geometry','windData','pixelSize','rows','vertexArray','ymin','wind','MIN_VALUE','currentParticlesPosition','execute','particlesNumber','primitives','DomUtil','blendEquation','processWindData','fillRect','CanvasWindField','dropRate','max','height','viewport','reCreateWindTextures','createColorTableTexture','windTextures','Draw','pointer-events','frameRateMonitor','min','wrapS','drawingBufferWidth','positionWC','_onMouseUpEvent','_calcUV','LayerUtil','FLOAT','colorTable','xmin','visible','morphComplete','blue','WindUtil','resize','sceneMode','2998512QlsAYE','particlesSpeed','frameTime','rawRenderState','particles','setData','canvasContext','layer','_onMouseMoveEvent','getCalculateSpeedShader','cols','isPointVisible','getUVByPoint','depthMask','getSpeed','createRenderingFramebuffers','__proto__','0px','_onMapWhellEvent','createWindTextures','onColorTableChange','8SCssxC','mouse_down','unbindEvent','scene','slice','useViewerBounds','visibility','east','_drawLines','Math','alt','Cesium','interpolated','sources','WindLayer','segments','latRange','xmax','floor','getParticles','lineWidth','forEach','displayRange','redraw','windField','lng','value','preExecute','tlng','lat','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','createCommand','destroy','getSegmentDrawFragmentShader','4336461lsptIq','lighter','south','fixedHeight','container','previousParticlesPosition','OPAQUE','getUVByXY','tlat','autoClear','defineProperty','computing','_setOptionsHook','clearCommand','postProcessingPosition','udata','vdata','keys','onmessage','random','canvasWidth','push','clear','north','pixelDatatype','dynamic','framebuffer','depthTexture','getSegmentDrawVertexShader','globalAlpha','lastFramesPerSecond','changed','bufferUsage','_map','stroke','remove','depthTest','_canvasParticles','52022cbqono','vmin','age','SceneMode','colors','zIndex','_pointerEvents','3397681CnHGbt','reverse','steps','Cartesian2','ymax','outputTexture','cancelAnimationFrame','_randomParticle','drawingBufferHeight','fragmentShaderSource','Cartesian3','isInExtent','context','viewerParameters','width','_calc_speedRate','onParticlesTextureSizeChange','UNSIGNED_BYTE','bounds','_bilinearInterpolation','postMessage','grid','createSegmentsGeometry','fromCache','3625pWhZMg','toRadians','_addedHook','style','toGridXY','LINEAR','bindEvent','getDefaultRenderState','CLAMP_TO_EDGE','pointerEvents','options','updateViewerParameters','rendering','longitude','commandToExecute','_canrefresh','magnificationFilter','owner','particleSystem','latitude','modelMatrix','_createCanvas','EventType','_updateIng','show','update','pickEllipsoid','pow','flipY','length','hidden','SRC_ALPHA','type','_speedRate','canvasHeight','textures','framebuffers','_colorRamp','sqrt','clientWidth','sin','particlesTextureSize','componentDatatype','toWindowCoordinates','mode','dropRateBump','speedRate','speedFactor','frameRate','bind','setOptions','globe','renderState','__esModule','4124590jOXARc'];_0x491c=function(){return _0x32b3ab;};return _0x491c();}function _0x2cd999(_0x2e744b,_0x14dcb5){return _0x75ed(_0x2e744b- -0x260,_0x14dcb5);}_0x109e91['min']=0x14,_0x109e91['max']=0x64;const _0x54a6df={};_0x54a6df['particlesTextureSize']=0x64,_0x54a6df[_0x433a89(0x10c,0x165)]=0x0,_0x54a6df[_0x2cd999(-0x5,-0x1b)]=_0x24f3e9,_0x54a6df['lineLength']=_0x109e91,_0x54a6df[_0x2cd999(-0x98,-0x9c)]=0x1,_0x54a6df['dropRate']=0.003,_0x54a6df['dropRateBump']=0.001;function _0x433a89(_0x3c912a,_0x45fada){return _0x75ed(_0x3c912a- -0x160,_0x45fada);}_0x54a6df[_0x2cd999(-0xe2,-0x12e)]=['rgb(206,255,255)'],_0x54a6df[_0x2cd999(-0xab,-0x12c)]=![],_0x54a6df['dynamic']=!![];const DEF_OPTIONS=_0x54a6df;class WindLayer extends BaseLayer$1{constructor(_0x5336e6={}){function _0x38b9a9(_0x25fc55,_0x2ca5b4){return _0x433a89(_0x2ca5b4- -0x1dc,_0x25fc55);}_0x5336e6={...DEF_OPTIONS,..._0x5336e6},super(_0x5336e6),this[_0x38b9a9(-0x1f3,-0x1dc)](_0x5336e6,_0x5336e6);}get[_0x433a89(0xd9,0xf5)](){return this['primitives'];}get[_0x2cd999(-0x75,0x4)](){return this['options']['data'];}set['data'](_0x11292a){this['options']['data']=_0x11292a,this['setData'](_0x11292a);}get[_0x2cd999(-0xe2,-0x14b)](){return this['options']['colors'];}set['colors'](_0x5e2abd){function _0xd04b81(_0x431861,_0x421040){return _0x433a89(_0x421040-0x96,_0x431861);}function _0x371493(_0x514a94,_0x3961c5){return _0x433a89(_0x3961c5- -0xb3,_0x514a94);}this[_0xd04b81(0xad,0xd9)][_0x371493(-0x26,-0x95)]=_0x5e2abd;const _0x44b500={};_0x44b500['colors']=_0x5e2abd,this[_0xd04b81(0x103,0x96)](this[_0xd04b81(0x74,0xd9)],_0x44b500);}['_mountedHook'](){}[_0x433a89(0x3b,-0x4b)](){this[_0x1205d9(0x2c2,0x336)]=this['_map']['scene'],this['camera']=this[_0x1205d9(0x1de,0x261)]['camera'];this['options']['data']&&this[_0x1205d9(0x36e,0x323)](this[_0x26f63d(0x1d4,0x201)]['data']);if(!this['windData'])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0x26f63d(0x254,0x1e2))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x1205d9(0x2fd,0x2b1)]},this['updateViewerParameters'](),this[_0x1205d9(0x29f,0x297)]=new WindParticleSystem(this['scene']['context'],this['windData'],this['options'],this['viewerParameters'],this['scene']),this[_0x1205d9(0x292,0x2fe)]=this['particleSystem']['getPrimitives'](),this['primitives']['forEach'](_0x3a1527=>{this['scene']['primitives']['add'](_0x3a1527);});function _0x1205d9(_0x4a3ea9,_0x95e73){return _0x433a89(_0x95e73-0x24c,_0x4a3ea9);}this[_0x1205d9(0x257,0x2de)]['percentageChanged']=0.01,this['camera']['changed']['addEventListener'](this['updateViewerParameters']['bind'](this));function _0x26f63d(_0x32bae5,_0x5c06ea){return _0x433a89(_0x5c06ea-0x1be,_0x32bae5);}this[_0x1205d9(0x320,0x336)]['morphComplete']['addEventListener'](this['updateViewerParameters'][_0x26f63d(0x22a,0x228)](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){function _0x3b09e7(_0x5e96e2,_0x13a9de){return _0x433a89(_0x5e96e2- -0x83,_0x13a9de);}function _0x5dd5bc(_0x1eaff5,_0x100a61){return _0x433a89(_0x100a61-0x239,_0x1eaff5);}this[_0x5dd5bc(0x2a0,0x2cb)][_0x5dd5bc(0x1f7,0x24c)][_0x3b09e7(0x1e,0x32)](this[_0x5dd5bc(0x248,0x27d)]['bind'](this)),this[_0x3b09e7(0x67,-0x20)][_0x5dd5bc(0x2d6,0x306)]['removeEventListener'](this['updateViewerParameters']['bind'](this)),window['removeEventListener']('resize',this['updateViewerParameters'][_0x3b09e7(-0x19,-0x72)](this)),this['primitives']&&(this['primitives']['forEach'](_0x14b7c9=>{function _0xe06160(_0x56424d,_0x9c34a){return _0x5dd5bc(_0x9c34a,_0x56424d- -0xe9);}function _0x107105(_0x3ad65e,_0x53c70e){return _0x5dd5bc(_0x53c70e,_0x3ad65e-0x110);}this[_0x107105(0x433,0x3b5)]['primitives'][_0x107105(0x360,0x3cb)](_0x14b7c9);}),delete this['primitives']),this[_0x3b09e7(-0x38,-0x9a)]&&(this['particleSystem'][_0x3b09e7(0x84,0xe1)](),delete this[_0x5dd5bc(0x2d6,0x284)]);}['setData'](_0x214a54,_0xfe1f71){this['windData']=this[_0x49c811(0x52,-0x29)](_0x214a54);function _0x19a350(_0x3c2655,_0x19d485){return _0x2cd999(_0x19d485- -0x17f,_0x3c2655);}if(_0xfe1f71){this['_removedHook'](),this['_addedHook']();return;}function _0x49c811(_0x110513,_0x1a7d00){return _0x2cd999(_0x110513-0x9d,_0x1a7d00);}this[_0x49c811(-0x18,-0x16)]?(this[_0x49c811(-0x18,0x2b)][_0x19a350(-0x2af,-0x280)]['updateWindData'](this['windData']),this[_0x19a350(-0x14e,-0x195)]['requestRender']()):this[_0x49c811(-0x28,0x31)]();}['_setOptionsHook'](_0x2761c8,_0x1c6bce){function _0x38ad1d(_0x575e43,_0x5ac982){return _0x2cd999(_0x575e43-0x3cf,_0x5ac982);}this['particleSystem']&&(this[_0x38ad1d(0x31a,0x2ae)]['changeOptions'](_0x1c6bce),this['scene']['requestRender']());}['processWindData'](_0x1c06ba){function _0x1b8e3c(_0x5b5ca4,_0x370801){return _0x433a89(_0x370801-0x208,_0x5b5ca4);}var _0x241832,_0x208adb;function _0x3664f3(_0x52985b,_0x33ce89){return _0x2cd999(_0x52985b-0x62a,_0x33ce89);}const _0x522c17={..._0x1c06ba},_0x314098=_0x522c17;!_0x314098[_0x3664f3(0x5e4,0x57b)]&&_0x314098['rows']&&(_0x314098['height']=_0x314098['rows']);!_0x314098[_0x3664f3(0x559,0x52b)]&&_0x314098[_0x3664f3(0x606,0x60b)]&&(_0x314098['width']=_0x314098['cols']);!_0x314098['bounds']&&(_0x314098['bounds']={'west':_0x314098['xmin'],'south':_0x314098['ymin'],'east':_0x314098['xmax'],'north':_0x314098['ymax']});if(!_0x314098['u']){const _0x5caf15={};_0x5caf15['array']=_0x1c06ba['udata'],_0x5caf15[_0x3664f3(0x5ec,0x646)]=_0x1c06ba['umin'],_0x5caf15['max']=_0x1c06ba['umax'],_0x314098['u']=_0x5caf15;}if(!_0x314098['v']){const _0x74d40a={};_0x74d40a['array']=_0x1c06ba[_0x1b8e3c(0x207,0x20c)],_0x74d40a[_0x3664f3(0x5ec,0x63a)]=_0x1c06ba[_0x3664f3(0x545,0x580)],_0x74d40a['max']=_0x1c06ba['vmax'],_0x314098['v']=_0x74d40a;}if(((_0x241832=_0x314098['speed'])===null||_0x241832===void 0x0?void 0x0:_0x241832['min'])===undefined||((_0x208adb=_0x314098['speed'])===null||_0x208adb===void 0x0?void 0x0:_0x208adb[_0x1b8e3c(0x288,0x2c1)])===undefined||_0x314098[_0x3664f3(0x59f,0x55d)]['array']===undefined){const _0x8cfa16={'array':new Float32Array(_0x314098['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number[_0x3664f3(0x5d8,0x55f)]};for(let _0x23a696=0x0;_0x23a696<_0x314098['u'][_0x1b8e3c(0x2de,0x278)][_0x1b8e3c(0x27a,0x25e)];_0x23a696++){_0x8cfa16['array'][_0x23a696]=Math['sqrt'](_0x314098['u'][_0x3664f3(0x59a,0x543)][_0x23a696]*_0x314098['u'][_0x3664f3(0x59a,0x55b)][_0x23a696]+_0x314098['v']['array'][_0x23a696]*_0x314098['v']['array'][_0x23a696]),_0x8cfa16[_0x1b8e3c(0x2e8,0x278)][_0x23a696]!==0x0&&(_0x8cfa16[_0x3664f3(0x5ec,0x5bf)]=Math[_0x1b8e3c(0x31a,0x2ca)](_0x8cfa16[_0x1b8e3c(0x269,0x2ca)],_0x8cfa16['array'][_0x23a696]),_0x8cfa16[_0x1b8e3c(0x31b,0x2c1)]=Math['max'](_0x8cfa16['max'],_0x8cfa16[_0x3664f3(0x59a,0x579)][_0x23a696]));}_0x314098['speed']=_0x8cfa16;}return _0x314098;}['updateViewerParameters'](){var _0x4adb97;const _0x4d6afd=this[_0x8d3071(0x109,0x17b)],_0x55c4d4=_0x4d6afd['canvas'],_0x39bb68={};_0x39bb68['x']=0x0;function _0x59a707(_0x5cd822,_0x156564){return _0x2cd999(_0x156564-0x34c,_0x5cd822);}_0x39bb68['y']=0x0;const _0x90084b={};_0x90084b['x']=0x0,_0x90084b['y']=_0x55c4d4['clientHeight'];const _0x4100d1={};_0x4100d1['x']=_0x55c4d4['clientWidth'],_0x4100d1['y']=0x0;const _0x53c0c7={};_0x53c0c7['x']=_0x55c4d4['clientWidth'],_0x53c0c7['y']=_0x55c4d4['clientHeight'];const _0x170e24=[_0x39bb68,_0x90084b,_0x4100d1,_0x53c0c7];let _0x1b7976=0xb4,_0xe5ee9b=-0xb4,_0x1663c7=0x5a;function _0x8d3071(_0x3a40b9,_0xc97328){return _0x2cd999(_0x3a40b9-0x11f,_0xc97328);}let _0x236e1f=-0x5a,_0x6b9b5a=![];for(const _0x2fdb84 of _0x170e24){const _0x4b4511=_0x4d6afd[_0x59a707(0x35d,0x2de)][_0x8d3071(0x72,0xa2)](new Cesium$1['Cartesian2'](_0x2fdb84['x'],_0x2fdb84['y']),_0x4d6afd[_0x8d3071(0x8b,0xdd)][_0x8d3071(0x9a,0xf9)]);if(!_0x4b4511){_0x6b9b5a=!![];break;}const _0x1dfcdd=_0x4d6afd['globe']['ellipsoid']['cartesianToCartographic'](_0x4b4511),_0x5dc9ec=Cesium$1[_0x59a707(0x387,0x33c)]['toDegrees'](_0x1dfcdd[_0x8d3071(0x65,0x82)]),_0x125745=Cesium$1[_0x59a707(0x336,0x33c)]['toDegrees'](_0x1dfcdd[_0x8d3071(0x6b,0x19)]);_0x1b7976=Math['min'](_0x1b7976,_0x5dc9ec),_0xe5ee9b=Math['max'](_0xe5ee9b,_0x5dc9ec),_0x1663c7=Math['min'](_0x1663c7,_0x125745),_0x236e1f=Math['max'](_0x236e1f,_0x125745);}if(!_0x6b9b5a){const _0x3780ee=new Cesium$1['Cartesian2'](Math[_0x8d3071(0xd8,0x8e)](this['windData'][_0x8d3071(0x52,0x70)]['west'],_0x1b7976),Math['min'](this[_0x8d3071(0xc7,0x54)][_0x8d3071(0x52,0x10)][_0x8d3071(0x10d,0x14e)],_0xe5ee9b)),_0x5415fd=new Cesium$1['Cartesian2'](Math['max'](this[_0x8d3071(0xc7,0x11f)]['bounds'][_0x8d3071(0x12a,0x17f)],_0x1663c7),Math[_0x59a707(0x2cc,0x30e)](this['windData']['bounds'][_0x59a707(0x268,0x257)],_0x236e1f)),_0x326a94=(_0x3780ee['y']-_0x3780ee['x'])*0.05,_0x1c6af9=(_0x5415fd['y']-_0x5415fd['x'])*0.05;_0x3780ee['x']=Math[_0x59a707(0x294,0x305)](this['windData']['bounds']['west'],_0x3780ee['x']-_0x326a94),_0x3780ee['y']=Math['min'](this['windData'][_0x8d3071(0x52,0x0)]['east'],_0x3780ee['y']+_0x326a94),_0x5415fd['x']=Math['max'](this[_0x59a707(0x2cd,0x2f4)]['bounds']['south'],_0x5415fd['x']-_0x1c6af9),_0x5415fd['y']=Math[_0x8d3071(0xe1,0x112)](this['windData']['bounds'][_0x8d3071(0x2a,-0x4b)],_0x5415fd['y']+_0x1c6af9),this['viewerParameters']['lonRange']=_0x3780ee,this['viewerParameters']['latRange']=_0x5415fd;const _0x1bd9c0=this['windData'][_0x59a707(0x2b5,0x27f)][_0x59a707(0x390,0x33a)]-this['windData'][_0x8d3071(0x52,-0xe)]['west'],_0x3f3889=this['windData'][_0x59a707(0x2b6,0x27f)]['north']-this['windData'][_0x8d3071(0x52,0x38)][_0x59a707(0x304,0x357)],_0x8b2d1d=(_0x3780ee['y']-_0x3780ee['x'])/_0x1bd9c0,_0x3ba6b3=(_0x5415fd['y']-_0x5415fd['x'])/_0x3f3889,_0x2dd8a3=Math['min'](_0x8b2d1d,_0x3ba6b3),_0x1379eb=0x3e8*_0x2dd8a3;_0x1379eb>0x0&&(this['viewerParameters'][_0x8d3071(0xc8,0x59)]=Math['max'](0x0,Math['min'](0x3e8,_0x1379eb)));}this[_0x59a707(0x206,0x27a)]['sceneMode']=this[_0x8d3071(0x109,0x130)][_0x59a707(0x2e1,0x2b1)],(_0x4adb97=this['particleSystem'])===null||_0x4adb97===void 0x0||_0x4adb97[_0x8d3071(0xa3,0xa1)](this[_0x59a707(0x279,0x27a)]);}['getDataAtLonLat'](_0x13281a,_0x46afb0){const {bounds:_0x56e82e,width:_0x3fe3da,height:_0x25f5c2,u:_0x5e7029,v:_0x4f68c6,speed:_0x489f2a}=this['windData'],{flipY:_0x178703}=this['options'];if(_0x13281a<_0x56e82e['west']||_0x13281a>_0x56e82e[_0x32311c(0x1b1,0x198)]||_0x46afb0<_0x56e82e['south']||_0x46afb0>_0x56e82e['north'])return null;const _0x20bc0c=(_0x13281a-_0x56e82e['west'])/(_0x56e82e['east']-_0x56e82e[_0x32311c(0x15b,0x142)])*(_0x3fe3da-0x1);let _0x12fd5e=(_0x46afb0-_0x56e82e[_0x4d3421(0x375,0x368)])/(_0x56e82e['north']-_0x56e82e[_0x4d3421(0x3c2,0x368)])*(_0x25f5c2-0x1);_0x178703&&(_0x12fd5e=_0x25f5c2-0x1-_0x12fd5e);const _0x59c88c=Math['floor'](_0x20bc0c),_0x4511e7=Math['floor'](_0x12fd5e),_0x2d5a4b=Math['floor'](_0x20bc0c),_0x338579=Math[_0x32311c(0x185,0x12f)](_0x2d5a4b+0x1,_0x3fe3da-0x1),_0xc20b8d=Math['floor'](_0x12fd5e),_0x431a6e=Math['min'](_0xc20b8d+0x1,_0x25f5c2-0x1),_0x378410=_0x20bc0c-_0x2d5a4b,_0x3cf20f=_0x12fd5e-_0xc20b8d,_0x5cbd73=_0x4511e7*_0x3fe3da+_0x59c88c,_0x141a57=_0xc20b8d*_0x3fe3da+_0x2d5a4b,_0x3d3f7b=_0xc20b8d*_0x3fe3da+_0x338579,_0x3ec4db=_0x431a6e*_0x3fe3da+_0x2d5a4b,_0x43d161=_0x431a6e*_0x3fe3da+_0x338579,_0x5bad03=_0x5e7029['array'][_0x141a57],_0x234662=_0x5e7029[_0x32311c(0x133,0xbf)][_0x3d3f7b],_0x38ab98=_0x5e7029['array'][_0x3ec4db],_0x2568f3=_0x5e7029['array'][_0x43d161],_0x85aae7=(0x1-_0x378410)*(0x1-_0x3cf20f)*_0x5bad03+_0x378410*(0x1-_0x3cf20f)*_0x234662+(0x1-_0x378410)*_0x3cf20f*_0x38ab98+_0x378410*_0x3cf20f*_0x2568f3,_0x3e8299=_0x4f68c6['array'][_0x141a57],_0x198661=_0x4f68c6['array'][_0x3d3f7b],_0x35b840=_0x4f68c6['array'][_0x3ec4db],_0x3dfbb4=_0x4f68c6['array'][_0x43d161],_0x54085e=(0x1-_0x378410)*(0x1-_0x3cf20f)*_0x3e8299+_0x378410*(0x1-_0x3cf20f)*_0x198661+(0x1-_0x378410)*_0x3cf20f*_0x35b840+_0x378410*_0x3cf20f*_0x3dfbb4,_0x1b18c9=Math[_0x4d3421(0x337,0x2bc)](_0x85aae7*_0x85aae7+_0x54085e*_0x54085e),_0x1a4047={};_0x1a4047['u']=_0x5e7029[_0x4d3421(0x2e5,0x2cd)][_0x5cbd73],_0x1a4047['v']=_0x4f68c6['array'][_0x5cbd73],_0x1a4047['speed']=_0x489f2a['array'][_0x5cbd73];const _0x218293={};_0x218293['u']=_0x85aae7,_0x218293['v']=_0x54085e,_0x218293[_0x32311c(0x138,0x178)]=_0x1b18c9;const _0x62b94e={};_0x62b94e['original']=_0x1a4047,_0x62b94e[_0x4d3421(0x2ca,0x350)]=_0x218293;function _0x32311c(_0x4177e5,_0x4ba793){return _0x433a89(_0x4177e5-0xc3,_0x4ba793);}function _0x4d3421(_0x3205dc,_0x2f0c06){return _0x433a89(_0x2f0c06-0x25d,_0x3205dc);}return _0x62b94e;}}mars3d__namespace['LayerUtil']['register'](_0x433a89(0xad,0x99),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x123e2e(_0x4cfd75,_0xe8d6d5){return _0x2cd999(_0x4cfd75-0x600,_0xe8d6d5);}this[_0x123e2e(0x600,0x5ec)]=null,this['lat']=null,this[_0x123e2e(0x603,0x622)]=null,this[_0x123e2e(0x4fc,0x52e)]=null,this['age']=null;function _0x58d04f(_0x2e80de,_0x278af6){return _0x2cd999(_0x2e80de-0x5fd,_0x278af6);}this['speed']=null;}['destroy'](){for(const _0x4d0e3d in this){delete this[_0x4d0e3d];}}}class CanvasWindField{constructor(_0x384fc5){this['setOptions'](_0x384fc5);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x434151){function _0x1faea6(_0x2595f4,_0x11033f){return _0x433a89(_0x2595f4-0xee,_0x11033f);}function _0x5b4e98(_0x2cb886,_0x32f074){return _0x2cd999(_0x32f074-0x26,_0x2cb886);}this[_0x5b4e98(-0x45,-0x80)]=(0x64-(_0x434151>0x63?0x63:_0x434151))*0x64,this[_0x5b4e98(-0x29,-0xaa)]=[(this['xmax']-this[_0x5b4e98(-0x4e,-0xf)])/this[_0x1faea6(0x148,0xc6)],(this['ymax']-this['ymin'])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set[_0x2cd999(-0x5d,-0x47)](_0x1d803e){this['_maxAge']=_0x1d803e;}[_0x2cd999(-0x95,-0xaf)](_0x54985d){function _0x5d22bd(_0x5e527b,_0x29e896){return _0x2cd999(_0x5e527b-0x646,_0x29e896);}this['options']=_0x54985d,this[_0x5d22bd(0x5e9,0x579)]=_0x54985d['maxAge']||0x78;function _0x6af6cf(_0x3345e2,_0x893d45){return _0x433a89(_0x3345e2- -0x1ec,_0x893d45);}this[_0x5d22bd(0x5ad,0x589)]=_0x54985d['speedRate']||0x32,this['particles']=[];const _0xd9fb7e=_0x54985d['particlesNumber']||0x1000;for(let _0x1eb9d3=0x0;_0x1eb9d3<_0xd9fb7e;_0x1eb9d3++){const _0x23cc9f=this[_0x5d22bd(0x56e,0x5e0)](new CanvasParticle());this[_0x5d22bd(0x61c,0x630)]['push'](_0x23cc9f);}}[_0x2cd999(-0x6b,-0xa9)](_0x44f166){this[_0x33057e(-0x1d1,-0x155)]=_0x44f166['rows'],this[_0x33057e(-0x17d,-0x123)]=_0x44f166['cols'],this['xmin']=_0x44f166[_0x33057e(-0x19c,-0x134)],this['xmax']=_0x44f166['xmax'],this[_0x33057e(-0x1d6,-0x153)]=_0x44f166[_0x1c87ad(-0x21,-0x19)],this[_0x1c87ad(-0xa8,-0x66)]=_0x44f166[_0x1c87ad(-0xa8,-0xfe)],this['grid']=[];const _0x54086c=_0x44f166[_0x1c87ad(-0xca,-0x78)],_0x36482f=_0x44f166['vdata'];let _0x2781bd=![];_0x54086c['length']===this[_0x33057e(-0x10b,-0x155)]&&_0x54086c[0x0][_0x1c87ad(-0x77,0x12)]===this['cols']&&(_0x2781bd=!![]);let _0x489641=0x0;function _0x1c87ad(_0x25288b,_0x237804){return _0x2cd999(_0x25288b-0x33,_0x237804);}function _0x33057e(_0x273dcb,_0x577dc0){return _0x2cd999(_0x577dc0- -0xff,_0x273dcb);}let _0x4d4e56=null,_0x450495=null;for(let _0x4f205d=0x0;_0x4f205d<this['rows'];_0x4f205d++){_0x4d4e56=[];for(let _0x165fa4=0x0;_0x165fa4<this['cols'];_0x165fa4++,_0x489641++){_0x2781bd?_0x450495=this['_calcUV'](_0x54086c[_0x4f205d][_0x165fa4],_0x36482f[_0x4f205d][_0x165fa4]):_0x450495=this[_0x1c87ad(-0x6,-0x86)](_0x54086c[_0x489641],_0x36482f[_0x489641]),_0x4d4e56['push'](_0x450495);}this[_0x1c87ad(-0x97,-0xca)]['push'](_0x4d4e56);}!this[_0x1c87ad(-0x8a,-0x89)][_0x33057e(-0x11f,-0x1aa)]&&this['grid'][_0x33057e(-0x17b,-0x1dd)]();}[_0x433a89(0xa,0x8d)](){function _0x5c4018(_0x292041,_0x56aa52){return _0x2cd999(_0x292041-0x307,_0x56aa52);}delete this[_0x5c4018(0x2b1,0x26d)],delete this['cols'],delete this['xmin'];function _0x5a6b90(_0x49b06b,_0x24f797){return _0x2cd999(_0x49b06b- -0xc2,_0x24f797);}delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this[_0x5c4018(0x23d,0x1bf)],delete this[_0x5c4018(0x2dd,0x30d)];}[_0x2cd999(-0xc3,-0xf8)](_0x389df8,_0x355ede){const _0x4a92a0=(_0x389df8-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x1535ec(0x2a5,0x23f)]-0x1);function _0x1535ec(_0x4d21a5,_0x875f49){return _0x2cd999(_0x875f49-0x263,_0x4d21a5);}const _0x37cddd=(this[_0x893635(0x85,0xa2)]-_0x355ede)/(this['ymax']-this[_0x893635(0xc8,0x129)])*(this['rows']-0x1);function _0x893635(_0x288962,_0x2620f9){return _0x433a89(_0x2620f9-0x7d,_0x288962);}return[_0x4a92a0,_0x37cddd];}['getUVByXY'](_0x44ad42,_0x25c3da){if(_0x44ad42<0x0||_0x44ad42>=this[_0x4b9c66(0x26c,0x205)]||_0x25c3da>=this['rows'])return[0x0,0x0,0x0];const _0x44c3f9=Math[_0x9bc085(-0x92,-0x117)](_0x44ad42),_0x1d0f0a=Math['floor'](_0x25c3da);if(_0x44c3f9===_0x44ad42&&_0x1d0f0a===_0x25c3da)return this['grid'][_0x25c3da][_0x44ad42];const _0x1260d8=_0x44c3f9+0x1,_0x4e264c=_0x1d0f0a+0x1,_0x3a9d39=this[_0x4b9c66(0x29c,0x239)](_0x44c3f9,_0x1d0f0a),_0x241438=this['getUVByXY'](_0x1260d8,_0x1d0f0a);function _0x4b9c66(_0x389509,_0x5af1f5){return _0x433a89(_0x5af1f5-0x129,_0x389509);}const _0x521e20=this[_0x4b9c66(0x248,0x239)](_0x44c3f9,_0x4e264c);function _0x9bc085(_0x1fd19e,_0x3ab75c){return _0x433a89(_0x3ab75c- -0x210,_0x1fd19e);}const _0x672c8c=this['getUVByXY'](_0x1260d8,_0x4e264c);let _0xda941f=null;try{_0xda941f=this['_bilinearInterpolation'](_0x44ad42-_0x44c3f9,_0x25c3da-_0x1d0f0a,_0x3a9d39,_0x241438,_0x521e20,_0x672c8c);}catch(_0x29a4c6){console['log'](_0x44ad42,_0x25c3da);}return _0xda941f;}[_0x433a89(0x34,0xc)](_0x103a93,_0x963cb0,_0x3aeb80,_0xf2e9ae,_0x808487,_0x553a1b){const _0x543041=0x1-_0x103a93,_0x179528=0x1-_0x963cb0,_0x1abf08=_0x543041*_0x179528,_0x21511a=_0x103a93*_0x179528;function _0x33faed(_0x2fe5c0,_0x450278){return _0x433a89(_0x2fe5c0-0x23f,_0x450278);}const _0x146438=_0x543041*_0x963cb0,_0x499f2a=_0x103a93*_0x963cb0,_0x31d5df=_0x3aeb80[0x0]*_0x1abf08+_0xf2e9ae[0x0]*_0x21511a+_0x808487[0x0]*_0x146438+_0x553a1b[0x0]*_0x499f2a,_0x5d7a8f=_0x3aeb80[0x1]*_0x1abf08+_0xf2e9ae[0x1]*_0x21511a+_0x808487[0x1]*_0x146438+_0x553a1b[0x1]*_0x499f2a;return this[_0x33faed(0x306,0x331)](_0x31d5df,_0x5d7a8f);}['_calcUV'](_0x3434f1,_0xc24acc){function _0x15d87a(_0x1b6843,_0x4cca03){return _0x433a89(_0x4cca03-0xe1,_0x1b6843);}return[+_0x3434f1,+_0xc24acc,Math[_0x15d87a(0x185,0x140)](_0x3434f1*_0x3434f1+_0xc24acc*_0xc24acc)];}[_0x2cd999(-0x22,-0x3a)](_0x14d789,_0x50095b){function _0x3c8deb(_0x4619dc,_0x4fccbd){return _0x433a89(_0x4fccbd- -0xcb,_0x4619dc);}if(!this[_0x3c8deb(-0xbf,-0x9f)](_0x14d789,_0x50095b))return null;const _0x56596d=this['toGridXY'](_0x14d789,_0x50095b),_0x4b7718=this['getUVByXY'](_0x56596d[0x0],_0x56596d[0x1]);return _0x4b7718;}['isInExtent'](_0x110070,_0x3a46a9){function _0x494a69(_0x546e70,_0x17d683){return _0x2cd999(_0x17d683-0x16d,_0x546e70);}function _0x48b13b(_0x5c3907,_0x21f1ad){return _0x2cd999(_0x21f1ad-0x8e,_0x5c3907);}return _0x110070>=this['xmin']&&_0x110070<=this[_0x494a69(0x191,0x165)]&&_0x3a46a9>=this[_0x494a69(0x10f,0x119)]&&_0x3a46a9<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x26c895=fRandomByfloat(this['xmin'],this['xmax']),_0x599404=fRandomByfloat(this[_0x4c67fc(0x27d,0x203)],this['ymax']),_0x2bc2cc={};_0x2bc2cc['lat']=_0x599404;function _0x4c67fc(_0x5cb1a9,_0x8a06d3){return _0x433a89(_0x5cb1a9-0x1d1,_0x8a06d3);}return _0x2bc2cc['lng']=_0x26c895,_0x2bc2cc;}[_0x2cd999(-0x6,0x3c)](){function _0xd53925(_0x7b0570,_0x4ec7e9){return _0x433a89(_0x7b0570-0x30d,_0x4ec7e9);}let _0x22a016,_0x595e46,_0x12d535;function _0x265b46(_0xcce022,_0xe9d0e5){return _0x2cd999(_0xcce022-0x249,_0xe9d0e5);}for(let _0x985a0b=0x0,_0x164ebf=this['particles']['length'];_0x985a0b<_0x164ebf;_0x985a0b++){let _0x233316=this[_0xd53925(0x3e3,0x3cf)][_0x985a0b];_0x233316[_0xd53925(0x329,0x2fd)]<=0x0&&(_0x233316=this[_0x265b46(0x171,0x1a0)](_0x233316));if(_0x233316['age']>0x0){const _0x53a026=_0x233316[_0x265b46(0x24c,0x277)],_0x3f8eb2=_0x233316['tlat'];_0x12d535=this['getUVByPoint'](_0x53a026,_0x3f8eb2),_0x12d535?(_0x22a016=_0x53a026+this[_0x265b46(0x179,0x1cd)][0x0]*_0x12d535[0x0],_0x595e46=_0x3f8eb2+this['_calc_speedRate'][0x1]*_0x12d535[0x1],_0x233316['lng']=_0x53a026,_0x233316[_0xd53925(0x411,0x3c6)]=_0x3f8eb2,_0x233316['tlng']=_0x22a016,_0x233316['tlat']=_0x595e46,_0x233316[_0x265b46(0x1be,0x190)]=_0x12d535[0x2],_0x233316[_0xd53925(0x329,0x2fb)]--):_0x233316['age']=0x0;}}return this[_0xd53925(0x3e3,0x3c2)];}['_randomParticle'](_0x226672){function _0x4c8ef7(_0x1dbaa5,_0x316a5b){return _0x433a89(_0x1dbaa5-0x10b,_0x316a5b);}let _0x55ac24,_0x2e464c;for(let _0x12b16a=0x0;_0x12b16a<0x1e;_0x12b16a++){_0x55ac24=this['getRandomLatLng'](),_0x2e464c=this[_0x4c8ef7(0x1e9,0x16d)](_0x55ac24['lng'],_0x55ac24['lat']);if(_0x2e464c&&_0x2e464c[0x2]>0x0)break;}if(!_0x2e464c)return _0x226672;const _0x512ef9=_0x55ac24['lng']+this['_calc_speedRate'][0x0]*_0x2e464c[0x0],_0x292781=_0x55ac24['lat']+this['_calc_speedRate'][0x1]*_0x2e464c[0x1];_0x226672[_0x4c8ef7(0x20b,0x1f6)]=_0x55ac24['lng'];function _0x2bb10b(_0x4c8b1b,_0x4cc615){return _0x2cd999(_0x4c8b1b- -0x6e,_0x4cc615);}return _0x226672[_0x4c8ef7(0x20f,0x1b7)]=_0x55ac24['lat'],_0x226672['tlng']=_0x512ef9,_0x226672['tlat']=_0x292781,_0x226672[_0x2bb10b(-0x152,-0x161)]=Math['round'](0xa+Math[_0x2bb10b(-0x167,-0x1c4)]()*this['maxAge']),_0x226672[_0x2bb10b(-0xf9,-0xd0)]=_0x2e464c[0x2],_0x226672;}['destroy'](){for(const _0x41b1d4 in this){delete this[_0x41b1d4];}}}function fRandomByfloat(_0x44de1a,_0x41e325){return _0x44de1a+Math['random']()*(_0x41e325-_0x44de1a);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0xe02b8b={}){super(_0xe02b8b);function _0x4ef3b1(_0x183994,_0x331cc6){return _0x2cd999(_0x183994-0x3b9,_0x331cc6);}this[_0x4ef3b1(0x2b9,0x239)](_0xe02b8b);function _0x58f1ca(_0x5dd0cb,_0x381f89){return _0x433a89(_0x5dd0cb-0x43b,_0x381f89);}this['canvas']=null,_0xe02b8b[_0x4ef3b1(0x2d7,0x254)]&&_0xe02b8b[_0x4ef3b1(0x2dc,0x276)]&&(this[_0x4ef3b1(0x317,0x28f)]=new mars3d__namespace['ColorRamp'](_0xe02b8b));}['_setOptionsHook'](_0x28dc3d,_0x2c02a9){this['frameTime']=0x3e8/(_0x28dc3d['frameRate']||0xa),this['_pointerEvents']=this['options'][_0x5be879(0x3e5,0x37d)]??![];function _0x1e1b7f(_0x4c0b5a,_0x4b66e6){return _0x2cd999(_0x4c0b5a-0x574,_0x4b66e6);}this['color']=_0x28dc3d[_0x5be879(0x427,0x3c4)]||'#ffffff',this[_0x5be879(0x3f1,0x436)]=_0x28dc3d[_0x1e1b7f(0x56f,0x4f2)]||0x1,this['fixedHeight']=_0x28dc3d[_0x1e1b7f(0x580,0x55e)]??0x0,this['flipY']=_0x28dc3d[_0x5be879(0x390,0x390)]??![];function _0x5be879(_0x34427c,_0x2dee5e){return _0x2cd999(_0x2dee5e-0x43b,_0x34427c);}this['windField']&&this[_0x1e1b7f(0x573,0x556)][_0x1e1b7f(0x4df,0x495)](_0x28dc3d);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x584d48(_0x2dc675,_0x2f91c1){return _0x433a89(_0x2dc675- -0x34,_0x2f91c1);}return this[_0x584d48(-0x1f,0x4d)]['scene']['canvas']['clientWidth'];}get[_0x433a89(0x5b,0xac)](){function _0x457928(_0x3f7f12,_0x488b23){return _0x433a89(_0x3f7f12-0x520,_0x488b23);}return this[_0x457928(0x535,0x4e9)]['scene']['canvas']['clientHeight'];}get['pointerEvents'](){function _0x36b6f0(_0x41ed30,_0x39ce10){return _0x2cd999(_0x41ed30- -0x175,_0x39ce10);}return this[_0x36b6f0(-0x255,-0x2c1)];}set['pointerEvents'](_0x21b7e4){function _0x468d57(_0x217daf,_0x2350d9){return _0x433a89(_0x2350d9-0x48c,_0x217daf);}function _0x9c3c93(_0x504b00,_0x44a0cb){return _0x433a89(_0x44a0cb-0xc5,_0x504b00);}this['_pointerEvents']=_0x21b7e4;if(!this[_0x468d57(0x493,0x50b)])return;_0x21b7e4?this[_0x468d57(0x56a,0x50b)]['style']['pointer-events']='all':this['canvas'][_0x468d57(0x4c3,0x4c8)][_0x468d57(0x56f,0x54c)]='none';}get[_0x2cd999(-0x4f,-0x5c)](){return this['options']['particlesNumber'];}set[_0x433a89(0xb1,0x6a)](_0xd88cc0){function _0x557f8c(_0x253d38,_0x2f8ed7){return _0x2cd999(_0x253d38-0x3ab,_0x2f8ed7);}function _0x610b(_0x212a92,_0x8878a0){return _0x433a89(_0x212a92- -0x208,_0x8878a0);}this[_0x610b(-0x1c5,-0x1e0)][_0x610b(-0x157,-0x1cf)]=_0xd88cc0,clearTimeout(this[_0x557f8c(0x2f3,0x28a)]),this[_0x610b(-0x1c0,-0x1be)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x7d458c(_0x36ee53,_0x5b7860){return _0x433a89(_0x5b7860- -0x71,_0x36ee53);}function _0x1bf371(_0x27e042,_0x1c37ea){return _0x2cd999(_0x1c37ea-0x34b,_0x27e042);}return this[_0x1bf371(0x2d8,0x28e)][_0x1bf371(0x287,0x2b2)];}set['speedRate'](_0x16819b){this[_0x32e9ac(-0xe8,-0xf2)]['speedRate']=_0x16819b;function _0x5c01c2(_0x53476d,_0x5440c0){return _0x2cd999(_0x5440c0-0x1fd,_0x53476d);}function _0x32e9ac(_0x41b975,_0x3e1e0f){return _0x2cd999(_0x41b975- -0x2b,_0x3e1e0f);}this['windField']&&(this[_0x32e9ac(-0x2c,-0x9d)]['speedRate']=_0x16819b);}get[_0x2cd999(-0x5d,-0x9e)](){function _0x48544a(_0x25cd3c,_0x4694cd){return _0x2cd999(_0x25cd3c-0x2e0,_0x4694cd);}return this['options'][_0x48544a(0x283,0x2de)];}set['maxAge'](_0x4bf836){function _0x460ee0(_0x3e1b7b,_0xc761c3){return _0x2cd999(_0x3e1b7b-0x2a0,_0xc761c3);}function _0x2e6099(_0x32ca75,_0x37a1d7){return _0x433a89(_0x37a1d7- -0x150,_0x32ca75);}this[_0x2e6099(-0x10d,-0x10d)][_0x460ee0(0x243,0x231)]=_0x4bf836,this[_0x460ee0(0x29f,0x30a)]&&(this['windField'][_0x460ee0(0x243,0x1f8)]=_0x4bf836);}get[_0x433a89(0x8b,0x85)](){return this['windData'];}set['data'](_0x4bd142){function _0x5dfd34(_0x536e00,_0x14da78){return _0x433a89(_0x14da78-0x227,_0x536e00);}this[_0x5dfd34(0x311,0x2fe)](_0x4bd142);}get['rectangle'](){let _0x51fd0e=this['windData'][_0x5a7d58(0x300,0x2aa)],_0xb2771d=this[_0x1b555f(0x1dd,0x184)]['xmax'],_0x4fa38c=this['windData']['ymin'],_0x39aac2=this['windData'][_0x1b555f(0x15a,0x12a)];_0xb2771d>=0x167&&_0x51fd0e===0x0&&(_0x51fd0e=-0xb4,_0xb2771d=0xb4);_0x51fd0e=Math['max'](_0x51fd0e,-0xb4),_0xb2771d=Math[_0x1b555f(0x1f7,0x239)](_0xb2771d,0xb4);function _0x1b555f(_0x4f0e34,_0x36135f){return _0x2cd999(_0x4f0e34-0x235,_0x36135f);}function _0x5a7d58(_0x341874,_0xbadba4){return _0x2cd999(_0x341874-0x335,_0xbadba4);}return _0x4fa38c=Math[_0x5a7d58(0x2ee,0x2ef)](_0x4fa38c,-0x5a),_0x39aac2=Math[_0x5a7d58(0x2f7,0x2e2)](_0x39aac2,0x5a),Cesium['Rectangle']['fromDegrees'](_0x51fd0e,_0x4fa38c,_0xb2771d,_0x39aac2);}['_showHook'](_0x111e55){function _0xcc79a0(_0x2c8bca,_0x19d6c7){return _0x433a89(_0x2c8bca- -0xe8,_0x19d6c7);}function _0x130a10(_0x3bc0d9,_0x546bc5){return _0x433a89(_0x3bc0d9- -0x17b,_0x546bc5);}_0x111e55?this['_addedHook']():(this['windData']&&(this['options'][_0xcc79a0(-0x5d,-0x80)]=this[_0xcc79a0(-0x40,-0xa0)]),this['_removedHook']());}['_mountedHook'](){function _0x22cbe3(_0x106f0e,_0x4fa6b2){return _0x2cd999(_0x106f0e-0x2d3,_0x4fa6b2);}function _0x4c4623(_0x3df1a9,_0x2902b4){return _0x433a89(_0x3df1a9-0x90,_0x2902b4);}this['options']['worker']?this['initWorker']():this[_0x4c4623(0x18f,0x119)]=new CanvasWindField(this[_0x4c4623(0xd3,0x9b)]);}['_addedHook'](){this['canvas']=this[_0x11f3b5(0xc0,0x91)]();const _0x43dd04={};_0x43dd04['willReadFrequently']=!![];function _0x573303(_0x12c55d,_0x2d2398){return _0x2cd999(_0x2d2398-0x178,_0x12c55d);}this['canvasContext']=this[_0x573303(0xac,0xf7)]['getContext']('2d',_0x43dd04),this['bindEvent']();function _0x11f3b5(_0x47d9e8,_0x35189d){return _0x433a89(_0x47d9e8-0x72,_0x35189d);}this['options'][_0x11f3b5(0xfd,0x113)]&&this['setData'](this[_0x11f3b5(0xb5,0x135)][_0x11f3b5(0xfd,0xad)]);}['_removedHook'](){function _0x1fb27c(_0x56d289,_0x2dc6e0){return _0x433a89(_0x2dc6e0-0xec,_0x56d289);}this['clear'](),this[_0x1fb27c(0x199,0x1d5)]();function _0x6e76ae(_0x517c30,_0x573da4){return _0x2cd999(_0x573da4-0x4f2,_0x517c30);}this[_0x6e76ae(0x4e9,0x471)]&&(this['_map']['container']['removeChild'](this[_0x1fb27c(0xed,0x16b)]),delete this['canvas']);}['_createCanvas'](){const _0x3dac79=mars3d__namespace[_0x108430(0x34f,0x344)][_0x108430(0x2ba,0x30a)]('canvas','mars3d-canvasWind',this['_map'][_0x471e28(0x593,0x594)]);_0x3dac79['style']['position']='absolute',_0x3dac79['style']['top']='0px',_0x3dac79['style']['left']=_0x108430(0x3da,0x374),_0x3dac79[_0x108430(0x275,0x2cd)]['width']=this[_0x108430(0x2eb,0x2a6)]['scene']['canvas'][_0x108430(0x315,0x2f1)]+'px';function _0x108430(_0x57c69a,_0x5e59eb){return _0x433a89(_0x5e59eb-0x291,_0x57c69a);}_0x3dac79['style']['height']=this[_0x108430(0x22b,0x2a6)][_0x471e28(0x570,0x58f)]['canvas']['clientHeight']+'px',_0x3dac79['style']['pointerEvents']=this[_0x471e28(0x4a6,0x484)]?'auto':'none';function _0x471e28(_0x22d99f,_0xb99a77){return _0x433a89(_0x22d99f-0x486,_0xb99a77);}return _0x3dac79[_0x471e28(0x4c2,0x4c1)][_0x471e28(0x4a5,0x4a9)]=this['options']['zIndex']??0x9,_0x3dac79[_0x471e28(0x4b5,0x52e)]=this['_map']['scene']['canvas']['clientWidth'],_0x3dac79['height']=this[_0x471e28(0x49b,0x448)]['scene']['canvas']['clientHeight'],_0x3dac79;}[_0x2cd999(-0x30,-0x1e)](){function _0x3e67e8(_0x637f44,_0x57d101){return _0x433a89(_0x637f44-0x429,_0x57d101);}function _0x42ae6e(_0x5c13f8,_0x24db34){return _0x433a89(_0x24db34-0x435,_0x5c13f8);}this['canvas']&&(this['canvas']['style'][_0x3e67e8(0x458,0x3da)]=this[_0x42ae6e(0x3c0,0x44a)]['scene']['canvas'][_0x42ae6e(0x493,0x495)]+'px',this['canvas']['style'][_0x42ae6e(0x4c0,0x4ef)]=this[_0x42ae6e(0x3c3,0x44a)]['scene']['canvas']['clientHeight']+'px',this[_0x3e67e8(0x4a8,0x4ba)]['width']=this['_map'][_0x42ae6e(0x534,0x51f)]['canvas']['clientWidth'],this[_0x3e67e8(0x4a8,0x510)]['height']=this['_map']['scene']['canvas'][_0x42ae6e(0x493,0x4af)]);}[_0x2cd999(-0xc1,-0x6d)](){const _0x8e2e5e=this;let _0x2c8c64=Date['now']();(function _0xd9ae4c(){if(_0x8e2e5e['isDestroy'])return;_0x8e2e5e['_animateFrame']=window['requestAnimationFrame'](_0xd9ae4c);function _0x56ac52(_0x112c36,_0x1b5fc2){return _0x75ed(_0x112c36- -0xd,_0x1b5fc2);}function _0x5a1fea(_0x9d607d,_0xf23d8a){return _0x75ed(_0xf23d8a-0x9c,_0x9d607d);}if(_0x8e2e5e[_0x56ac52(0x1a4,0x151)]&&_0x8e2e5e['windField']){const _0x528e36=Date['now'](),_0x208407=_0x528e36-_0x2c8c64;_0x208407>_0x8e2e5e[_0x56ac52(0x227,0x241)]&&(_0x2c8c64=_0x528e36-_0x208407%_0x8e2e5e['frameTime'],_0x8e2e5e[_0x56ac52(0x1a5,0x128)]());}}());function _0x4e5a63(_0x190672,_0x5ced90){return _0x433a89(_0x5ced90- -0x173,_0x190672);}window[_0x5f365c(-0xec,-0xfe)]('resize',this[_0x4e5a63(-0xd7,-0xa3)][_0x5f365c(-0x182,-0x117)](this),![]);function _0x5f365c(_0x409015,_0x51e45d){return _0x433a89(_0x51e45d- -0x181,_0x409015);}this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x4e5a63(-0x1ab,-0x124)][_0x4e5a63(-0x65,-0xe7)],this['_onMapWhellEvent'],this),this[_0x4e5a63(-0x18a,-0x15e)]['on'](mars3d__namespace['EventType'][_0x5f365c(-0x143,-0xfc)],this[_0x5f365c(-0xee,-0x109)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x5f365c(-0xe2,-0xbb)],this));}['unbindEvent'](){window[_0x48e02f(0x38b,0x313)](this['_animateFrame']);function _0x48e02f(_0xd835e9,_0x1c8714){return _0x2cd999(_0x1c8714-0x3ec,_0xd835e9);}function _0x303634(_0x4f1455,_0x7cf3bb){return _0x2cd999(_0x7cf3bb- -0x145,_0x4f1455);}delete this[_0x303634(-0x219,-0x1a9)],window['removeEventListener']('resize',this['resize']),this[_0x48e02f(0x301,0x32f)]['mouseHidden']&&(this[_0x48e02f(0x30e,0x301)]['off'](mars3d__namespace['EventType'][_0x48e02f(0x31f,0x378)],this[_0x48e02f(0x417,0x3d0)],this),this['_map']['off'](mars3d__namespace[_0x48e02f(0x319,0x33b)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0x48e02f(0x2f7,0x301)]['off'](mars3d__namespace[_0x48e02f(0x335,0x33b)]['mouseUp'],this[_0x48e02f(0x421,0x3b2)],this),this[_0x303634(-0x257,-0x230)][_0x48e02f(0x391,0x387)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x1af7da){clearTimeout(this['refreshTimer']);if(!this['show']||!this['canvas'])return;function _0x59063b(_0x38d17b,_0x2fcb04){return _0x2cd999(_0x2fcb04-0x5e5,_0x38d17b);}this['canvas']['style'][_0x599741(0x1c6,0x16a)]=_0x599741(0x130,0x140);function _0x599741(_0x4e822b,_0x2bd265){return _0x433a89(_0x4e822b-0xd9,_0x2bd265);}this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x12247c(_0x23a0c3,_0x397d15){return _0x59063b(_0x23a0c3,_0x397d15- -0x38);}this[_0x4961b3(0x3cb,0x35b)]();function _0x4961b3(_0x2373ba,_0x14ceb9){return _0x599741(_0x2373ba-0x1f4,_0x14ceb9);}this[_0x4961b3(0x34c,0x304)][_0x4961b3(0x309,0x356)][_0x12247c(0x537,0x59a)]='visible';},0xc8);}['_onMouseDownEvent'](_0x5a8eec){function _0x5e6e9d(_0x6dc8e4,_0x3887b5){return _0x2cd999(_0x6dc8e4-0x13d,_0x3887b5);}function _0x423fc6(_0x3a1eb3,_0x172c6e){return _0x433a89(_0x172c6e-0x148,_0x3a1eb3);}this['mouse_down']=!![],this[_0x423fc6(0x19a,0x15d)][_0x423fc6(0x18e,0x1e3)](mars3d__namespace[_0x5e6e9d(0x8c,0x86)]['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x423fc6(0x10e,0x15d)]['on'](mars3d__namespace[_0x5e6e9d(0x8c,0x82)]['mouseMove'],this[_0x423fc6(0x277,0x222)],this);}['_onMouseMoveEvent'](_0x314efd){function _0x29ac3a(_0x37a93,_0x87a311){return _0x433a89(_0x87a311-0x21d,_0x37a93);}function _0x3502f9(_0x5b450e,_0x57016c){return _0x2cd999(_0x5b450e- -0x5b,_0x57016c);}if(!this[_0x29ac3a(0x23c,0x26e)]||!this[_0x29ac3a(0x2f5,0x29c)])return;this[_0x29ac3a(0x368,0x305)]&&(this[_0x3502f9(-0xdc,-0xe7)][_0x3502f9(-0x11f,-0xe0)][_0x29ac3a(0x2d9,0x30a)]=_0x29ac3a(0x2e4,0x274),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x38a617){if(!this['show']||!this['canvas'])return;this['_map']['off'](mars3d__namespace['EventType'][_0x4fefac(0x1ec,0x221)],this['_onMouseMoveEvent'],this);function _0x568d57(_0x131ddb,_0x158995){return _0x433a89(_0x131ddb- -0x1e2,_0x158995);}this[_0x4fefac(0x282,0x278)]&&this['mouse_move']&&this[_0x4fefac(0x2ab,0x28e)]();this[_0x568d57(-0x163,-0x18e)][_0x568d57(-0x1a6,-0x1a5)]['visibility']=_0x568d57(-0x116,-0x192);function _0x4fefac(_0x3bdd82,_0x3647b4){return _0x2cd999(_0x3647b4-0x290,_0x3bdd82);}this[_0x4fefac(0x2e7,0x278)]=![],this['mouse_move']=![];}['setData'](_0x31c32d){this['clear']();function _0xba04f8(_0x5d0ddd,_0x2cf9d1){return _0x433a89(_0x5d0ddd- -0x1f3,_0x2cf9d1);}function _0x2f4f44(_0x386db1,_0x19b4cb){return _0x2cd999(_0x386db1-0x48d,_0x19b4cb);}this[_0x2f4f44(0x435,0x4a1)]=_0x31c32d,this[_0xba04f8(-0xf4,-0x9d)]['setDate'](_0x31c32d),this['redraw']();}[_0x433a89(0xfe,0xa1)](){function _0x28afd7(_0x1ec8e1,_0x4c2b2e){return _0x433a89(_0x4c2b2e-0x3e8,_0x1ec8e1);}if(!this['show'])return;this['windField']['setOptions'](this[_0x28afd7(0x3f6,0x42b)]),this['update']();}[_0x2cd999(-0xae,-0x112)](){if(this['_updateIng'])return;function _0xf52ec(_0xd78ee9,_0x41154b){return _0x2cd999(_0xd78ee9- -0x185,_0x41154b);}function _0x2b9ee8(_0x380256,_0xcaea9c){return _0x2cd999(_0xcaea9c-0x5e,_0x380256);}this[_0xf52ec(-0x235,-0x1ce)]=!![];if(this[_0xf52ec(-0x1f7,-0x22c)])this['windField']['update']();else{const _0x1c3bbf=this['windField'][_0xf52ec(-0x18b,-0x11f)]();this[_0xf52ec(-0x196,-0x1e4)](_0x1c3bbf);}this[_0xf52ec(-0x235,-0x2a6)]=![];}[_0x433a89(0xef,0xc5)](_0x20fbad){this[_0x34df02(0xbd,0x44)]=_0x20fbad,this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext'][_0x34df02(0x153,0xe1)](0x0,0x0,this['canvasWidth'],this['canvasHeight']);function _0x34df02(_0x91c960,_0x337d13){return _0x433a89(_0x337d13-0x2b,_0x91c960);}this['canvasContext']['globalCompositeOperation']=_0x3f726e(0x28b,0x2f9),this['canvasContext'][_0x34df02(0x17,0x3c)]=0.9;const _0x30909c=this['_map'][_0x3f726e(0x26b,0x22a)]['mode']!==Cesium[_0x34df02(0x1c,0x48)]['SCENE3D'];function _0x3f726e(_0x49070e,_0x1a23b5){return _0x433a89(_0x49070e-0x181,_0x1a23b5);}const _0x50575f=this[_0x34df02(-0x54,0x33)]*0.25;if(this[_0x34df02(0xa9,0x89)])for(let _0x19e3ee=0x0,_0x40d2b6=_0x20fbad[_0x3f726e(0x1d7,0x1ec)];_0x19e3ee<_0x40d2b6;_0x19e3ee++){const _0x378029=_0x20fbad[_0x19e3ee],_0x592707=this[_0x34df02(0x114,0xa9)](_0x378029,_0x378029[_0x34df02(0x13c,0x12b)],_0x378029['lat'],_0x378029[_0x3f726e(0x272,0x218)]),_0x298e90=this[_0x3f726e(0x1ff,0x26f)](_0x378029,_0x378029['tlng'],_0x378029['tlat'],_0x378029['talt']);if(!_0x592707||!_0x298e90)continue;if(_0x30909c&&Math[_0x34df02(0xd5,0xab)](_0x592707[0x0]-_0x298e90[0x0])>=_0x50575f)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x34df02(0x56,0x89)]['getColor'](_0x378029['speed']),this['canvasContext']['moveTo'](_0x592707[0x0],_0x592707[0x1]),this['canvasContext']['lineTo'](_0x298e90[0x0],_0x298e90[0x1]),this[_0x3f726e(0x259,0x207)]['stroke']();}else{this[_0x3f726e(0x259,0x1f6)]['beginPath'](),this['canvasContext'][_0x34df02(0x169,0x126)]=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x34df02(0x115,0xb4)];for(let _0x9195ed=0x0,_0x1d6c7a=_0x20fbad['length'];_0x9195ed<_0x1d6c7a;_0x9195ed++){const _0x1b0e8e=_0x20fbad[_0x9195ed],_0x15e3d0=this['_tomap'](_0x1b0e8e,_0x1b0e8e['lng'],_0x1b0e8e[_0x3f726e(0x285,0x2a8)],_0x1b0e8e[_0x3f726e(0x272,0x207)]),_0xe8df68=this[_0x34df02(0x7e,0xa9)](_0x1b0e8e,_0x1b0e8e[_0x34df02(0x190,0x12e)],_0x1b0e8e[_0x3f726e(0x17d,0x123)],_0x1b0e8e[_0x3f726e(0x21f,0x1ae)]);if(!_0x15e3d0||!_0xe8df68)continue;if(_0x30909c&&Math['abs'](_0x15e3d0[0x0]-_0xe8df68[0x0])>=_0x50575f)continue;this[_0x3f726e(0x259,0x247)]['moveTo'](_0x15e3d0[0x0],_0x15e3d0[0x1]),this['canvasContext']['lineTo'](_0xe8df68[0x0],_0xe8df68[0x1]);}this[_0x34df02(0x18a,0x103)][_0x3f726e(0x197,0x1fd)]();}}['_tomap'](_0x1e6d3d,_0x411b91,_0x5f505e,_0x399e40){const _0x5a7f36=Cesium[_0x5c6245(0x2c6,0x2e8)]['fromDegrees'](_0x411b91,_0x5f505e,_0x399e40??this[_0x5c6245(0x3a7,0x3da)]),_0x37624=this['_map']['scene'];if(_0x37624[_0x5c6245(0x300,0x291)]===Cesium[_0x5c6245(0x2b8,0x2c7)]['SCENE3D']){const _0x185c6c=new Cesium['EllipsoidalOccluder'](_0x37624[_0x5c6245(0x307,0x287)][_0x5c6245(0x316,0x2b4)],_0x37624[_0x578ea7(0x587,0x5c6)][_0x578ea7(0x5ba,0x5b5)]),_0x320d30=_0x185c6c[_0x5c6245(0x378,0x33e)](_0x5a7f36);if(!_0x320d30)return _0x1e6d3d[_0x5c6245(0x2b7,0x253)]=0x0,null;}function _0x5c6245(_0x1e246a,_0x1f45ff){return _0x433a89(_0x1e246a-0x29b,_0x1f45ff);}const _0x1e5503=mars3d__namespace['PointTrans'][_0x578ea7(0x559,0x4f4)](this['_map']['scene'],_0x5a7f36);function _0x578ea7(_0xc4b81c,_0xa89f10){return _0x2cd999(_0xc4b81c-0x5f5,_0xa89f10);}return _0x1e5503?[_0x1e5503['x'],_0x1e5503['y']]:null;}['clear'](){this[_0x3208eb(0x563,0x5e9)][_0x178144(0x195,0x179)]();function _0x178144(_0x152a56,_0x19aac3){return _0x433a89(_0x152a56-0x18b,_0x19aac3);}function _0x3208eb(_0x180612,_0x3ced3a){return _0x2cd999(_0x180612-0x564,_0x3ced3a);}delete this[_0x178144(0x233,0x238)];}['initWorker'](){this[_0x409d31(0x2d0,0x26e)]=new Worker(this['options']['worker']),this['worker'][_0x409d31(0x248,0x233)]=_0x474721=>{function _0xe3d172(_0x48ec8f,_0x244907){return _0x1ca276(_0x244907,_0x48ec8f- -0xb0);}this['_drawLines'](_0x474721[_0xe3d172(0x215,0x1b3)]['particles']);function _0x517756(_0x423657,_0x5d7818){return _0x409d31(_0x5d7818- -0x3cb,_0x423657);}this[_0x517756(-0xca,-0xec)]=![];},this['windField']={'init':_0x32ec08=>{const _0x46294d={};_0x46294d[_0x7d011f(-0x164,-0x194)]='init';function _0x7d011f(_0x1abf36,_0x4a5924){return _0x409d31(_0x1abf36- -0x3ff,_0x4a5924);}function _0xd1e933(_0x161384,_0x289819){return _0x1ca276(_0x289819,_0x161384- -0x1e1);}_0x46294d['options']=_0x32ec08,this['worker'][_0x7d011f(-0x188,-0x143)](_0x46294d);},'setOptions':_0x6228d0=>{const _0x530267={};_0x530267[_0x36beeb(0x55e,0x51d)]=_0x26482e(0x158,0x18b),_0x530267['options']=_0x6228d0;function _0x26482e(_0x1b8db9,_0x288fa2){return _0x409d31(_0x288fa2- -0x122,_0x1b8db9);}function _0x36beeb(_0x584061,_0x39aabb){return _0x409d31(_0x584061-0x2c3,_0x39aabb);}this['worker']['postMessage'](_0x530267);},'setDate':_0x23eacb=>{function _0x4fcbd8(_0x39ddc0,_0x268b1c){return _0x1ca276(_0x268b1c,_0x39ddc0- -0x382);}const _0x1b12cb={};_0x1b12cb[_0x235776(-0x17c,-0x1ec)]='setDate',_0x1b12cb[_0x235776(-0x22c,-0x1ba)]=_0x23eacb;function _0x235776(_0x14c40e,_0x3c01b0){return _0x409d31(_0x3c01b0- -0x487,_0x14c40e);}this[_0x4fcbd8(-0xba,-0x48)][_0x235776(-0x20b,-0x210)](_0x1b12cb);},'update':()=>{if(this[_0x1374ff(0x62e,0x5b8)])return;this['_updateIng2']=!![];const _0xdc679={};_0xdc679['type']='update';function _0x1374ff(_0xccce8b,_0x57a67e){return _0x1ca276(_0xccce8b,_0x57a67e-0x2e1);}this['worker']['postMessage'](_0xdc679);},'clear':()=>{const _0xd7c805={};function _0x3ed523(_0x3c15fd,_0x578d1b){return _0x1ca276(_0x3c15fd,_0x578d1b- -0x1ea);}_0xd7c805['type']='clear',this[_0x3ed523(0xd0,0xde)]['postMessage'](_0xd7c805);}};function _0x1ca276(_0x530bbb,_0x54ada1){return _0x433a89(_0x54ada1-0x23a,_0x530bbb);}function _0x409d31(_0x2122e0,_0xb99cdf){return _0x433a89(_0x2122e0-0x242,_0xb99cdf);}this['windField']['init'](this[_0x409d31(0x285,0x28c)]);}}mars3d__namespace[_0x2cd999(-0x38,0x14)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x2cd999(-0x49,0x29)]=CanvasWindField,mars3d__namespace[_0x433a89(0xcf,0xd3)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x433a89(0xf5,0xcd)]=WindLayer,exports[_0x2cd999(-0x31,-0x70)]=WindUtil;const _0xc8b041={};_0xc8b041[_0x2cd999(0x1,0x64)]=!![],Object['defineProperty'](exports,'__esModule',_0xc8b041);
}));
